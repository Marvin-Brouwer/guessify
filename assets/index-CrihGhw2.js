(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();const ts=(r,e)=>r===e,St=Symbol("solid-proxy"),rs=typeof Proxy=="function",Qe={equals:ts};let Pe=null,br=kr;const Z=1,Je=2,vr={owned:null,cleanups:null,context:null,owner:null};var _=null;let ft=null,ss=null,C=null,N=null,J=null,rt=0;function Ft(r,e){const t=C,s=_,n=r.length===0,i=e===void 0?s:e,a=n?vr:{owned:null,cleanups:null,context:i?i.context:null,owner:i},o=n?r:()=>r(()=>W(()=>$e(a)));_=a,C=null;try{return oe(o,!0)}finally{C=t,_=s}}function A(r,e){e=e?Object.assign({},Qe,e):Qe;const t={value:r,observers:null,observerSlots:null,comparator:e.equals||void 0},s=n=>(typeof n=="function"&&(n=n(t.value)),Sr(t,n));return[yr.bind(t),s]}function j(r,e,t){const s=st(r,e,!1,Z);Be(s)}function ee(r,e,t){br=ls;const s=st(r,e,!1,Z);(!t||!t.render)&&(s.user=!0),J?J.push(s):Be(s)}function S(r,e,t){t=t?Object.assign({},Qe,t):Qe;const s=st(r,e,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=t.equals||void 0,Be(s),yr.bind(s)}function ns(r){return oe(r,!1)}function W(r){if(C===null)return r();const e=C;C=null;try{return r()}finally{C=e}}function Rt(r,e,t){const s=Array.isArray(r);let n,i=t&&t.defer;return a=>{let o;if(s){o=Array(r.length);for(let c=0;c<r.length;c++)o[c]=r[c]()}else o=r();if(i)return i=!1,a;const d=W(()=>e(o,n,a));return n=o,d}}function te(r){ee(()=>W(r))}function X(r){return _===null||(_.cleanups===null?_.cleanups=[r]:_.cleanups.push(r)),r}function is(r,e){Pe||(Pe=Symbol("error")),_=st(void 0,void 0,!0),_.context={..._.context,[Pe]:[e]};try{return r()}catch(t){Le(t)}finally{_=_.owner}}function Ot(){return _}function Tt(r,e){const t=_,s=C;_=r,C=null;try{return oe(e,!0)}catch(n){Le(n)}finally{_=t,C=s}}function os(r){const e=C,t=_;return Promise.resolve().then(()=>{C=e,_=t;let s;return oe(r,!1),C=_=null,s?s.done:void 0})}function ve(r,e){const t=Symbol("context");return{id:t,Provider:ds(t),defaultValue:r}}function ye(r){let e;return _&&_.context&&(e=_.context[r.id])!==void 0?e:r.defaultValue}function G(r){const e=S(r),t=S(()=>kt(e()));return t.toArray=()=>{const s=t();return Array.isArray(s)?s:s!=null?[s]:[]},t}function yr(){if(this.sources&&this.state)if(this.state===Z)Be(this);else{const r=N;N=null,oe(()=>Ye(this),!1),N=r}if(C){const r=this.observers?this.observers.length:0;C.sources?(C.sources.push(this),C.sourceSlots.push(r)):(C.sources=[this],C.sourceSlots=[r]),this.observers?(this.observers.push(C),this.observerSlots.push(C.sources.length-1)):(this.observers=[C],this.observerSlots=[C.sources.length-1])}return this.value}function Sr(r,e,t){let s=r.value;return(!r.comparator||!r.comparator(s,e))&&(r.value=e,r.observers&&r.observers.length&&oe(()=>{for(let n=0;n<r.observers.length;n+=1){const i=r.observers[n],a=ft&&ft.running;a&&ft.disposed.has(i),(a?!i.tState:!i.state)&&(i.pure?N.push(i):J.push(i),i.observers&&Mr(i)),a||(i.state=Z)}if(N.length>1e6)throw N=[],new Error},!1)),e}function Be(r){if(!r.fn)return;$e(r);const e=rt;as(r,r.value,e)}function as(r,e,t){let s;const n=_,i=C;C=_=r;try{s=r.fn(e)}catch(a){return r.pure&&(r.state=Z,r.owned&&r.owned.forEach($e),r.owned=null),r.updatedAt=t+1,Le(a)}finally{C=i,_=n}(!r.updatedAt||r.updatedAt<=t)&&(r.updatedAt!=null&&"observers"in r?Sr(r,s):r.value=s,r.updatedAt=t)}function st(r,e,t,s=Z,n){const i={fn:r,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:_,context:_?_.context:null,pure:t};return _===null||_!==vr&&(_.owned?_.owned.push(i):_.owned=[i]),i}function Xe(r){if(r.state===0)return;if(r.state===Je)return Ye(r);if(r.suspense&&W(r.suspense.inFallback))return r.suspense.effects.push(r);const e=[r];for(;(r=r.owner)&&(!r.updatedAt||r.updatedAt<rt);)r.state&&e.push(r);for(let t=e.length-1;t>=0;t--)if(r=e[t],r.state===Z)Be(r);else if(r.state===Je){const s=N;N=null,oe(()=>Ye(r,e[0]),!1),N=s}}function oe(r,e){if(N)return r();let t=!1;e||(N=[]),J?t=!0:J=[],rt++;try{const s=r();return cs(t),s}catch(s){t||(J=null),N=null,Le(s)}}function cs(r){if(N&&(kr(N),N=null),r)return;const e=J;J=null,e.length&&oe(()=>br(e),!1)}function kr(r){for(let e=0;e<r.length;e++)Xe(r[e])}function ls(r){let e,t=0;for(e=0;e<r.length;e++){const s=r[e];s.user?r[t++]=s:Xe(s)}for(e=0;e<t;e++)Xe(r[e])}function Ye(r,e){r.state=0;for(let t=0;t<r.sources.length;t+=1){const s=r.sources[t];if(s.sources){const n=s.state;n===Z?s!==e&&(!s.updatedAt||s.updatedAt<rt)&&Xe(s):n===Je&&Ye(s,e)}}}function Mr(r){for(let e=0;e<r.observers.length;e+=1){const t=r.observers[e];t.state||(t.state=Je,t.pure?N.push(t):J.push(t),t.observers&&Mr(t))}}function $e(r){let e;if(r.sources)for(;r.sources.length;){const t=r.sources.pop(),s=r.sourceSlots.pop(),n=t.observers;if(n&&n.length){const i=n.pop(),a=t.observerSlots.pop();s<n.length&&(i.sourceSlots[a]=s,n[s]=i,t.observerSlots[s]=a)}}if(r.tOwned){for(e=r.tOwned.length-1;e>=0;e--)$e(r.tOwned[e]);delete r.tOwned}if(r.owned){for(e=r.owned.length-1;e>=0;e--)$e(r.owned[e]);r.owned=null}if(r.cleanups){for(e=r.cleanups.length-1;e>=0;e--)r.cleanups[e]();r.cleanups=null}r.state=0}function us(r){return r instanceof Error?r:new Error(typeof r=="string"?r:"Unknown error",{cause:r})}function Ut(r,e,t){try{for(const s of e)s(r)}catch(s){Le(s,t&&t.owner||null)}}function Le(r,e=_){const t=Pe&&e&&e.context&&e.context[Pe],s=us(r);if(!t)throw s;J?J.push({fn(){Ut(s,t,e)},state:Z}):Ut(s,t,e)}function kt(r){if(typeof r=="function"&&!r.length)return kt(r());if(Array.isArray(r)){const e=[];for(let t=0;t<r.length;t++){const s=kt(r[t]);Array.isArray(s)?e.push.apply(e,s):e.push(s)}return e}return r}function ds(r,e){return function(s){let n;return j(()=>n=W(()=>(_.context={..._.context,[r]:s.value},G(()=>s.children))),void 0),n}}function v(r,e){return W(()=>r(e||{}))}function je(){return!0}const fs={get(r,e,t){return e===St?t:r.get(e)},has(r,e){return e===St?!0:r.has(e)},set:je,deleteProperty:je,getOwnPropertyDescriptor(r,e){return{configurable:!0,enumerable:!0,get(){return r.get(e)},set:je,deleteProperty:je}},ownKeys(r){return r.keys()}};function ht(r){return(r=typeof r=="function"?r():r)?r:{}}function hs(){for(let r=0,e=this.length;r<e;++r){const t=this[r]();if(t!==void 0)return t}}function ms(...r){let e=!1;for(let a=0;a<r.length;a++){const o=r[a];e=e||!!o&&St in o,r[a]=typeof o=="function"?(e=!0,S(o)):o}if(rs&&e)return new Proxy({get(a){for(let o=r.length-1;o>=0;o--){const d=ht(r[o])[a];if(d!==void 0)return d}},has(a){for(let o=r.length-1;o>=0;o--)if(a in ht(r[o]))return!0;return!1},keys(){const a=[];for(let o=0;o<r.length;o++)a.push(...Object.keys(ht(r[o])));return[...new Set(a)]}},fs);const t={},s=Object.create(null);for(let a=r.length-1;a>=0;a--){const o=r[a];if(!o)continue;const d=Object.getOwnPropertyNames(o);for(let c=d.length-1;c>=0;c--){const l=d[c];if(l==="__proto__"||l==="constructor")continue;const u=Object.getOwnPropertyDescriptor(o,l);if(!s[l])s[l]=u.get?{enumerable:!0,configurable:!0,get:hs.bind(t[l]=[u.get.bind(o)])}:u.value!==void 0?u:void 0;else{const f=t[l];f&&(u.get?f.push(u.get.bind(o)):u.value!==void 0&&f.push(()=>u.value))}}}const n={},i=Object.keys(s);for(let a=i.length-1;a>=0;a--){const o=i[a],d=s[o];d&&d.get?Object.defineProperty(n,o,d):n[o]=d?d.value:void 0}return n}const gs=r=>`Stale read from <${r}>.`;function ce(r){const e=r.keyed,t=S(()=>r.when,void 0,{equals:(s,n)=>e?s===n:!s==!n});return S(()=>{const s=t();if(s){const n=r.children;return typeof n=="function"&&n.length>0?W(()=>n(e?s:()=>{if(!W(t))throw gs("Show");return r.when})):n}return r.fallback},void 0,void 0)}let he;function ps(){he&&[...he].forEach(r=>r())}function ws(r){let e;const[t,s]=A(e,void 0);return he||(he=new Set),he.add(s),X(()=>he.delete(s)),S(()=>{let n;if(n=t()){const i=r.fallback;return typeof i=="function"&&i.length?W(()=>i(n,()=>s())):i}return is(()=>r.children,s)},void 0,void 0)}const bs=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],vs=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...bs]),ys=new Set(["innerHTML","textContent","innerText","children"]),Ss=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),ks=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function Ms(r,e){const t=ks[r];return typeof t=="object"?t[e]?t.$:void 0:t}const _s=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]);function Ps(r,e,t){let s=t.length,n=e.length,i=s,a=0,o=0,d=e[n-1].nextSibling,c=null;for(;a<n||o<i;){if(e[a]===t[o]){a++,o++;continue}for(;e[n-1]===t[i-1];)n--,i--;if(n===a){const l=i<s?o?t[o-1].nextSibling:t[i-o]:d;for(;o<i;)r.insertBefore(t[o++],l)}else if(i===o)for(;a<n;)(!c||!c.has(e[a]))&&e[a].remove(),a++;else if(e[a]===t[i-1]&&t[o]===e[n-1]){const l=e[--n].nextSibling;r.insertBefore(t[o++],e[a++].nextSibling),r.insertBefore(t[--i],l),e[n]=t[i]}else{if(!c){c=new Map;let u=o;for(;u<i;)c.set(t[u],u++)}const l=c.get(e[a]);if(l!=null)if(o<l&&l<i){let u=a,f=1,m;for(;++u<n&&u<i&&!((m=c.get(e[u]))==null||m!==l+f);)f++;if(f>l-o){const g=e[a];for(;o<l;)r.insertBefore(t[o++],g)}else r.replaceChild(t[o++],e[a++])}else a++;else e[a++].remove()}}}const Wt="_$DX_DELEGATE";function xs(r,e,t,s={}){let n;return Ft(i=>{n=i,e===document?r():w(e,r(),e.firstChild?null:void 0,t)},s.owner),()=>{n(),e.textContent=""}}function k(r,e,t){let s;const n=()=>{const a=document.createElement("template");return a.innerHTML=r,a.content.firstChild},i=()=>(s||(s=n())).cloneNode(!0);return i.cloneNode=i,i}function nt(r,e=window.document){const t=e[Wt]||(e[Wt]=new Set);for(let s=0,n=r.length;s<n;s++){const i=r[s];t.has(i)||(t.add(i),e.addEventListener(i,Os))}}function O(r,e,t){t==null?r.removeAttribute(e):r.setAttribute(e,t)}function Cs(r,e,t){t?r.setAttribute(e,""):r.removeAttribute(e)}function it(r,e){e==null?r.removeAttribute("class"):r.className=e}function _r(r,e,t,s){if(s)Array.isArray(t)?(r[`$$${e}`]=t[0],r[`$$${e}Data`]=t[1]):r[`$$${e}`]=t;else if(Array.isArray(t)){const n=t[0];r.addEventListener(e,t[0]=i=>n.call(r,t[1],i))}else r.addEventListener(e,t,typeof t!="function"&&t)}function As(r,e,t={}){const s=Object.keys(e||{}),n=Object.keys(t);let i,a;for(i=0,a=n.length;i<a;i++){const o=n[i];!o||o==="undefined"||e[o]||(Gt(r,o,!1),delete t[o])}for(i=0,a=s.length;i<a;i++){const o=s[i],d=!!e[o];!o||o==="undefined"||t[o]===d||!d||(Gt(r,o,!0),t[o]=d)}return t}function $s(r,e,t){if(!e)return t?O(r,"style"):e;const s=r.style;if(typeof e=="string")return s.cssText=e;typeof t=="string"&&(s.cssText=t=void 0),t||(t={}),e||(e={});let n,i;for(i in t)e[i]==null&&s.removeProperty(i),delete t[i];for(i in e)n=e[i],n!==t[i]&&(s.setProperty(i,n),t[i]=n);return t}function Es(r,e={},t,s){const n={};return j(()=>typeof e.ref=="function"&&Pr(e.ref,r)),j(()=>Fs(r,e,t,!0,n,!0)),n}function Pr(r,e,t){return W(()=>r(e,t))}function w(r,e,t,s){if(t!==void 0&&!s&&(s=[]),typeof e!="function")return Ze(r,e,s,t);j(n=>Ze(r,e(),n,t),s)}function Fs(r,e,t,s,n={},i=!1){e||(e={});for(const a in n)if(!(a in e)){if(a==="children")continue;n[a]=Ht(r,a,null,n[a],t,i,e)}for(const a in e){if(a==="children")continue;const o=e[a];n[a]=Ht(r,a,o,n[a],t,i,e)}}function Rs(r){return r.toLowerCase().replace(/-([a-z])/g,(e,t)=>t.toUpperCase())}function Gt(r,e,t){const s=e.trim().split(/\s+/);for(let n=0,i=s.length;n<i;n++)r.classList.toggle(s[n],t)}function Ht(r,e,t,s,n,i,a){let o,d,c,l,u;if(e==="style")return $s(r,t,s);if(e==="classList")return As(r,t,s);if(t===s)return s;if(e==="ref")i||t(r);else if(e.slice(0,3)==="on:"){const f=e.slice(3);s&&r.removeEventListener(f,s,typeof s!="function"&&s),t&&r.addEventListener(f,t,typeof t!="function"&&t)}else if(e.slice(0,10)==="oncapture:"){const f=e.slice(10);s&&r.removeEventListener(f,s,!0),t&&r.addEventListener(f,t,!0)}else if(e.slice(0,2)==="on"){const f=e.slice(2).toLowerCase(),m=_s.has(f);if(!m&&s){const g=Array.isArray(s)?s[0]:s;r.removeEventListener(f,g)}(m||t)&&(_r(r,f,t,m),m&&nt([f]))}else e.slice(0,5)==="attr:"?O(r,e.slice(5),t):e.slice(0,5)==="bool:"?Cs(r,e.slice(5),t):(u=e.slice(0,5)==="prop:")||(c=ys.has(e))||(l=Ms(e,r.tagName))||(d=vs.has(e))||(o=r.nodeName.includes("-")||"is"in a)?(u&&(e=e.slice(5),d=!0),e==="class"||e==="className"?it(r,t):o&&!d&&!c?r[Rs(e)]=t:r[l||e]=t):O(r,Ss[e]||e,t);return t}function Os(r){let e=r.target;const t=`$$${r.type}`,s=r.target,n=r.currentTarget,i=d=>Object.defineProperty(r,"target",{configurable:!0,value:d}),a=()=>{const d=e[t];if(d&&!e.disabled){const c=e[`${t}Data`];if(c!==void 0?d.call(e,c,r):d.call(e,r),r.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(r.target)&&i(e.host),!0},o=()=>{for(;a()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(r,"currentTarget",{configurable:!0,get(){return e||document}}),r.composedPath){const d=r.composedPath();i(d[0]);for(let c=0;c<d.length-2&&(e=d[c],!!a());c++){if(e._$host){e=e._$host,o();break}if(e.parentNode===n)break}}else o();i(s)}function Ze(r,e,t,s,n){for(;typeof t=="function";)t=t();if(e===t)return t;const i=typeof e,a=s!==void 0;if(r=a&&t[0]&&t[0].parentNode||r,i==="string"||i==="number"){if(i==="number"&&(e=e.toString(),e===t))return t;if(a){let o=t[0];o&&o.nodeType===3?o.data!==e&&(o.data=e):o=document.createTextNode(e),t=fe(r,t,s,o)}else t!==""&&typeof t=="string"?t=r.firstChild.data=e:t=r.textContent=e}else if(e==null||i==="boolean")t=fe(r,t,s);else{if(i==="function")return j(()=>{let o=e();for(;typeof o=="function";)o=o();t=Ze(r,o,t,s)}),()=>t;if(Array.isArray(e)){const o=[],d=t&&Array.isArray(t);if(Mt(o,e,t,n))return j(()=>t=Ze(r,o,t,s,!0)),()=>t;if(o.length===0){if(t=fe(r,t,s),a)return t}else d?t.length===0?Kt(r,o,s):Ps(r,t,o):(t&&fe(r),Kt(r,o));t=o}else if(e.nodeType){if(Array.isArray(t)){if(a)return t=fe(r,t,s,e);fe(r,t,null,e)}else t==null||t===""||!r.firstChild?r.appendChild(e):r.replaceChild(e,r.firstChild);t=e}}return t}function Mt(r,e,t,s){let n=!1;for(let i=0,a=e.length;i<a;i++){let o=e[i],d=t&&t[r.length],c;if(!(o==null||o===!0||o===!1))if((c=typeof o)=="object"&&o.nodeType)r.push(o);else if(Array.isArray(o))n=Mt(r,o,d)||n;else if(c==="function")if(s){for(;typeof o=="function";)o=o();n=Mt(r,Array.isArray(o)?o:[o],Array.isArray(d)?d:[d])||n}else r.push(o),n=!0;else{const l=String(o);d&&d.nodeType===3&&d.data===l?r.push(d):r.push(document.createTextNode(l))}}return n}function Kt(r,e,t=null){for(let s=0,n=e.length;s<n;s++)r.insertBefore(e[s],t)}function fe(r,e,t,s){if(t===void 0)return r.textContent="";const n=s||document.createTextNode("");if(e.length){let i=!1;for(let a=e.length-1;a>=0;a--){const o=e[a];if(n!==o){const d=o.parentNode===r;!i&&!a?d?r.replaceChild(n,o):r.insertBefore(n,t):d&&o.remove()}else i=!0}}else r.insertBefore(n,t);return[n]}const Ts=()=>{},xr=!1,Bs="http://www.w3.org/2000/svg";function Ls(r,e=!1){return e?document.createElementNS(Bs,r):document.createElement(r)}function qs(r){const{useShadow:e}=r,t=document.createTextNode(""),s=()=>r.mount||document.body,n=Ot();let i;return ee(()=>{i||(i=Tt(n,()=>S(()=>r.children)));const a=s();if(a instanceof HTMLHeadElement){const[o,d]=A(!1),c=()=>d(!0);Ft(l=>w(a,()=>o()?l():i(),null)),X(c)}else{const o=Ls(r.isSVG?"g":"div",r.isSVG),d=e&&o.attachShadow?o.attachShadow({mode:"open"}):o;Object.defineProperty(o,"_$host",{get(){return t.parentNode},configurable:!0}),w(d,i),a.appendChild(o),r.ref&&r.ref(o),X(()=>a.removeChild(o))}},void 0,{render:!0}),t}function Cr(){let r=new Set;function e(n){return r.add(n),()=>r.delete(n)}let t=!1;function s(n,i){if(t)return!(t=!1);const a={to:n,options:i,defaultPrevented:!1,preventDefault:()=>a.defaultPrevented=!0};for(const o of r)o.listener({...a,from:o.location,retry:d=>{d&&(t=!0),o.navigate(n,{...i,resolve:!1})}});return!a.defaultPrevented}return{subscribe:e,confirm:s}}let _t;function Bt(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),_t=window.history.state._depth}Bt();function Ns(r){return{...r,_depth:window.history.state&&window.history.state._depth}}function Is(r,e){let t=!1;return()=>{const s=_t;Bt();const n=s==null?null:_t-s;if(t){t=!1;return}n&&e(n)?(t=!0,window.history.go(-n)):r()}}const Ds=/^(?:[a-z0-9]+:)?\/\//i,js=/^\/+|(\/)\/+$/g,Ar="http://sr";function xe(r,e=!1){const t=r.replace(js,"$1");return t?e||/^[?#]/.test(t)?t:"/"+t:""}function Ge(r,e,t){if(Ds.test(e))return;const s=xe(r),n=t&&xe(t);let i="";return!n||e.startsWith("/")?i=s:n.toLowerCase().indexOf(s.toLowerCase())!==0?i=s+n:i=n,(i||"/")+xe(e,!i)}function Vs(r,e){if(r==null)throw new Error(e);return r}function zs(r,e){return xe(r).replace(/\/*(\*.*)?$/g,"")+xe(e)}function $r(r){const e={};return r.searchParams.forEach((t,s)=>{s in e?Array.isArray(e[s])?e[s].push(t):e[s]=[e[s],t]:e[s]=t}),e}function Us(r,e,t){const[s,n]=r.split("/*",2),i=s.split("/").filter(Boolean),a=i.length;return o=>{const d=o.split("/").filter(Boolean),c=d.length-a;if(c<0||c>0&&n===void 0&&!e)return null;const l={path:a?"":"/",params:{}},u=f=>t===void 0?void 0:t[f];for(let f=0;f<a;f++){const m=i[f],g=m[0]===":",h=g?d[f]:d[f].toLowerCase(),b=g?m.slice(1):m.toLowerCase();if(g&&mt(h,u(b)))l.params[b]=h;else if(g||!mt(h,b))return null;l.path+=`/${h}`}if(n){const f=c?d.slice(-c).join("/"):"";if(mt(f,u(n)))l.params[n]=f;else return null}return l}}function mt(r,e){const t=s=>s===r;return e===void 0?!0:typeof e=="string"?t(e):typeof e=="function"?e(r):Array.isArray(e)?e.some(t):e instanceof RegExp?e.test(r):!1}function Ws(r){const[e,t]=r.pattern.split("/*",2),s=e.split("/").filter(Boolean);return s.reduce((n,i)=>n+(i.startsWith(":")?2:3),s.length-(t===void 0?0:1))}function Er(r){const e=new Map,t=Ot();return new Proxy({},{get(s,n){return e.has(n)||Tt(t,()=>e.set(n,S(()=>r()[n]))),e.get(n)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(r())}})}function Fr(r){let e=/(\/?\:[^\/]+)\?/.exec(r);if(!e)return[r];let t=r.slice(0,e.index),s=r.slice(e.index+e[0].length);const n=[t,t+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(s);)n.push(t+=e[1]),s=s.slice(e[0].length);return Fr(s).reduce((i,a)=>[...i,...n.map(o=>o+a)],[])}const Gs=100,Rr=ve(),Or=ve(),Lt=()=>Vs(ye(Rr),"<A> and 'use' router primitives can be only used inside a Route."),Hs=r=>{const e=Lt();return S(()=>{const t=r();return t!==void 0?e.renderPath(t):t})},Tr=()=>Lt().navigatorFactory(),Ks=()=>Lt().params;function Qs(r,e=""){const{component:t,preload:s,load:n,children:i,info:a}=r,o=!i||Array.isArray(i)&&!i.length,d={key:r,component:t,preload:s||n,info:a};return Br(r.path).reduce((c,l)=>{for(const u of Fr(l)){const f=zs(e,u);let m=o?f:f.split("/*",1)[0];m=m.split("/").map(g=>g.startsWith(":")||g.startsWith("*")?g:encodeURIComponent(g)).join("/"),c.push({...d,originalPath:l,pattern:m,matcher:Us(m,!o,r.matchFilters)})}return c},[])}function Js(r,e=0){return{routes:r,score:Ws(r[r.length-1])*1e4-e,matcher(t){const s=[];for(let n=r.length-1;n>=0;n--){const i=r[n],a=i.matcher(t);if(!a)return null;s.unshift({...a,route:i})}return s}}}function Br(r){return Array.isArray(r)?r:[r]}function Lr(r,e="",t=[],s=[]){const n=Br(r);for(let i=0,a=n.length;i<a;i++){const o=n[i];if(o&&typeof o=="object"){o.hasOwnProperty("path")||(o.path="");const d=Qs(o,e);for(const c of d){t.push(c);const l=Array.isArray(o.children)&&o.children.length===0;if(o.children&&!l)Lr(o.children,c.pattern,t,s);else{const u=Js([...t],s.length);s.push(u)}t.pop()}}}return t.length?s:s.sort((i,a)=>a.score-i.score)}function gt(r,e){for(let t=0,s=r.length;t<s;t++){const n=r[t].matcher(e);if(n)return n}return[]}function Xs(r,e,t){const s=new URL(Ar),n=S(l=>{const u=r();try{return new URL(u,s)}catch{return console.error(`Invalid path ${u}`),l}},s,{equals:(l,u)=>l.href===u.href}),i=S(()=>n().pathname),a=S(()=>n().search,!0),o=S(()=>n().hash),d=()=>"",c=Rt(a,()=>$r(n()));return{get pathname(){return i()},get search(){return a()},get hash(){return o()},get state(){return e()},get key(){return d()},query:t?t(c):Er(c)}}let ae;function Ys(){return ae}function Zs(r,e,t,s={}){const{signal:[n,i],utils:a={}}=r,o=a.parsePath||(P=>P),d=a.renderPath||(P=>P),c=a.beforeLeave||Cr(),l=Ge("",s.base||"");if(l===void 0)throw new Error(`${l} is not a valid base path`);l&&!n().value&&i({value:l,replace:!0,scroll:!1});const[u,f]=A(!1);let m;const g=(P,$)=>{$.value===h()&&$.state===y()||(m===void 0&&f(!0),ae=P,m=$,os(()=>{m===$&&(b(m.value),M(m.state),ps(),U[1](V=>V.filter(ue=>ue.pending)))}).finally(()=>{m===$&&ns(()=>{ae=void 0,P==="navigate"&&le(m),f(!1),m=void 0})}))},[h,b]=A(n().value),[y,M]=A(n().state),T=Xs(h,y,a.queryWrapper),I=[],U=A([]),R=S(()=>typeof s.transformUrl=="function"?gt(e(),s.transformUrl(T.pathname)):gt(e(),T.pathname)),Se=()=>{const P=R(),$={};for(let V=0;V<P.length;V++)Object.assign($,P[V].params);return $},qe=a.paramsWrapper?a.paramsWrapper(Se,e):Er(Se),Ne={pattern:l,path:()=>l,outlet:()=>null,resolvePath(P){return Ge(l,P)}};return j(Rt(n,P=>g("native",P),{defer:!0})),{base:Ne,location:T,params:qe,isRouting:u,renderPath:d,parsePath:o,navigatorFactory:H,matches:R,beforeLeave:c,preloadRoute:es,singleFlight:s.singleFlight===void 0?!0:s.singleFlight,submissions:U};function Ie(P,$,V){W(()=>{if(typeof $=="number"){$&&(a.go?a.go($):console.warn("Router integration does not support relative routing"));return}const ue=!$||$[0]==="?",{replace:ut,resolve:de,scroll:dt,state:ke}={replace:!1,resolve:!ue,scroll:!0,...V},De=de?P.resolvePath($):Ge(ue&&T.pathname||"",$);if(De===void 0)throw new Error(`Path '${$}' is not a routable path`);if(I.length>=Gs)throw new Error("Too many redirects");const zt=h();(De!==zt||ke!==y())&&(xr||c.confirm(De,V)&&(I.push({value:zt,replace:ut,scroll:dt,state:y()}),g("navigate",{value:De,state:ke})))})}function H(P){return P=P||ye(Or)||Ne,($,V)=>Ie(P,$,V)}function le(P){const $=I[0];$&&(i({...P,replace:$.replace,scroll:$.scroll}),I.length=0)}function es(P,$){const V=gt(e(),P.pathname),ue=ae;ae="preload";for(let ut in V){const{route:de,params:dt}=V[ut];de.component&&de.component.preload&&de.component.preload();const{preload:ke}=de;$&&ke&&Tt(t(),()=>ke({params:dt,location:{pathname:P.pathname,search:P.search,hash:P.hash,query:$r(P),state:null,key:""},intent:"preload"}))}ae=ue}}function en(r,e,t,s){const{base:n,location:i,params:a}=r,{pattern:o,component:d,preload:c}=s().route,l=S(()=>s().path);d&&d.preload&&d.preload();const u=c?c({params:a,location:i,intent:ae||"initial"}):void 0;return{parent:e,pattern:o,path:l,outlet:()=>d?v(d,{params:a,location:i,data:u,get children(){return t()}}):t(),resolvePath(m){return Ge(n.path(),m,l())}}}const qr=r=>e=>{const{base:t}=e,s=G(()=>e.children),n=S(()=>Lr(s(),e.base||""));let i;const a=Zs(r,n,()=>i,{base:t,singleFlight:e.singleFlight,transformUrl:e.transformUrl});return r.create&&r.create(a),v(Rr.Provider,{value:a,get children(){return v(tn,{routerState:a,get root(){return e.root},get preload(){return e.rootPreload||e.rootLoad},get children(){return[S(()=>(i=Ot())&&null),v(rn,{routerState:a,get branches(){return n()}})]}})}})};function tn(r){const e=r.routerState.location,t=r.routerState.params,s=S(()=>r.preload&&W(()=>{r.preload({params:t,location:e,intent:Ys()||"initial"})}));return v(ce,{get when(){return r.root},keyed:!0,get fallback(){return r.children},children:n=>v(n,{params:t,location:e,get data(){return s()},get children(){return r.children}})})}function rn(r){const e=[];let t;const s=S(Rt(r.routerState.matches,(n,i,a)=>{let o=i&&n.length===i.length;const d=[];for(let c=0,l=n.length;c<l;c++){const u=i&&i[c],f=n[c];a&&u&&f.route.key===u.route.key?d[c]=a[c]:(o=!1,e[c]&&e[c](),Ft(m=>{e[c]=m,d[c]=en(r.routerState,d[c-1]||r.routerState.base,Qt(()=>s()[c+1]),()=>r.routerState.matches()[c])}))}return e.splice(n.length).forEach(c=>c()),a&&o?a:(t=d[0],d)}));return Qt(()=>s()&&t)()}const Qt=r=>()=>v(ce,{get when(){return r()},keyed:!0,children:e=>v(Or.Provider,{value:e,get children(){return e.outlet()}})}),Ve=r=>{const e=G(()=>r.children);return ms(r,{get children(){return e()}})};function sn([r,e],t,s){return[r,n=>e(s(n))]}function nn(r){let e=!1;const t=n=>typeof n=="string"?{value:n}:n,s=sn(A(t(r.get()),{equals:(n,i)=>n.value===i.value&&n.state===i.state}),void 0,n=>(!e&&r.set(n),n));return r.init&&X(r.init((n=r.get())=>{e=!0,s[1](t(n)),e=!1})),qr({signal:s,create:r.create,utils:r.utils})}function on(r,e,t){return r.addEventListener(e,t),()=>r.removeEventListener(e,t)}function an(r,e){const t=r&&document.getElementById(r);t?t.scrollIntoView():e&&window.scrollTo(0,0)}function cn(r){const e=new URL(r);return e.pathname+e.search}function ln(r){let e;const t={value:r.url||(e=Ts())&&cn(e.request.url)||""};return qr({signal:[()=>t,s=>Object.assign(t,s)]})(r)}const un=new Map;function dn(r=!0,e=!1,t="/_server",s){return n=>{const i=n.base.path(),a=n.navigatorFactory(n.base);let o,d;function c(h){return h.namespaceURI==="http://www.w3.org/2000/svg"}function l(h){if(h.defaultPrevented||h.button!==0||h.metaKey||h.altKey||h.ctrlKey||h.shiftKey)return;const b=h.composedPath().find(R=>R instanceof Node&&R.nodeName.toUpperCase()==="A");if(!b||e&&!b.hasAttribute("link"))return;const y=c(b),M=y?b.href.baseVal:b.href;if((y?b.target.baseVal:b.target)||!M&&!b.hasAttribute("state"))return;const I=(b.getAttribute("rel")||"").split(/\s+/);if(b.hasAttribute("download")||I&&I.includes("external"))return;const U=y?new URL(M,document.baseURI):new URL(M);if(!(U.origin!==window.location.origin||i&&U.pathname&&!U.pathname.toLowerCase().startsWith(i.toLowerCase())))return[b,U]}function u(h){const b=l(h);if(!b)return;const[y,M]=b,T=n.parsePath(M.pathname+M.search+M.hash),I=y.getAttribute("state");h.preventDefault(),a(T,{resolve:!1,replace:y.hasAttribute("replace"),scroll:!y.hasAttribute("noscroll"),state:I?JSON.parse(I):void 0})}function f(h){const b=l(h);if(!b)return;const[y,M]=b;s&&(M.pathname=s(M.pathname)),n.preloadRoute(M,y.getAttribute("preload")!=="false")}function m(h){clearTimeout(o);const b=l(h);if(!b)return d=null;const[y,M]=b;d!==y&&(s&&(M.pathname=s(M.pathname)),o=setTimeout(()=>{n.preloadRoute(M,y.getAttribute("preload")!=="false"),d=y},20))}function g(h){if(h.defaultPrevented)return;let b=h.submitter&&h.submitter.hasAttribute("formaction")?h.submitter.getAttribute("formaction"):h.target.getAttribute("action");if(!b)return;if(!b.startsWith("https://action/")){const M=new URL(b,Ar);if(b=n.parsePath(M.pathname+M.search),!b.startsWith(t))return}if(h.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const y=un.get(b);if(y){h.preventDefault();const M=new FormData(h.target,h.submitter);y.call({r:n,f:h.target},h.target.enctype==="multipart/form-data"?M:new URLSearchParams(M))}}nt(["click","submit"]),document.addEventListener("click",u),r&&(document.addEventListener("mousemove",m,{passive:!0}),document.addEventListener("focusin",f,{passive:!0}),document.addEventListener("touchstart",f,{passive:!0})),document.addEventListener("submit",g),X(()=>{document.removeEventListener("click",u),r&&(document.removeEventListener("mousemove",m),document.removeEventListener("focusin",f),document.removeEventListener("touchstart",f)),document.removeEventListener("submit",g)})}}function fn(r){if(xr)return ln(r);const e=()=>{const s=window.location.pathname.replace(/^\/+/,"/")+window.location.search,n=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:s+window.location.hash,state:n}},t=Cr();return nn({get:e,set({value:s,replace:n,scroll:i,state:a}){n?window.history.replaceState(Ns(a),"",s):window.history.pushState(a,"",s),an(decodeURIComponent(window.location.hash.slice(1)),i),Bt()},init:s=>on(window,"popstate",Is(s,n=>{if(n&&n<0)return!t.confirm(n);{const i=e();return!t.confirm(i.value,{state:i.state})}})),create:dn(r.preload,r.explicitLinks,r.actionBase,r.transformUrl),utils:{go:s=>window.history.go(s),beforeLeave:t}})(r)}var pt={},ze={},He={exports:{}},hn=He.exports,Jt;function mn(){return Jt||(Jt=1,function(r,e){(function(t,s){r.exports=s()})(hn,function(){return function(t){var s={};function n(i){if(s[i])return s[i].exports;var a=s[i]={i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=s,n.d=function(i,a,o){n.o(i,a)||Object.defineProperty(i,a,{enumerable:!0,get:o})},n.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},n.t=function(i,a){if(1&a&&(i=n(i)),8&a||4&a&&typeof i=="object"&&i&&i.__esModule)return i;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:i}),2&a&&typeof i!="string")for(var d in i)n.d(o,d,function(c){return i[c]}.bind(null,d));return o},n.n=function(i){var a=i&&i.__esModule?function(){return i.default}:function(){return i};return n.d(a,"a",a),a},n.o=function(i,a){return Object.prototype.hasOwnProperty.call(i,a)},n.p="",n(n.s=90)}({17:function(t,s,n){s.__esModule=!0,s.default=void 0;var i=n(18),a=function(){function o(){}return o.getFirstMatch=function(d,c){var l=c.match(d);return l&&l.length>0&&l[1]||""},o.getSecondMatch=function(d,c){var l=c.match(d);return l&&l.length>1&&l[2]||""},o.matchAndReturnConst=function(d,c,l){if(d.test(c))return l},o.getWindowsVersionName=function(d){switch(d){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},o.getMacOSVersionName=function(d){var c=d.split(".").splice(0,2).map(function(l){return parseInt(l,10)||0});if(c.push(0),c[0]===10)switch(c[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},o.getAndroidVersionName=function(d){var c=d.split(".").splice(0,2).map(function(l){return parseInt(l,10)||0});if(c.push(0),!(c[0]===1&&c[1]<5))return c[0]===1&&c[1]<6?"Cupcake":c[0]===1&&c[1]>=6?"Donut":c[0]===2&&c[1]<2?"Eclair":c[0]===2&&c[1]===2?"Froyo":c[0]===2&&c[1]>2?"Gingerbread":c[0]===3?"Honeycomb":c[0]===4&&c[1]<1?"Ice Cream Sandwich":c[0]===4&&c[1]<4?"Jelly Bean":c[0]===4&&c[1]>=4?"KitKat":c[0]===5?"Lollipop":c[0]===6?"Marshmallow":c[0]===7?"Nougat":c[0]===8?"Oreo":c[0]===9?"Pie":void 0},o.getVersionPrecision=function(d){return d.split(".").length},o.compareVersions=function(d,c,l){l===void 0&&(l=!1);var u=o.getVersionPrecision(d),f=o.getVersionPrecision(c),m=Math.max(u,f),g=0,h=o.map([d,c],function(b){var y=m-o.getVersionPrecision(b),M=b+new Array(y+1).join(".0");return o.map(M.split("."),function(T){return new Array(20-T.length).join("0")+T}).reverse()});for(l&&(g=m-Math.min(u,f)),m-=1;m>=g;){if(h[0][m]>h[1][m])return 1;if(h[0][m]===h[1][m]){if(m===g)return 0;m-=1}else if(h[0][m]<h[1][m])return-1}},o.map=function(d,c){var l,u=[];if(Array.prototype.map)return Array.prototype.map.call(d,c);for(l=0;l<d.length;l+=1)u.push(c(d[l]));return u},o.find=function(d,c){var l,u;if(Array.prototype.find)return Array.prototype.find.call(d,c);for(l=0,u=d.length;l<u;l+=1){var f=d[l];if(c(f,l))return f}},o.assign=function(d){for(var c,l,u=d,f=arguments.length,m=new Array(f>1?f-1:0),g=1;g<f;g++)m[g-1]=arguments[g];if(Object.assign)return Object.assign.apply(Object,[d].concat(m));var h=function(){var b=m[c];typeof b=="object"&&b!==null&&Object.keys(b).forEach(function(y){u[y]=b[y]})};for(c=0,l=m.length;c<l;c+=1)h();return d},o.getBrowserAlias=function(d){return i.BROWSER_ALIASES_MAP[d]},o.getBrowserTypeByAlias=function(d){return i.BROWSER_MAP[d]||""},o}();s.default=a,t.exports=s.default},18:function(t,s,n){s.__esModule=!0,s.ENGINE_MAP=s.OS_MAP=s.PLATFORMS_MAP=s.BROWSER_MAP=s.BROWSER_ALIASES_MAP=void 0,s.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},s.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},s.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},s.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},s.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(t,s,n){s.__esModule=!0,s.default=void 0;var i,a=(i=n(91))&&i.__esModule?i:{default:i},o=n(18);function d(l,u){for(var f=0;f<u.length;f++){var m=u[f];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(l,m.key,m)}}var c=function(){function l(){}var u,f,m;return l.getParser=function(g,h){if(h===void 0&&(h=!1),typeof g!="string")throw new Error("UserAgent should be a string");return new a.default(g,h)},l.parse=function(g){return new a.default(g).getResult()},u=l,m=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}],(f=null)&&d(u.prototype,f),m&&d(u,m),l}();s.default=c,t.exports=s.default},91:function(t,s,n){s.__esModule=!0,s.default=void 0;var i=l(n(92)),a=l(n(93)),o=l(n(94)),d=l(n(95)),c=l(n(17));function l(f){return f&&f.__esModule?f:{default:f}}var u=function(){function f(g,h){if(h===void 0&&(h=!1),g==null||g==="")throw new Error("UserAgent parameter can't be empty");this._ua=g,this.parsedResult={},h!==!0&&this.parse()}var m=f.prototype;return m.getUA=function(){return this._ua},m.test=function(g){return g.test(this._ua)},m.parseBrowser=function(){var g=this;this.parsedResult.browser={};var h=c.default.find(i.default,function(b){if(typeof b.test=="function")return b.test(g);if(b.test instanceof Array)return b.test.some(function(y){return g.test(y)});throw new Error("Browser's test function is not valid")});return h&&(this.parsedResult.browser=h.describe(this.getUA())),this.parsedResult.browser},m.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},m.getBrowserName=function(g){return g?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},m.getBrowserVersion=function(){return this.getBrowser().version},m.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},m.parseOS=function(){var g=this;this.parsedResult.os={};var h=c.default.find(a.default,function(b){if(typeof b.test=="function")return b.test(g);if(b.test instanceof Array)return b.test.some(function(y){return g.test(y)});throw new Error("Browser's test function is not valid")});return h&&(this.parsedResult.os=h.describe(this.getUA())),this.parsedResult.os},m.getOSName=function(g){var h=this.getOS().name;return g?String(h).toLowerCase()||"":h||""},m.getOSVersion=function(){return this.getOS().version},m.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},m.getPlatformType=function(g){g===void 0&&(g=!1);var h=this.getPlatform().type;return g?String(h).toLowerCase()||"":h||""},m.parsePlatform=function(){var g=this;this.parsedResult.platform={};var h=c.default.find(o.default,function(b){if(typeof b.test=="function")return b.test(g);if(b.test instanceof Array)return b.test.some(function(y){return g.test(y)});throw new Error("Browser's test function is not valid")});return h&&(this.parsedResult.platform=h.describe(this.getUA())),this.parsedResult.platform},m.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},m.getEngineName=function(g){return g?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},m.parseEngine=function(){var g=this;this.parsedResult.engine={};var h=c.default.find(d.default,function(b){if(typeof b.test=="function")return b.test(g);if(b.test instanceof Array)return b.test.some(function(y){return g.test(y)});throw new Error("Browser's test function is not valid")});return h&&(this.parsedResult.engine=h.describe(this.getUA())),this.parsedResult.engine},m.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},m.getResult=function(){return c.default.assign({},this.parsedResult)},m.satisfies=function(g){var h=this,b={},y=0,M={},T=0;if(Object.keys(g).forEach(function(H){var le=g[H];typeof le=="string"?(M[H]=le,T+=1):typeof le=="object"&&(b[H]=le,y+=1)}),y>0){var I=Object.keys(b),U=c.default.find(I,function(H){return h.isOS(H)});if(U){var R=this.satisfies(b[U]);if(R!==void 0)return R}var Se=c.default.find(I,function(H){return h.isPlatform(H)});if(Se){var qe=this.satisfies(b[Se]);if(qe!==void 0)return qe}}if(T>0){var Ne=Object.keys(M),Ie=c.default.find(Ne,function(H){return h.isBrowser(H,!0)});if(Ie!==void 0)return this.compareVersion(M[Ie])}},m.isBrowser=function(g,h){h===void 0&&(h=!1);var b=this.getBrowserName().toLowerCase(),y=g.toLowerCase(),M=c.default.getBrowserTypeByAlias(y);return h&&M&&(y=M.toLowerCase()),y===b},m.compareVersion=function(g){var h=[0],b=g,y=!1,M=this.getBrowserVersion();if(typeof M=="string")return g[0]===">"||g[0]==="<"?(b=g.substr(1),g[1]==="="?(y=!0,b=g.substr(2)):h=[],g[0]===">"?h.push(1):h.push(-1)):g[0]==="="?b=g.substr(1):g[0]==="~"&&(y=!0,b=g.substr(1)),h.indexOf(c.default.compareVersions(M,b,y))>-1},m.isOS=function(g){return this.getOSName(!0)===String(g).toLowerCase()},m.isPlatform=function(g){return this.getPlatformType(!0)===String(g).toLowerCase()},m.isEngine=function(g){return this.getEngineName(!0)===String(g).toLowerCase()},m.is=function(g,h){return h===void 0&&(h=!1),this.isBrowser(g,h)||this.isOS(g)||this.isPlatform(g)},m.some=function(g){var h=this;return g===void 0&&(g=[]),g.some(function(b){return h.is(b)})},f}();s.default=u,t.exports=s.default},92:function(t,s,n){s.__esModule=!0,s.default=void 0;var i,a=(i=n(17))&&i.__esModule?i:{default:i},o=/version\/(\d+(\.?_?\d+)+)/i,d=[{test:[/googlebot/i],describe:function(c){var l={name:"Googlebot"},u=a.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,c)||a.default.getFirstMatch(o,c);return u&&(l.version=u),l}},{test:[/opera/i],describe:function(c){var l={name:"Opera"},u=a.default.getFirstMatch(o,c)||a.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:[/opr\/|opios/i],describe:function(c){var l={name:"Opera"},u=a.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,c)||a.default.getFirstMatch(o,c);return u&&(l.version=u),l}},{test:[/SamsungBrowser/i],describe:function(c){var l={name:"Samsung Internet for Android"},u=a.default.getFirstMatch(o,c)||a.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:[/Whale/i],describe:function(c){var l={name:"NAVER Whale Browser"},u=a.default.getFirstMatch(o,c)||a.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,c);return u&&(l.version=u),l}},{test:[/MZBrowser/i],describe:function(c){var l={name:"MZ Browser"},u=a.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,c)||a.default.getFirstMatch(o,c);return u&&(l.version=u),l}},{test:[/focus/i],describe:function(c){var l={name:"Focus"},u=a.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,c)||a.default.getFirstMatch(o,c);return u&&(l.version=u),l}},{test:[/swing/i],describe:function(c){var l={name:"Swing"},u=a.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,c)||a.default.getFirstMatch(o,c);return u&&(l.version=u),l}},{test:[/coast/i],describe:function(c){var l={name:"Opera Coast"},u=a.default.getFirstMatch(o,c)||a.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(c){var l={name:"Opera Touch"},u=a.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,c)||a.default.getFirstMatch(o,c);return u&&(l.version=u),l}},{test:[/yabrowser/i],describe:function(c){var l={name:"Yandex Browser"},u=a.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,c)||a.default.getFirstMatch(o,c);return u&&(l.version=u),l}},{test:[/ucbrowser/i],describe:function(c){var l={name:"UC Browser"},u=a.default.getFirstMatch(o,c)||a.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:[/Maxthon|mxios/i],describe:function(c){var l={name:"Maxthon"},u=a.default.getFirstMatch(o,c)||a.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:[/epiphany/i],describe:function(c){var l={name:"Epiphany"},u=a.default.getFirstMatch(o,c)||a.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:[/puffin/i],describe:function(c){var l={name:"Puffin"},u=a.default.getFirstMatch(o,c)||a.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:[/sleipnir/i],describe:function(c){var l={name:"Sleipnir"},u=a.default.getFirstMatch(o,c)||a.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:[/k-meleon/i],describe:function(c){var l={name:"K-Meleon"},u=a.default.getFirstMatch(o,c)||a.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:[/micromessenger/i],describe:function(c){var l={name:"WeChat"},u=a.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,c)||a.default.getFirstMatch(o,c);return u&&(l.version=u),l}},{test:[/qqbrowser/i],describe:function(c){var l={name:/qqbrowserlite/i.test(c)?"QQ Browser Lite":"QQ Browser"},u=a.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,c)||a.default.getFirstMatch(o,c);return u&&(l.version=u),l}},{test:[/msie|trident/i],describe:function(c){var l={name:"Internet Explorer"},u=a.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:[/\sedg\//i],describe:function(c){var l={name:"Microsoft Edge"},u=a.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:[/edg([ea]|ios)/i],describe:function(c){var l={name:"Microsoft Edge"},u=a.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:[/vivaldi/i],describe:function(c){var l={name:"Vivaldi"},u=a.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:[/seamonkey/i],describe:function(c){var l={name:"SeaMonkey"},u=a.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:[/sailfish/i],describe:function(c){var l={name:"Sailfish"},u=a.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,c);return u&&(l.version=u),l}},{test:[/silk/i],describe:function(c){var l={name:"Amazon Silk"},u=a.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:[/phantom/i],describe:function(c){var l={name:"PhantomJS"},u=a.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:[/slimerjs/i],describe:function(c){var l={name:"SlimerJS"},u=a.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(c){var l={name:"BlackBerry"},u=a.default.getFirstMatch(o,c)||a.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:[/(web|hpw)[o0]s/i],describe:function(c){var l={name:"WebOS Browser"},u=a.default.getFirstMatch(o,c)||a.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:[/bada/i],describe:function(c){var l={name:"Bada"},u=a.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:[/tizen/i],describe:function(c){var l={name:"Tizen"},u=a.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,c)||a.default.getFirstMatch(o,c);return u&&(l.version=u),l}},{test:[/qupzilla/i],describe:function(c){var l={name:"QupZilla"},u=a.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,c)||a.default.getFirstMatch(o,c);return u&&(l.version=u),l}},{test:[/firefox|iceweasel|fxios/i],describe:function(c){var l={name:"Firefox"},u=a.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:[/electron/i],describe:function(c){var l={name:"Electron"},u=a.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:[/MiuiBrowser/i],describe:function(c){var l={name:"Miui"},u=a.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:[/chromium/i],describe:function(c){var l={name:"Chromium"},u=a.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,c)||a.default.getFirstMatch(o,c);return u&&(l.version=u),l}},{test:[/chrome|crios|crmo/i],describe:function(c){var l={name:"Chrome"},u=a.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:[/GSA/i],describe:function(c){var l={name:"Google Search"},u=a.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:function(c){var l=!c.test(/like android/i),u=c.test(/android/i);return l&&u},describe:function(c){var l={name:"Android Browser"},u=a.default.getFirstMatch(o,c);return u&&(l.version=u),l}},{test:[/playstation 4/i],describe:function(c){var l={name:"PlayStation 4"},u=a.default.getFirstMatch(o,c);return u&&(l.version=u),l}},{test:[/safari|applewebkit/i],describe:function(c){var l={name:"Safari"},u=a.default.getFirstMatch(o,c);return u&&(l.version=u),l}},{test:[/.*/i],describe:function(c){var l=c.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:a.default.getFirstMatch(l,c),version:a.default.getSecondMatch(l,c)}}}];s.default=d,t.exports=s.default},93:function(t,s,n){s.__esModule=!0,s.default=void 0;var i,a=(i=n(17))&&i.__esModule?i:{default:i},o=n(18),d=[{test:[/Roku\/DVP/],describe:function(c){var l=a.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,c);return{name:o.OS_MAP.Roku,version:l}}},{test:[/windows phone/i],describe:function(c){var l=a.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,c);return{name:o.OS_MAP.WindowsPhone,version:l}}},{test:[/windows /i],describe:function(c){var l=a.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,c),u=a.default.getWindowsVersionName(l);return{name:o.OS_MAP.Windows,version:l,versionName:u}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(c){var l={name:o.OS_MAP.iOS},u=a.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,c);return u&&(l.version=u),l}},{test:[/macintosh/i],describe:function(c){var l=a.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,c).replace(/[_\s]/g,"."),u=a.default.getMacOSVersionName(l),f={name:o.OS_MAP.MacOS,version:l};return u&&(f.versionName=u),f}},{test:[/(ipod|iphone|ipad)/i],describe:function(c){var l=a.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,c).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:l}}},{test:function(c){var l=!c.test(/like android/i),u=c.test(/android/i);return l&&u},describe:function(c){var l=a.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,c),u=a.default.getAndroidVersionName(l),f={name:o.OS_MAP.Android,version:l};return u&&(f.versionName=u),f}},{test:[/(web|hpw)[o0]s/i],describe:function(c){var l=a.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,c),u={name:o.OS_MAP.WebOS};return l&&l.length&&(u.version=l),u}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(c){var l=a.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,c)||a.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,c)||a.default.getFirstMatch(/\bbb(\d+)/i,c);return{name:o.OS_MAP.BlackBerry,version:l}}},{test:[/bada/i],describe:function(c){var l=a.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,c);return{name:o.OS_MAP.Bada,version:l}}},{test:[/tizen/i],describe:function(c){var l=a.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,c);return{name:o.OS_MAP.Tizen,version:l}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(c){var l=a.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,c);return{name:o.OS_MAP.PlayStation4,version:l}}}];s.default=d,t.exports=s.default},94:function(t,s,n){s.__esModule=!0,s.default=void 0;var i,a=(i=n(17))&&i.__esModule?i:{default:i},o=n(18),d=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(c){var l=a.default.getFirstMatch(/(can-l01)/i,c)&&"Nova",u={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return l&&(u.model=l),u}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(c){var l=c.test(/ipod|iphone/i),u=c.test(/like (ipod|iphone)/i);return l&&!u},describe:function(c){var l=a.default.getFirstMatch(/(ipod|iphone)/i,c);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:l}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(c){return c.getBrowserName(!0)==="blackberry"},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(c){return c.getBrowserName(!0)==="bada"},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(c){return c.getBrowserName()==="windows phone"},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(c){var l=Number(String(c.getOSVersion()).split(".")[0]);return c.getOSName(!0)==="android"&&l>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(c){return c.getOSName(!0)==="android"},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(c){return c.getOSName(!0)==="macos"},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(c){return c.getOSName(!0)==="windows"},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(c){return c.getOSName(!0)==="linux"},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(c){return c.getOSName(!0)==="playstation 4"},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(c){return c.getOSName(!0)==="roku"},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];s.default=d,t.exports=s.default},95:function(t,s,n){s.__esModule=!0,s.default=void 0;var i,a=(i=n(17))&&i.__esModule?i:{default:i},o=n(18),d=[{test:function(c){return c.getBrowserName(!0)==="microsoft edge"},describe:function(c){if(/\sedg\//i.test(c))return{name:o.ENGINE_MAP.Blink};var l=a.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,c);return{name:o.ENGINE_MAP.EdgeHTML,version:l}}},{test:[/trident/i],describe:function(c){var l={name:o.ENGINE_MAP.Trident},u=a.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:function(c){return c.test(/presto/i)},describe:function(c){var l={name:o.ENGINE_MAP.Presto},u=a.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:function(c){var l=c.test(/gecko/i),u=c.test(/like gecko/i);return l&&!u},describe:function(c){var l={name:o.ENGINE_MAP.Gecko},u=a.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(c){var l={name:o.ENGINE_MAP.WebKit},u=a.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,c);return u&&(l.version=u),l}}];s.default=d,t.exports=s.default}})})}(He)),He.exports}var Xt;function gn(){return Xt||(Xt=1,function(r){var e=ze.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(r,"__esModule",{value:!0}),r.requestVideoPermissions=r.requestAudioPermissions=r.requestMediaPermissions=r.MediaPermissionsErrorType=void 0;const t=e(mn());var s;(function(o){o.SystemPermissionDenied="SystemPermissionDenied",o.UserPermissionDenied="UserPermissionDenied",o.CouldNotStartVideoSource="CouldNotStartVideoSource",o.Generic="Generic"})(s=r.MediaPermissionsErrorType||(r.MediaPermissionsErrorType={}));const n=o=>new Promise((d,c)=>{navigator.mediaDevices.getUserMedia(o??{audio:!0,video:!0}).then(l=>{l.getTracks().forEach(u=>{u.stop()}),d(!0)}).catch(l=>{const f=t.default.getParser(window.navigator.userAgent).getBrowserName(),m=l.name,g=l.message;let h=s.Generic;f==="Chrome"?m==="NotAllowedError"?g==="Permission denied by system"?h=s.SystemPermissionDenied:g==="Permission denied"&&(h=s.UserPermissionDenied):m==="NotReadableError"&&(h=s.CouldNotStartVideoSource):f==="Safari"?m==="NotAllowedError"&&(h=s.UserPermissionDenied):f==="Microsoft Edge"?m==="NotAllowedError"?h=s.UserPermissionDenied:m==="NotReadableError"&&(h=s.CouldNotStartVideoSource):f==="Firefox"&&(m==="NotFoundError"||m==="NotReadableError"?h=s.SystemPermissionDenied:m==="NotAllowedError"?h=s.UserPermissionDenied:m==="AbortError"&&(h=s.CouldNotStartVideoSource)),c({type:h,name:l.name,message:l.message})})});r.requestMediaPermissions=n;const i=()=>(0,r.requestMediaPermissions)({audio:!0,video:!1});r.requestAudioPermissions=i;const a=()=>(0,r.requestMediaPermissions)({audio:!1,video:!0});r.requestVideoPermissions=a}(ze)),ze}var Yt;function pn(){return Yt||(Yt=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.requestMediaPermissions=r.MediaPermissionsErrorType=void 0;var e=gn();Object.defineProperty(r,"MediaPermissionsErrorType",{enumerable:!0,get:function(){return e.MediaPermissionsErrorType}}),Object.defineProperty(r,"requestMediaPermissions",{enumerable:!0,get:function(){return e.requestMediaPermissions}})}(pt)),pt}var Me=pn();const wn={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},Nr={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},E={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},D={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},se={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class p{static getFirstMatch(e,t){const s=t.match(e);return s&&s.length>0&&s[1]||""}static getSecondMatch(e,t){const s=t.match(e);return s&&s.length>1&&s[2]||""}static matchAndReturnConst(e,t,s){if(e.test(t))return s}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const t=e.split(".").splice(0,2).map(s=>parseInt(s,10)||0);if(t.push(0),t[0]===10)switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const t=e.split(".").splice(0,2).map(s=>parseInt(s,10)||0);if(t.push(0),!(t[0]===1&&t[1]<5)){if(t[0]===1&&t[1]<6)return"Cupcake";if(t[0]===1&&t[1]>=6)return"Donut";if(t[0]===2&&t[1]<2)return"Eclair";if(t[0]===2&&t[1]===2)return"Froyo";if(t[0]===2&&t[1]>2)return"Gingerbread";if(t[0]===3)return"Honeycomb";if(t[0]===4&&t[1]<1)return"Ice Cream Sandwich";if(t[0]===4&&t[1]<4)return"Jelly Bean";if(t[0]===4&&t[1]>=4)return"KitKat";if(t[0]===5)return"Lollipop";if(t[0]===6)return"Marshmallow";if(t[0]===7)return"Nougat";if(t[0]===8)return"Oreo";if(t[0]===9)return"Pie"}}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,t,s=!1){const n=p.getVersionPrecision(e),i=p.getVersionPrecision(t);let a=Math.max(n,i),o=0;const d=p.map([e,t],c=>{const l=a-p.getVersionPrecision(c),u=c+new Array(l+1).join(".0");return p.map(u.split("."),f=>new Array(20-f.length).join("0")+f).reverse()});for(s&&(o=a-Math.min(n,i)),a-=1;a>=o;){if(d[0][a]>d[1][a])return 1;if(d[0][a]===d[1][a]){if(a===o)return 0;a-=1}else if(d[0][a]<d[1][a])return-1}}static map(e,t){const s=[];let n;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)s.push(t(e[n]));return s}static find(e,t){let s,n;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(s=0,n=e.length;s<n;s+=1){const i=e[s];if(t(i,s))return i}}static assign(e,...t){const s=e;let n,i;if(Object.assign)return Object.assign(e,...t);for(n=0,i=t.length;n<i;n+=1){const a=t[n];typeof a=="object"&&a!==null&&Object.keys(a).forEach(d=>{s[d]=a[d]})}return e}static getBrowserAlias(e){return wn[e]}static getBrowserTypeByAlias(e){return Nr[e]||""}}const x=/version\/(\d+(\.?_?\d+)+)/i,bn=[{test:[/googlebot/i],describe(r){const e={name:"Googlebot"},t=p.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,r)||p.getFirstMatch(x,r);return t&&(e.version=t),e}},{test:[/opera/i],describe(r){const e={name:"Opera"},t=p.getFirstMatch(x,r)||p.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/opr\/|opios/i],describe(r){const e={name:"Opera"},t=p.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,r)||p.getFirstMatch(x,r);return t&&(e.version=t),e}},{test:[/SamsungBrowser/i],describe(r){const e={name:"Samsung Internet for Android"},t=p.getFirstMatch(x,r)||p.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/Whale/i],describe(r){const e={name:"NAVER Whale Browser"},t=p.getFirstMatch(x,r)||p.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/MZBrowser/i],describe(r){const e={name:"MZ Browser"},t=p.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,r)||p.getFirstMatch(x,r);return t&&(e.version=t),e}},{test:[/focus/i],describe(r){const e={name:"Focus"},t=p.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,r)||p.getFirstMatch(x,r);return t&&(e.version=t),e}},{test:[/swing/i],describe(r){const e={name:"Swing"},t=p.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,r)||p.getFirstMatch(x,r);return t&&(e.version=t),e}},{test:[/coast/i],describe(r){const e={name:"Opera Coast"},t=p.getFirstMatch(x,r)||p.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(r){const e={name:"Opera Touch"},t=p.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,r)||p.getFirstMatch(x,r);return t&&(e.version=t),e}},{test:[/yabrowser/i],describe(r){const e={name:"Yandex Browser"},t=p.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,r)||p.getFirstMatch(x,r);return t&&(e.version=t),e}},{test:[/ucbrowser/i],describe(r){const e={name:"UC Browser"},t=p.getFirstMatch(x,r)||p.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/Maxthon|mxios/i],describe(r){const e={name:"Maxthon"},t=p.getFirstMatch(x,r)||p.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/epiphany/i],describe(r){const e={name:"Epiphany"},t=p.getFirstMatch(x,r)||p.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/puffin/i],describe(r){const e={name:"Puffin"},t=p.getFirstMatch(x,r)||p.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/sleipnir/i],describe(r){const e={name:"Sleipnir"},t=p.getFirstMatch(x,r)||p.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/k-meleon/i],describe(r){const e={name:"K-Meleon"},t=p.getFirstMatch(x,r)||p.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/micromessenger/i],describe(r){const e={name:"WeChat"},t=p.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,r)||p.getFirstMatch(x,r);return t&&(e.version=t),e}},{test:[/qqbrowser/i],describe(r){const e={name:/qqbrowserlite/i.test(r)?"QQ Browser Lite":"QQ Browser"},t=p.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,r)||p.getFirstMatch(x,r);return t&&(e.version=t),e}},{test:[/msie|trident/i],describe(r){const e={name:"Internet Explorer"},t=p.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/\sedg\//i],describe(r){const e={name:"Microsoft Edge"},t=p.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/edg([ea]|ios)/i],describe(r){const e={name:"Microsoft Edge"},t=p.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/vivaldi/i],describe(r){const e={name:"Vivaldi"},t=p.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/seamonkey/i],describe(r){const e={name:"SeaMonkey"},t=p.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/sailfish/i],describe(r){const e={name:"Sailfish"},t=p.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,r);return t&&(e.version=t),e}},{test:[/silk/i],describe(r){const e={name:"Amazon Silk"},t=p.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/phantom/i],describe(r){const e={name:"PhantomJS"},t=p.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/slimerjs/i],describe(r){const e={name:"SlimerJS"},t=p.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(r){const e={name:"BlackBerry"},t=p.getFirstMatch(x,r)||p.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/(web|hpw)[o0]s/i],describe(r){const e={name:"WebOS Browser"},t=p.getFirstMatch(x,r)||p.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/bada/i],describe(r){const e={name:"Bada"},t=p.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/tizen/i],describe(r){const e={name:"Tizen"},t=p.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,r)||p.getFirstMatch(x,r);return t&&(e.version=t),e}},{test:[/qupzilla/i],describe(r){const e={name:"QupZilla"},t=p.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,r)||p.getFirstMatch(x,r);return t&&(e.version=t),e}},{test:[/firefox|iceweasel|fxios/i],describe(r){const e={name:"Firefox"},t=p.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/electron/i],describe(r){const e={name:"Electron"},t=p.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/MiuiBrowser/i],describe(r){const e={name:"Miui"},t=p.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/chromium/i],describe(r){const e={name:"Chromium"},t=p.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,r)||p.getFirstMatch(x,r);return t&&(e.version=t),e}},{test:[/chrome|crios|crmo/i],describe(r){const e={name:"Chrome"},t=p.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/GSA/i],describe(r){const e={name:"Google Search"},t=p.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test(r){const e=!r.test(/like android/i),t=r.test(/android/i);return e&&t},describe(r){const e={name:"Android Browser"},t=p.getFirstMatch(x,r);return t&&(e.version=t),e}},{test:[/playstation 4/i],describe(r){const e={name:"PlayStation 4"},t=p.getFirstMatch(x,r);return t&&(e.version=t),e}},{test:[/safari|applewebkit/i],describe(r){const e={name:"Safari"},t=p.getFirstMatch(x,r);return t&&(e.version=t),e}},{test:[/.*/i],describe(r){const e=/^(.*)\/(.*) /,t=/^(.*)\/(.*)[ \t]\((.*)/,n=r.search("\\(")!==-1?t:e;return{name:p.getFirstMatch(n,r),version:p.getSecondMatch(n,r)}}}],vn=[{test:[/Roku\/DVP/],describe(r){const e=p.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,r);return{name:D.Roku,version:e}}},{test:[/windows phone/i],describe(r){const e=p.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,r);return{name:D.WindowsPhone,version:e}}},{test:[/windows /i],describe(r){const e=p.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,r),t=p.getWindowsVersionName(e);return{name:D.Windows,version:e,versionName:t}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(r){const e={name:D.iOS},t=p.getSecondMatch(/(Version\/)(\d[\d.]+)/,r);return t&&(e.version=t),e}},{test:[/macintosh/i],describe(r){const e=p.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,r).replace(/[_\s]/g,"."),t=p.getMacOSVersionName(e),s={name:D.MacOS,version:e};return t&&(s.versionName=t),s}},{test:[/(ipod|iphone|ipad)/i],describe(r){const e=p.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,r).replace(/[_\s]/g,".");return{name:D.iOS,version:e}}},{test(r){const e=!r.test(/like android/i),t=r.test(/android/i);return e&&t},describe(r){const e=p.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,r),t=p.getAndroidVersionName(e),s={name:D.Android,version:e};return t&&(s.versionName=t),s}},{test:[/(web|hpw)[o0]s/i],describe(r){const e=p.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,r),t={name:D.WebOS};return e&&e.length&&(t.version=e),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(r){const e=p.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,r)||p.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,r)||p.getFirstMatch(/\bbb(\d+)/i,r);return{name:D.BlackBerry,version:e}}},{test:[/bada/i],describe(r){const e=p.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,r);return{name:D.Bada,version:e}}},{test:[/tizen/i],describe(r){const e=p.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,r);return{name:D.Tizen,version:e}}},{test:[/linux/i],describe(){return{name:D.Linux}}},{test:[/CrOS/],describe(){return{name:D.ChromeOS}}},{test:[/PlayStation 4/],describe(r){const e=p.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,r);return{name:D.PlayStation4,version:e}}}],yn=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(r){const e=p.getFirstMatch(/(can-l01)/i,r)&&"Nova",t={type:E.mobile,vendor:"Huawei"};return e&&(t.model=e),t}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:E.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:E.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:E.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:E.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:E.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:E.tablet}}},{test(r){const e=r.test(/ipod|iphone/i),t=r.test(/like (ipod|iphone)/i);return e&&!t},describe(r){const e=p.getFirstMatch(/(ipod|iphone)/i,r);return{type:E.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:E.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:E.mobile}}},{test(r){return r.getBrowserName(!0)==="blackberry"},describe(){return{type:E.mobile,vendor:"BlackBerry"}}},{test(r){return r.getBrowserName(!0)==="bada"},describe(){return{type:E.mobile}}},{test(r){return r.getBrowserName()==="windows phone"},describe(){return{type:E.mobile,vendor:"Microsoft"}}},{test(r){const e=Number(String(r.getOSVersion()).split(".")[0]);return r.getOSName(!0)==="android"&&e>=3},describe(){return{type:E.tablet}}},{test(r){return r.getOSName(!0)==="android"},describe(){return{type:E.mobile}}},{test(r){return r.getOSName(!0)==="macos"},describe(){return{type:E.desktop,vendor:"Apple"}}},{test(r){return r.getOSName(!0)==="windows"},describe(){return{type:E.desktop}}},{test(r){return r.getOSName(!0)==="linux"},describe(){return{type:E.desktop}}},{test(r){return r.getOSName(!0)==="playstation 4"},describe(){return{type:E.tv}}},{test(r){return r.getOSName(!0)==="roku"},describe(){return{type:E.tv}}}],Sn=[{test(r){return r.getBrowserName(!0)==="microsoft edge"},describe(r){if(/\sedg\//i.test(r))return{name:se.Blink};const t=p.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,r);return{name:se.EdgeHTML,version:t}}},{test:[/trident/i],describe(r){const e={name:se.Trident},t=p.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test(r){return r.test(/presto/i)},describe(r){const e={name:se.Presto},t=p.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test(r){const e=r.test(/gecko/i),t=r.test(/like gecko/i);return e&&!t},describe(r){const e={name:se.Gecko},t=p.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:se.Blink}}},{test:[/(apple)?webkit/i],describe(r){const e={name:se.WebKit},t=p.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}}];class Zt{constructor(e,t=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},t!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=p.find(bn,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(s=>this.test(s));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=p.find(vn,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(s=>this.test(s));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:t}=this.getOS();return e?String(t).toLowerCase()||"":t||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:t}=this.getPlatform();return e?String(t).toLowerCase()||"":t||""}parsePlatform(){this.parsedResult.platform={};const e=p.find(yn,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(s=>this.test(s));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=p.find(Sn,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(s=>this.test(s));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return p.assign({},this.parsedResult)}satisfies(e){const t={};let s=0;const n={};let i=0;if(Object.keys(e).forEach(o=>{const d=e[o];typeof d=="string"?(n[o]=d,i+=1):typeof d=="object"&&(t[o]=d,s+=1)}),s>0){const o=Object.keys(t),d=p.find(o,l=>this.isOS(l));if(d){const l=this.satisfies(t[d]);if(l!==void 0)return l}const c=p.find(o,l=>this.isPlatform(l));if(c){const l=this.satisfies(t[c]);if(l!==void 0)return l}}if(i>0){const o=Object.keys(n),d=p.find(o,c=>this.isBrowser(c,!0));if(d!==void 0)return this.compareVersion(n[d])}}isBrowser(e,t=!1){const s=this.getBrowserName().toLowerCase();let n=e.toLowerCase();const i=p.getBrowserTypeByAlias(n);return t&&i&&(n=i.toLowerCase()),n===s}compareVersion(e){let t=[0],s=e,n=!1;const i=this.getBrowserVersion();if(typeof i=="string")return e[0]===">"||e[0]==="<"?(s=e.substr(1),e[1]==="="?(n=!0,s=e.substr(2)):t=[],e[0]===">"?t.push(1):t.push(-1)):e[0]==="="?s=e.substr(1):e[0]==="~"&&(n=!0,s=e.substr(1)),t.indexOf(p.compareVersions(i,s,n))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,t=!1){return this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(t=>this.is(t))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class kn{static getParser(e,t=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new Zt(e,t)}static parse(e){return new Zt(e).getResult()}static get BROWSER_MAP(){return Nr}static get ENGINE_MAP(){return se}static get OS_MAP(){return D}static get PLATFORMS_MAP(){return E}}let Ue;const qt=()=>Ue||(Ue=kn.parse(window.navigator.userAgent),Ue),Mn=r=>(r.stack??=new Error().stack,r),Y=async r=>{try{return await r()}catch(e){throw Mn(e instanceof Error?e:new Error(e?.toString()))}};function Ir(r){return{...er,video:{...er.video,deviceId:{exact:r}}}}const er={audio:!1,video:{facingMode:{ideal:"environment"},frameRate:{ideal:60,min:30},sampleRate:{ideal:60,min:30}}},[Dr,_n]=A([]);async function ot(){if(navigator.mediaDevices?.enumerateDevices)try{const e=(await Y(()=>navigator.mediaDevices?.enumerateDevices())).filter(t=>t.kind==="videoinput");Dr().length!==e.length&&_n(e)}catch(r){if(r.message.includes("Illegal invocation"))return;throw r}}function Pn(){if(!("mediaDevices"in navigator&&"getUserMedia"in navigator.mediaDevices)){q("error:nosupport");return}navigator.permissions.query({name:"camera"}).then(e=>{e.state==="granted"&&q("granted"),e.state==="denied"&&q("denied")}).catch(e=>{console.error(e)}).finally(ot)}const[B,q]=A("unknown");Pn();const[Ee,Pt]=A(),Fe=new Map,tr=()=>Ee()?Fe.get(Ee().id):void 0;async function Nt(){for(const[r,e]of Fe){const t=e;if(!t){Fe.delete(r);continue}if(t.active){t.getTracks().forEach(s=>{s.readyState!=="ended"&&(s.stop(),s.enabled=!1)});try{t.stop&&t.stop()}catch{}Pt(void 0)}}await new Promise(r=>setTimeout(r,200))}const me=()=>B().startsWith("error"),jr=()=>B()==="unknown"||B()==="error:inuse",Vr=()=>B()==="granted",xt=ve({permission:B,hasPermission:Vr,hasErrored:me,canPrompt:jr,hasMediaSupport:()=>B()!=="error:nosupport",requestCamera:Ur,stopCameraStream:Nt,requestPermission:xn,devices:Dr,camera:Ee,cameraStream:()=>{}}),re=()=>ye(xt);async function xn(){if(!jr())return B();q("pending");const r=localStorage.getItem("camera")??void 0;return await Me.requestMediaPermissions(Ir(r)).then(async()=>(await ot(),await It(),q("granted"))).catch(e=>zr(e,r))}function zr(r,e){const{type:t,message:s,name:n}=r;return t===Me.MediaPermissionsErrorType.SystemPermissionDenied?q("denied:system"):t===Me.MediaPermissionsErrorType.UserPermissionDenied?q("denied"):t===Me.MediaPermissionsErrorType.CouldNotStartVideoSource||n==="AbortError"&&s==="Starting videoinput failed"||n==="NotReadableError"?q("error:inuse"):t===Me.MediaPermissionsErrorType.Generic&&s==="Permission dismissed"?q("unknown"):n==="OverconstrainedError"&&(r.constraint==="deviceId"||s==="")&&e?(localStorage.removeItem("camera"),q("error:inuse")):(console.error(r),q("error"))}function Ur(r){if(B()!=="granted")throw new Error("Call 'requestPermission' before 'getStream'");return It(r)}async function It(r){if(me())return{id:"",label:"X",facing:"loading",name:"X"};const e=localStorage.getItem("camera")??void 0,t=r??e??void 0;Ee()?.id!==t&&await Nt();const s=await Y(()=>navigator.mediaDevices.getUserMedia(Ir(t))).catch(i=>{if(i.name==="NotReadableError"){localStorage.setItem("camera",t),window.location.reload();return}if(zr(i,e)==="error")throw i});if(!s)return{id:t,label:"?",facing:"loading",name:""};if(await ot(),r&&Fe.set(r,s),!s.active||!s.getTracks())return localStorage.setItem("camera",t),B()==="error:inuse"?(Pt(void 0),{id:t,label:"X",facing:"loading",name:"X"}):{id:t,label:"?",facing:"loading",name:""};const n=s.getTracks()[0].getSettings().deviceId;return Fe.set(n,s),localStorage.setItem("camera",n),Pt({id:n,name:s.getTracks()[0].label,label:s.getTracks()[0].label.split("(")[0].split(",")[0].trim(),facing:qt().platform.type==="desktop"?"desktop":s.getTracks()[0].getSettings().facingMode})}const Cn=r=>{const e=t=>async s=>{me()||(await ot(),t.state==="granted"&&B()!=="granted"&&!me()&&await It().then(()=>q("granted")),t.state==="denied"&&q("denied"),t.state==="prompt"&&q("unknown"))};return te(async()=>{const t=()=>{B()!=="pending"&&(me()||Y(()=>navigator.permissions.query({name:"camera"})).then(s=>{e(s)()}).catch(()=>{}).finally(()=>window.setTimeout(()=>requestAnimationFrame(t),10)))};await Y(()=>navigator.permissions.query({name:"camera"})).then(s=>{s.onchange=e(s),requestAnimationFrame(t)}).catch(()=>{}),Vr()&&!me()&&!tr()&&await Ur()}),X(async()=>{await Nt()}),v(xt.Provider,{get value(){return{...xt.defaultValue,hasPermission:S(()=>B()==="granted",B),canPrompt:S(()=>B()==="unknown"||B()==="error:inuse",B),hasMediaSupport:S(()=>B()!=="error:nosupport",B),cameraStream:S(tr,[Ee])}},get children(){return G(()=>r.children)()}})};var An=(r,e)=>{if(e)for(const[t,s]of Object.entries(e))r=r.replace(new RegExp(`{{\\s*${t}\\s*}}`,"g"),s);return r},$n=k("<br>");const En={common:{close:"Close",offline:"You appear to be offline, please check your network connection",refresh:"Refresh page",share:"Share Guessify",unhandledError:{title:"Something went wrong.",details:"Details",explainer:["The application has encountered an unhandled error, please try again.","If this problem persists, please file a bug report, using the details below.","Closing this message will restart the application."]}},spotify:{title:"Spotify",explainer:[["Please connect to Spotify. ",$n(),"We need you to log into Spotify to be able to play music in the browser."],"For Spotify to allow this app to play music, your account needs to be a premium subscription."],signingIn:"Signing in...",signIn:"Sign in to Spotify",signOut:"Sign out",errors:{access_denied:"Access denied, please try again!",unknown:"Something went wrong, please try again!"},stats:{country:"Country",followers:"Followers",premium:"Premium"},details:{hasPremium:"Spotify premium user.",noPremium:"User doesn't have premium account!"}},camera:{title:"Camera",inUse:"Your camera is being used by another process, please close and try again.",type:{desktop:`Desktop
camera`,user:`Selfie
camera`,environment:`Environment
camera`,unknown:"Camera",loading:""},openingCam:"Connecting...",explainer:["To be able to scan the codes, we need access to your device's camera.","Please, give your browser permission to access the camera."],noSupport:["Your device likely doesn't have a camera, or your system doesn't allow your browser to access the camera.","Sadly, you cannot use the app."],noPermission:["Your browser doesn't have the correct permissions, possibly you denied the use of the camera.","To use this application, you need to "],selectedCamera:'You selected "{{label}}" to scan the codes.',switchBanner:"When using the app, you can change the camera at any time.",requestPermission:"Request permission",requestingPermission:"Requesting permission...",permissions:{title:"Reset browser permissions",permissionLink:"reset your browser permissions",deviceDetails:"Device details",explainer:"We couldn't find a page for your browser, please look in your settings to reset the browser permissions.",cta:["If you like, you can ","file a request"," to add your browser to our instructions."]}}};var Fn=k("<br>");const Rn={common:{close:"Sluiten",offline:"U bent offline, controleer a.u.b. uw verbinding",refresh:"Pagina verniewen",share:"Deel Guessify",unhandledError:{title:"Er is iets mis gegaan.",details:"Foutgegevens",explainer:["Er heeft zich een niet afgehandelde fout voorgedaan, probeer a.u.b. opniew.","Als dit probleem aan blijft houden, verzoeken wij u vriendelijk een bug rapport in te schieten met de onderstaande gegevens.","Het sluiten van dit bericht zal de applicatie herstarten."]}},spotify:{title:"Spotify",explainer:[["Wilt u a.u.b met Spotify verbinden? ",Fn(),"U moet ingelogd zijn bij Spotify om muziek in de browser te kunnen spelen."],"Spotify vereist een premuim account voor muziek in de browser."],signingIn:"Inloggen...",signIn:"Log in bij Spotify",signOut:"Uitloggen",errors:{access_denied:"Toegang geweigerd, probeer opnieuw!",unknown:"Er ging iets mis, probeer opnieuw!"},stats:{country:"Land",followers:"Volgers",premium:"Premium"},details:{hasPremium:"Spotify premium gebruiker.",noPremium:"Gebruiker heeft geen premium account!"}},camera:{title:"Video camera",inUse:"Uw camera wordt gebruikt door een ander process, sluit a.u.b. dit process en probeer opnieuw.",type:{desktop:`Desktop
camera`,user:`Selfie
camera`,environment:`Achterkant
camera`,unknown:"Camera",loading:""},openingCam:"Verbinden...",explainer:["Om de codes te kunnen scannen hebben wij toegang nodig tot uw camera.","Verleen uw browser a.u.b. toegang tot de camera."],noSupport:["Uw apparaat heeft mogelijk geen camera, of uw besturingssysteem staat het gebruik hiervan niet toe.","Helaas kunt u deze applicatie niet gebruiken."],noPermission:["Uw browser geeft geen toestemming tot het gebruik van de camera. Mogelijk heeft u de toestemming geweigerd.","Om gebruik te kunnen maken van de camera moet u "],selectedCamera:'U heeft "{{label}}" geselecteerd voor het scannen.',switchBanner:"U kunt dit later altijd nog veranderen.",requestPermission:"Vraag toestemming",requestingPermission:"Toestemming vragen...",permissions:{title:"Browser toestemming herstellen",deviceDetails:"Apparaat details",permissionLink:"uw browser toestemming herstellen",explainer:"Wij konden geen uitleg vinden voor jouw browser, probeer a.u.b. in uw instellingen te zoeken hoe u de camera toestemming kunt herstellen.",cta:["Wilt u a.u.b. ook ","een verzoek indienen"," om uw eigen browser toe te voegen aan onze instructies?"]}}},Re={en:En,nl:Rn},On=Object.getOwnPropertyNames(Re).sort((r,e)=>r.localeCompare(e,void 0,{sensitivity:"base"})),at=()=>localStorage.getItem("stored-locale"),Wr=r=>localStorage.setItem("stored-locale",r),Tn=r=>{const e=r&&Object.keys(Re).includes(r)?r:"en";return Re[e]},[wt,Bn]=A(at()??"en");function rr(){const r=Ks(),e=r.locale&&Object.keys(Re).includes(r.locale)?r.locale:void 0;Bn(e??at()??"en"),e&&Wr(e)}const L=()=>{try{te(rr)}catch(e){console.error(console.trace(),e)}ee(rr,Hs);const r=S(()=>Re[wt()],[wt]);return{locale:wt,locales:On,dictionary:r,template:An}};class F{api;constructor(e){this.api=e}async getRequest(e){return await this.api.makeRequest("GET",e)}async postRequest(e,t,s=void 0){return await this.api.makeRequest("POST",e,t,s)}async putRequest(e,t,s=void 0){return await this.api.makeRequest("PUT",e,t,s)}async deleteRequest(e,t){return await this.api.makeRequest("DELETE",e,t)}paramsFor(e){const t=new URLSearchParams;for(let s of Object.getOwnPropertyNames(e))(e[s]||e[s]===0||!e[s]&&typeof e[s]=="boolean")&&t.append(s,e[s].toString());return[...t].length>0?`?${t.toString()}`:""}}class Ln extends F{async get(e,t){if(typeof e=="string"){const i=this.paramsFor({market:t});return await this.getRequest(`albums/${e}${i}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`albums${s}`)).albums}tracks(e,t,s,n){const i=this.paramsFor({market:t,limit:s,offset:n});return this.getRequest(`albums/${e}/tracks${i}`)}}class qn extends F{async get(e){if(typeof e=="string")return this.getRequest(`artists/${e}`);const t=this.paramsFor({ids:e});return(await this.getRequest(`artists${t}`)).artists}albums(e,t,s,n,i){const a=this.paramsFor({include_groups:t,market:s,limit:n,offset:i});return this.getRequest(`artists/${e}/albums${a}`)}topTracks(e,t){const s=this.paramsFor({market:t});return this.getRequest(`artists/${e}/top-tracks${s}`)}relatedArtists(e){return this.getRequest(`artists/${e}/related-artists`)}}class Nn extends F{async get(e,t){if(typeof e=="string"){const i=this.paramsFor({market:t});return this.getRequest(`audiobooks/${e}${i}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`audiobooks${s}`)).audiobooks}getAudiobookChapters(e,t,s,n){const i=this.paramsFor({market:t,limit:s,offset:n});return this.getRequest(`audiobooks/${e}/chapters${i}`)}}class In extends F{getCategories(e,t,s,n){const i=this.paramsFor({country:e,locale:t,limit:s,offset:n});return this.getRequest(`browse/categories${i}`)}getCategory(e,t,s){const n=this.paramsFor({country:t,locale:s});return this.getRequest(`browse/categories/${e}${n}`)}getNewReleases(e,t,s){const n=this.paramsFor({country:e,limit:t,offset:s});return this.getRequest(`browse/new-releases${n}`)}getFeaturedPlaylists(e,t,s,n,i){const a=this.paramsFor({country:e,locale:t,timestamp:s,limit:n,offset:i});return this.getRequest(`browse/featured-playlists${a}`)}getPlaylistsForCategory(e,t,s,n){const i=this.paramsFor({country:t,limit:s,offset:n});return this.getRequest(`browse/categories/${e}/playlists${i}`)}}class Dn extends F{async get(e,t){if(typeof e=="string"){const i=this.paramsFor({market:t});return this.getRequest(`chapters/${e}${i}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`chapters${s}`)).chapters}}class jn extends F{async get(e,t){if(typeof e=="string"){const i=this.paramsFor({market:t});return this.getRequest(`episodes/${e}${i}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`episodes${s}`)).episodes}}class Vn extends F{get(e){const t=this.paramsFor(e);return this.getRequest(`recommendations${t}`)}genreSeeds(){return this.getRequest("recommendations/available-genre-seeds")}}class zn extends F{getAvailableMarkets(){return this.getRequest("markets")}}class Un extends F{getPlaybackState(e,t){const s=this.paramsFor({market:e,additional_types:t});return this.getRequest(`me/player${s}`)}getAvailableDevices(){return this.getRequest("me/player/devices")}getCurrentlyPlayingTrack(e,t){const s=this.paramsFor({market:e,additional_types:t});return this.getRequest(`me/player/currently-playing${s}`)}getRecentlyPlayedTracks(e,t){const s={limit:e};t&&(t.type==="before"?s.before=t.timestamp:t.type==="after"&&(s.after=t.timestamp));const n=this.paramsFor(s);return this.getRequest(`me/player/recently-played${n}`)}getUsersQueue(){return this.getRequest("me/player/queue")}async transferPlayback(e,t){if(e.length>1)throw new Error("Although an array is accepted, only a single device_id is currently supported. Supplying more than one will return 400 Bad Request");await this.putRequest("me/player",{device_ids:e,play:t})}async startResumePlayback(e,t,s,n,i){const a=this.paramsFor({device_id:e});await this.putRequest(`me/player/play${a}`,{context_uri:t,uris:s,offset:n,positionMs:i})}async pausePlayback(e){const t=this.paramsFor({device_id:e});await this.putRequest(`me/player/pause${t}`)}async skipToNext(e){const t=this.paramsFor({device_id:e});await this.postRequest(`me/player/next${t}`)}async skipToPrevious(e){const t=this.paramsFor({device_id:e});await this.postRequest(`me/player/previous${t}`)}async seekToPosition(e,t){const s=this.paramsFor({position_ms:e,device_id:t});await this.putRequest(`me/player/seek${s}`)}async setRepeatMode(e,t){const s=this.paramsFor({state:e,device_id:t});await this.putRequest(`me/player/repeat${s}`)}async setPlaybackVolume(e,t){const s=this.paramsFor({volume_percent:e,device_id:t});await this.putRequest(`me/player/volume${s}`)}async togglePlaybackShuffle(e,t){const s=this.paramsFor({state:e,device_id:t});await this.putRequest(`me/player/shuffle${s}`)}async addItemToPlaybackQueue(e,t){const s=this.paramsFor({uri:e,device_id:t});await this.postRequest(`me/player/queue${s}`)}}class Wn extends F{getPlaylist(e,t,s,n){const i=this.paramsFor({market:t,fields:s,additional_types:n?.join(",")});return this.getRequest(`playlists/${e}${i}`)}getPlaylistItems(e,t,s,n,i,a){const o=this.paramsFor({market:t,fields:s,limit:n,offset:i,additional_types:a?.join(",")});return this.getRequest(`playlists/${e}/tracks${o}`)}async changePlaylistDetails(e,t){await this.putRequest(`playlists/${e}`,t)}movePlaylistItems(e,t,s,n){return this.updatePlaylistItems(e,{range_start:t,range_length:s,insert_before:n})}updatePlaylistItems(e,t){return this.putRequest(`playlists/${e}/tracks`,t)}async addItemsToPlaylist(e,t,s){await this.postRequest(`playlists/${e}/tracks`,{position:s,uris:t})}async removeItemsFromPlaylist(e,t){await this.deleteRequest(`playlists/${e}/tracks`,t)}getUsersPlaylists(e,t,s){const n=this.paramsFor({limit:t,offset:s});return this.getRequest(`users/${e}/playlists${n}`)}createPlaylist(e,t){return this.postRequest(`users/${e}/playlists`,t)}getPlaylistCoverImage(e){return this.getRequest(`playlists/${e}/images`)}async addCustomPlaylistCoverImage(e,t){let s="";if(t instanceof Buffer)s=t.toString("base64");else if(t instanceof HTMLCanvasElement)s=t.toDataURL("image/jpeg").split(";base64,")[1];else if(t instanceof HTMLImageElement){const n=document.createElement("canvas");n.width=t.width,n.height=t.height;const i=n.getContext("2d");if(!i)throw new Error("Could not get canvas context");i.drawImage(t,0,0),s=n.toDataURL("image/jpeg").split(";base64,")[1]}else if(typeof t=="string")s=t;else throw new Error("ImageData must be a Buffer, HTMLImageElement, HTMLCanvasElement, or string containing a base64 encoded jpeg");await this.addCustomPlaylistCoverImageFromBase64String(e,s)}async addCustomPlaylistCoverImageFromBase64String(e,t){await this.putRequest(`playlists/${e}/images`,t,"image/jpeg")}}class Gn extends F{async execute(e,t,s,n,i,a){const o=this.paramsFor({q:e,type:t,market:s,limit:n,offset:i,include_external:a});return await this.getRequest(`search${o}`)}}class Hn extends F{async get(e,t){if(typeof e=="string"){const i=this.paramsFor({market:t});return this.getRequest(`shows/${e}${i}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`shows${s}`)).shows}episodes(e,t,s,n){const i=this.paramsFor({market:t,limit:s,offset:n});return this.getRequest(`shows/${e}/episodes${i}`)}}class Kn extends F{async get(e,t){if(typeof e=="string"){const i=this.paramsFor({market:t});return this.getRequest(`tracks/${e}${i}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`tracks${s}`)).tracks}async audioFeatures(e){if(typeof e=="string")return this.getRequest(`audio-features/${e}`);const t=this.paramsFor({ids:e});return(await this.getRequest(`audio-features${t}`)).audio_features}audioAnalysis(e){return this.getRequest(`audio-analysis/${e}`)}}const Dt={access_token:"emptyAccessToken",token_type:"",expires_in:0,refresh_token:"",expires:-1};function _e(r){return r===Dt}class Qn extends F{profile(e){return this.getRequest(`users/${e}`)}}class Jn extends F{albums;audiobooks;episodes;playlists;shows;tracks;constructor(e){super(e),this.albums=new Xn(e),this.audiobooks=new Yn(e),this.episodes=new Zn(e),this.playlists=new ei(e),this.shows=new ti(e),this.tracks=new ri(e)}profile(){return this.getRequest("me")}topItems(e,t,s,n){const i=this.paramsFor({time_range:t,limit:s,offset:n});return this.getRequest(`me/top/${e}${i}`)}followedArtists(e,t){const s=this.paramsFor({type:"artist",after:e,limit:t});return this.getRequest(`me/following${s}`)}async followArtistsOrUsers(e,t){const s=this.paramsFor({type:t});await this.putRequest(`me/following${s}`,{ids:e})}async unfollowArtistsOrUsers(e,t){const s=this.paramsFor({type:t});await this.deleteRequest(`me/following${s}`,{ids:e})}followsArtistsOrUsers(e,t){const s=this.paramsFor({ids:e,type:t});return this.getRequest(`me/following/contains${s}`)}}class Xn extends F{savedAlbums(e,t,s){const n=this.paramsFor({limit:e,offset:t,market:s});return this.getRequest(`me/albums${n}`)}async saveAlbums(e){await this.putRequest("me/albums",e)}async removeSavedAlbums(e){await this.deleteRequest("me/albums",e)}hasSavedAlbums(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/albums/contains${t}`)}}class Yn extends F{savedAudiobooks(e,t){const s=this.paramsFor({limit:e,offset:t});return this.getRequest(`me/audiobooks${s}`)}async saveAudiobooks(e){await this.putRequest("me/audiobooks",e)}async removeSavedAudiobooks(e){await this.deleteRequest("me/audiobooks",e)}hasSavedAudiobooks(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/audiobooks/contains${t}`)}}class Zn extends F{savedEpisodes(e,t,s){const n=this.paramsFor({market:e,limit:t,offset:s});return this.getRequest(`me/episodes${n}`)}async saveEpisodes(e){await this.putRequest("me/episodes",e)}async removeSavedEpisodes(e){await this.deleteRequest("me/episodes",e)}hasSavedEpisodes(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/episodes/contains${t}`)}}class ei extends F{playlists(e,t){const s=this.paramsFor({limit:e,offset:t});return this.getRequest(`me/playlists${s}`)}async follow(e){await this.putRequest(`playlists/${e}/followers`)}async unfollow(e){await this.deleteRequest(`playlists/${e}/followers`)}isFollowing(e,t){const s=this.paramsFor({ids:t});return this.getRequest(`playlists/${e}/followers/contains${s}`)}}class ti extends F{savedShows(e,t){const s=this.paramsFor({limit:e,offset:t});return this.getRequest(`me/shows${s}`)}saveShows(e){const t=this.paramsFor({ids:e});return this.putRequest(`me/shows${t}`)}removeSavedShows(e,t){const s=this.paramsFor({ids:e,market:t});return this.deleteRequest(`me/shows${s}`)}hasSavedShow(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/shows/contains${t}`)}}class ri extends F{savedTracks(e,t,s){const n=this.paramsFor({limit:e,offset:t,market:s});return this.getRequest(`me/tracks${n}`)}async saveTracks(e){await this.putRequest("me/tracks",e)}async removeSavedTracks(e){await this.deleteRequest("me/tracks",e)}hasSavedTracks(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/tracks/contains${t}`)}}class si{static get current(){return this.hasSubtleCrypto?window.crypto:this.tryLoadNodeWebCrypto()}static get hasSubtleCrypto(){return typeof window<"u"&&typeof window.crypto<"u"&&typeof window.crypto.subtle<"u"}static tryLoadNodeWebCrypto(){try{const{webcrypto:e}=require("crypto");return e}catch(e){throw e}}}class z{static async refreshCachedAccessToken(e,t){const s=await z.refreshToken(e,t.refresh_token);return z.toCachable(s)}static toCachable(e){return e.expires&&e.expires===-1?e:{...e,expires:this.calculateExpiry(e)}}static calculateExpiry(e){return Date.now()+e.expires_in*1e3}static async refreshToken(e,t){const s=new URLSearchParams;s.append("client_id",e),s.append("grant_type","refresh_token"),s.append("refresh_token",t);const n=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s}),i=await n.text();if(!n.ok)throw new Error(`Failed to refresh token: ${n.statusText}, ${i}`);return JSON.parse(i)}static generateCodeVerifier(e){let t="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<e;n++)t+=s.charAt(Math.floor(Math.random()*s.length));return t}static async generateCodeChallenge(e){const t=new TextEncoder().encode(e),s=await si.current.subtle.digest("SHA-256",t),n=[...new Uint8Array(s)];return(typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(String.fromCharCode.apply(null,n))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}}class Ce{clientId;clientSecret;scopes;static cacheKey="spotify-sdk:ClientCredentialsStrategy:token";configuration=null;get cache(){return this.configuration.cachingStrategy}constructor(e,t,s=[]){this.clientId=e,this.clientSecret=t,this.scopes=s}setConfiguration(e){this.configuration=e}async getOrCreateAccessToken(){return await this.cache.getOrCreate(Ce.cacheKey,async()=>{const t=await this.getTokenFromApi();return z.toCachable(t)},async t=>{const s=await this.getTokenFromApi();return z.toCachable(s)})}async getAccessToken(){return await this.cache.get(Ce.cacheKey)}removeAccessToken(){this.cache.remove(Ce.cacheKey)}async getTokenFromApi(){const e={grant_type:"client_credentials",scope:this.scopes.join(" ")},t=Object.keys(e).map(d=>d+"="+e[d]).join("&"),s=typeof Buffer<"u",n=`${this.clientId}:${this.clientSecret}`,i=s?Buffer.from(n).toString("base64"):btoa(n),a=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Basic ${i}`},body:t});if(a.status!==200)throw new Error("Failed to get access token.");return await a.json()}}class Ae{clientId;redirectUri;scopes;static cacheKey="spotify-sdk:ImplicitGrantStrategy:token";configuration=null;get cache(){return this.configuration.cachingStrategy}constructor(e,t,s){this.clientId=e,this.redirectUri=t,this.scopes=s}setConfiguration(e){this.configuration=e}async getOrCreateAccessToken(){return await this.cache.getOrCreate(Ae.cacheKey,async()=>{const t=await this.redirectOrVerifyToken();return z.toCachable(t)},async t=>z.refreshCachedAccessToken(this.clientId,t))}async getAccessToken(){return await this.cache.get(Ae.cacheKey)}removeAccessToken(){this.cache.remove(Ae.cacheKey)}async redirectOrVerifyToken(){const e=new URLSearchParams(window.location.hash.substring(1)),t=e.get("access_token");if(t)return Promise.resolve({access_token:t,token_type:e.get("token_type")??"",expires_in:parseInt(e.get("expires_in")??"0"),refresh_token:e.get("refresh_token")??"",expires:Number(e.get("expires"))||0});var n=(this.scopes??[]).join(" ");const i=new URLSearchParams;i.append("client_id",this.clientId),i.append("response_type","token"),i.append("redirect_uri",this.redirectUri),i.append("scope",n);const a="https://accounts.spotify.com/authorize?"+i.toString();return this.configuration.redirectionStrategy.redirect(a),Dt}}class pe{clientId;redirectUri;scopes;static cacheKey="spotify-sdk:AuthorizationCodeWithPKCEStrategy:token";configuration=null;get cache(){return this.configuration.cachingStrategy}constructor(e,t,s){this.clientId=e,this.redirectUri=t,this.scopes=s}setConfiguration(e){this.configuration=e}async getOrCreateAccessToken(){return await this.cache.getOrCreate(pe.cacheKey,async()=>{const t=await this.redirectOrVerifyToken();return z.toCachable(t)},async t=>z.refreshCachedAccessToken(this.clientId,t))}async getAccessToken(){return await this.cache.get(pe.cacheKey)}removeAccessToken(){this.cache.remove(pe.cacheKey)}async redirectOrVerifyToken(){const t=new URLSearchParams(window.location.search).get("code");if(t){const s=await this.verifyAndExchangeCode(t);return this.removeCodeFromUrl(),s}return this.redirectToSpotify(),Dt}async redirectToSpotify(){const e=z.generateCodeVerifier(128),t=await z.generateCodeChallenge(e),s={verifier:e,expiresOnAccess:!0};this.cache.setCacheItem("spotify-sdk:verifier",s);const n=await this.generateRedirectUrlForUser(this.scopes,t);await this.configuration.redirectionStrategy.redirect(n)}async verifyAndExchangeCode(e){const s=(await this.cache.get("spotify-sdk:verifier"))?.verifier;if(!s)throw new Error("No verifier found in cache - can't validate query string callback parameters.");return await this.configuration.redirectionStrategy.onReturnFromRedirect(),await this.exchangeCodeForToken(e,s)}removeCodeFromUrl(){const e=new URL(window.location.href);e.searchParams.delete("code");const t=e.search?e.href:e.href.replace("?","");window.history.replaceState({},document.title,t)}async generateRedirectUrlForUser(e,t){const s=e.join(" "),n=new URLSearchParams;return n.append("client_id",this.clientId),n.append("response_type","code"),n.append("redirect_uri",this.redirectUri),n.append("scope",s),n.append("code_challenge_method","S256"),n.append("code_challenge",t),`https://accounts.spotify.com/authorize?${n.toString()}`}async exchangeCodeForToken(e,t){const s=new URLSearchParams;s.append("client_id",this.clientId),s.append("grant_type","authorization_code"),s.append("code",e),s.append("redirect_uri",this.redirectUri),s.append("code_verifier",t);const n=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s}),i=await n.text();if(!n.ok)throw new Error(`Failed to exchange code for token: ${n.statusText}, ${i}`);return JSON.parse(i)}}class ni{async deserialize(e){const t=await e.text();return t.length>0?JSON.parse(t):null}}class ii{async validateResponse(e){switch(e.status){case 401:throw new Error("Bad or expired token. This can happen if the user revoked a token or the access token has expired. You should re-authenticate the user.");case 403:const t=await e.text();throw new Error(`Bad OAuth request (wrong consumer key, bad nonce, expired timestamp...). Unfortunately, re-authenticating the user won't help here. Body: ${t}`);case 429:throw new Error("The app has exceeded its rate limits.");default:if(!e.status.toString().startsWith("20")){const s=await e.text();throw new Error(`Unrecognised response code: ${e.status} - ${e.statusText}. Body: ${s}`)}}}}class oi{async handleErrors(e){return!1}}class ai{async redirect(e){document.location=e.toString()}async onReturnFromRedirect(){}}class Gr{storage;updateFunctions;autoRenewInterval;autoRenewWindow;constructor(e,t=new Map,s=0,n=2*60*1e3){this.storage=e,this.updateFunctions=t,this.autoRenewInterval=s,this.autoRenewWindow=n,this.autoRenewInterval>0&&setInterval(()=>this.autoRenewRenewableItems(),this.autoRenewInterval)}async getOrCreate(e,t,s){s&&this.updateFunctions.set(e,s);const n=await this.get(e);if(n)return n;const i=await t();if(!i)throw new Error("Could not create cache item");return _e(i)||this.setCacheItem(e,i),i}async get(e){let t=this.storage.get(e),s=t?JSON.parse(t):null;if(this.itemDueToExpire(s)&&this.updateFunctions.has(e)){const n=this.updateFunctions.get(e);await this.tryUpdateItem(e,s,n),t=this.storage.get(e),s=t?JSON.parse(t):null}return s?s.expires&&(s.expires===-1||s.expires<=Date.now())?(this.remove(e),null):(s.expiresOnAccess&&s.expiresOnAccess===!0&&this.remove(e),s):null}set(e,t,s){const n=Date.now()+s,i={...t,expires:n};this.setCacheItem(e,i)}setCacheItem(e,t){const s=JSON.stringify(t);this.storage.set(e,s)}remove(e){this.storage.remove(e)}itemDueToExpire(e){return!e||!e.expires?!1:e.expires-Date.now()<this.autoRenewWindow}async autoRenewRenewableItems(){this.updateFunctions.forEach(async(e,t)=>{const s=await this.get(t);s&&e&&this.itemDueToExpire(s)&&await this.tryUpdateItem(t,s,e)})}async tryUpdateItem(e,t,s){try{const n=await s(t);n&&this.setCacheItem(e,n)}catch(n){console.error(n)}}}class ci extends Gr{constructor(){super(new li)}}class li{get(e){return localStorage.getItem(e)}set(e,t){localStorage.setItem(e,t)}remove(e){localStorage.removeItem(e)}}class ui extends Gr{constructor(){super(new di)}}class di{cache=new Map;get(e){return this.cache.get(e)??null}set(e,t){this.cache.set(e,t)}remove(e){this.cache.delete(e)}}class fi{clientId;accessToken;refreshTokenAction;constructor(e,t,s){this.clientId=e,this.accessToken=t,this.refreshTokenAction=s||z.refreshCachedAccessToken,this.accessToken.expires||(this.accessToken.expires=z.calculateExpiry(this.accessToken))}setConfiguration(e){}async getOrCreateAccessToken(){if(this.accessToken.expires&&this.accessToken.expires<=Date.now()){const e=await this.refreshTokenAction(this.clientId,this.accessToken);this.accessToken=e}return this.accessToken}async getAccessToken(){return this.accessToken}removeAccessToken(){this.accessToken={access_token:"",token_type:"",expires_in:0,refresh_token:"",expires:0}}}class ne{sdkConfig;static rootUrl="https://api.spotify.com/v1/";authenticationStrategy;albums;artists;audiobooks;browse;chapters;episodes;recommendations;markets;player;playlists;shows;tracks;users;search;currentUser;constructor(e,t){this.sdkConfig=this.initializeSdk(t),this.albums=new Ln(this),this.artists=new qn(this),this.audiobooks=new Nn(this),this.browse=new In(this),this.chapters=new Dn(this),this.episodes=new jn(this),this.recommendations=new Vn(this),this.markets=new zn(this),this.player=new Un(this),this.playlists=new Wn(this),this.shows=new Hn(this),this.tracks=new Kn(this),this.users=new Qn(this),this.currentUser=new Jn(this);const s=new Gn(this);this.search=s.execute.bind(s),this.authenticationStrategy=e,this.authenticationStrategy.setConfiguration(this.sdkConfig)}async makeRequest(e,t,s=void 0,n=void 0){try{const i=await this.authenticationStrategy.getOrCreateAccessToken();if(_e(i))return console.warn("No access token found, authenticating now."),null;const a=i?.access_token,o=ne.rootUrl+t,d={method:e,headers:{Authorization:`Bearer ${a}`,"Content-Type":n??"application/json"},body:s?typeof s=="string"?s:JSON.stringify(s):void 0};this.sdkConfig.beforeRequest(o,d);const c=await this.sdkConfig.fetch(o,d);return this.sdkConfig.afterRequest(o,d,c),c.status===204?null:(await this.sdkConfig.responseValidator.validateResponse(c),this.sdkConfig.deserializer.deserialize(c))}catch(i){if(!await this.sdkConfig.errorHandler.handleErrors(i))throw i;return null}}initializeSdk(e){const t=typeof window<"u";return{...{fetch:(n,i)=>fetch(n,i),beforeRequest:(n,i)=>{},afterRequest:(n,i,a)=>{},deserializer:new ni,responseValidator:new ii,errorHandler:new oi,redirectionStrategy:new ai,cachingStrategy:t?new ci:new ui},...e}}switchAuthenticationStrategy(e){this.authenticationStrategy=e,this.authenticationStrategy.setConfiguration(this.sdkConfig),this.authenticationStrategy.getOrCreateAccessToken()}async authenticate(){const e=await this.authenticationStrategy.getOrCreateAccessToken();return{authenticated:e.expires>Date.now()&&!_e(e),accessToken:e}}async getAccessToken(){return this.authenticationStrategy.getAccessToken()}logOut(){this.authenticationStrategy.removeAccessToken()}static withUserAuthorization(e,t,s=[],n){const i=new pe(e,t,s);return new ne(i,n)}static withClientCredentials(e,t,s=[],n){const i=new Ce(e,t,s);return new ne(i,n)}static withImplicitGrant(e,t,s=[],n){const i=new Ae(e,t,s);return new ne(i,n)}static withAccessToken(e,t,s){const n=new fi(e,t);return new ne(n,s)}static async performUserAuthorization(e,t,s,n,i){const a=new pe(e,t,s),d=await new ne(a,i).authenticationStrategy.getOrCreateAccessToken();return _e(d)||(typeof n=="string"?(console.log("Posting access token to postback URL."),await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})):await n(d)),{authenticated:d.expires>Date.now()&&!_e(d),accessToken:d}}}const hi="fea5ab12dbbb422485f6621e2cf89e24",mi="https://marvin-brouwer.github.io",Oe=()=>ne.withUserAuthorization(hi,`${mi}/guessify/spotify-auth`,["streaming","user-read-private","user-read-email"]),gi=()=>Oe().logOut(),pi=()=>{gi(),ge(void 0)};async function wi(){const r=`../${at()}/`,e=new URL(window.location.href);if(e.searchParams.has("code"))try{const t=await Oe().authenticate();return ge(t.authenticated?"success":"error.auth_failed"),r}catch(t){return ge(`error.auth_failed.${t.message}`),r}return e.searchParams.has("error")?(ge(`error.${e.searchParams.get("error")}`),r):(ge("error.invalid_request"),r)}const[bi,ge]=A(),Ct=ve({api:Object.assign(Oe(),{logOut:pi}),status:bi,handleAuthReturn:wi}),ct=()=>ye(Ct),vi=r=>(te(async()=>{if(await Y(()=>Oe().getAccessToken()).then(t=>!!t)){const t=await Y(()=>Oe().authenticate());ge(t.authenticated?"success":"error.auth_failed")}}),v(Ct.Provider,{get value(){return Ct.defaultValue},get children(){return G(()=>r.children)()}})),et=r=>r()==="success";function yi(){const{api:r,status:e}=ct();if(!et(e)){we(!1);return}r.logOut(),we(!1)}async function sr(r){const{api:e,status:t}=ct();et(t)&&we(!1),Wr(r),we(!0);try{if((await Y(()=>e.authenticate())).accessToken.access_token==="emptyAccessToken")return;const n=await Y(()=>e.currentUser.profile());Si(n)}catch(s){const n=s;throw n.restore=()=>{n.message.includes("Unfortunately, re-authenticating the user won't help here")&&localStorage.removeItem("spotify-sdk:AuthorizationCodeWithPKCEStrategy:token")},n}finally{we(!1)}}const[Hr,we]=A(!1),[Ke,Si]=A(),Kr=ve({logIn:()=>Promise.resolve(),logOut:()=>Promise.resolve(),isAuthenticating:Hr,isAuthenticated:()=>!1,isValid:()=>!1,profile:Ke,errorMessage:()=>{}}),be=()=>ye(Kr),ki=r=>{const{api:e,status:t}=ct(),{dictionary:s,locale:n}=L();te(async()=>{await Y(()=>e.getAccessToken()).then(d=>!!d)&&(we(!0),await sr(n()))});const i=()=>et(t)&&Ke()?.product==="premium",a=()=>{if(t()&&t()!=="success")return t()==="error.access_denied"?s().spotify.errors.access_denied:s().spotify.errors.unknown};return v(Kr.Provider,{get value(){return{isValid:S(i,[t,Ke]),isAuthenticated:S(()=>et(t),t),errorMessage:a,isAuthenticating:Hr,logIn:()=>sr(n()),logOut:yi,profile:Ke}},get children(){return G(()=>r.children)()}})},Mi="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20enable-background='new%200%200%2024%2024'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3cg%3e%3crect%20fill='none'%20height='24'%20width='24'/%3e%3c/g%3e%3cg%3e%3cpath%20d='M12%202C6.48%202%202%206.48%202%2012s4.48%2010%2010%2010%2010-4.48%2010-10S17.52%202%2012%202zm0%204c1.93%200%203.5%201.57%203.5%203.5S13.93%2013%2012%2013s-3.5-1.57-3.5-3.5S10.07%206%2012%206zm0%2014c-2.03%200-4.43-.82-6.14-2.88C7.55%2015.8%209.68%2015%2012%2015s4.45.8%206.14%202.12C16.43%2019.18%2014.03%2020%2012%2020z'/%3e%3c/g%3e%3c/svg%3e",_i="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20enable-background='new%200%200%2024%2024'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%231ed760'%3e%3cg%3e%3crect%20fill='none'%20height='24'%20width='24'/%3e%3c/g%3e%3cg%3e%3cpath%20d='M23,12l-2.44-2.79l0.34-3.69l-3.61-0.82L15.4,1.5L12,2.96L8.6,1.5L6.71,4.69L3.1,5.5L3.44,9.2L1,12l2.44,2.79l-0.34,3.7%20l3.61,0.82L8.6,22.5l3.4-1.47l3.4,1.46l1.89-3.19l3.61-0.82l-0.34-3.69L23,12z%20M10.09,16.72l-3.8-3.81l1.48-1.48l2.32,2.33%20l5.85-5.87l1.48,1.48L10.09,16.72z'/%3e%3c/g%3e%3c/svg%3e",Pi="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23d71e1e'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M1%2021h22L12%202%201%2021zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z'/%3e%3c/svg%3e",Qr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M17%207l-1.41%201.41L18.17%2011H8v2h10.17l-2.58%202.58L17%2017l5-5zM4%205h8V3H4c-1.1%200-2%20.9-2%202v14c0%201.1.9%202%202%202h8v-2H4V5z'/%3e%3c/svg%3e",xi="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20enable-background='new%200%200%2024%2024'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3cg%3e%3crect%20fill='none'%20height='24'%20width='24'/%3e%3c/g%3e%3cg%3e%3cpath%20d='M11,7L9.6,8.4l2.6,2.6H2v2h10.2l-2.6,2.6L11,17l5-5L11,7z%20M20,19h-8v2h8c1.1,0,2-0.9,2-2V5c0-1.1-0.9-2-2-2h-8v2h8V19z'/%3e%3c/g%3e%3c/svg%3e";var Ci=k("<img>"),Ai=k("<button class=app-button><span>");const ie=({text:r,imageUrl:e,...t})=>(()=>{var s=Ai(),n=s.firstChild;return Es(s,t,!1),w(n,r),w(s,v(ce,{when:e,get children(){var i=Ci();return O(i,"src",e),i}}),null),s})();var $i=k("<div class=spotify-card><h2>"),Ei=k('<div class="spotify-login-card card"><div class=details><p></p><p></p></div><div class=controls>'),Fi=k("<p class=error>"),Ri=k("<img class=placeholder>"),Oi=k('<div class="spotify-profile-card card"><div class=thumbnail></div><p class=stats><b></b><i></i></p><p class=stats><b></b><i></i></p><p class=stats><b></b><i><img></i></p><div class=details><h3></h3></div><div class=controls>'),nr=k("<p>"),Ti=k("<p class=no-premium>");const Bi=()=>{const r=be(),{hasMediaSupport:e}=re();if(!e())return null;const{dictionary:t}=L(),s=()=>!be().isAuthenticating()&&r.isAuthenticated()?v(qi,{}):v(Li,{});return(()=>{var n=$i(),i=n.firstChild;return w(i,()=>t().spotify.title),w(n,s,null),n})()},Li=()=>{const r=be(),{dictionary:e}=L();return(()=>{var t=Ei(),s=t.firstChild,n=s.firstChild,i=n.nextSibling,a=s.nextSibling;return w(n,()=>e().spotify.explainer[0]),w(i,()=>e().spotify.explainer[1]),w(s,(()=>{var o=S(()=>!!r.errorMessage());return()=>o()&&(()=>{var d=Fi();return w(d,()=>r.errorMessage()),d})()})(),null),w(a,v(ie,{get disabled(){return r.isAuthenticating()},get imageUrl(){return!r.isAuthenticating()&&xi},get text(){return S(()=>!!r.isAuthenticating())()?e().spotify.signingIn:e().spotify.signIn},onClick:()=>{r.logIn()}})),t})()},qi=()=>{const r=be(),{dictionary:e}=L(),t=r.profile();if(!t)return null;const s=t.images?.find(o=>o.width===300)??void 0,[n,i]=A((()=>{var o=Ri();return O(o,"src",Mi),o})());ee(()=>{if(!s||n().src===s.url)return;const o=n().cloneNode(!0);o.className="",o.addEventListener("load",()=>i(o),{once:!0}),o.src=s.url},s);const a=r.isValid();return(()=>{var o=Oi(),d=o.firstChild,c=d.nextSibling,l=c.firstChild,u=l.nextSibling,f=c.nextSibling,m=f.firstChild,g=m.nextSibling,h=f.nextSibling,b=h.firstChild,y=b.nextSibling,M=y.firstChild,T=h.nextSibling,I=T.firstChild,U=T.nextSibling;return w(d,n),w(l,()=>e().spotify.stats.country),w(u,()=>t.country),w(m,()=>e().spotify.stats.followers),w(g,()=>t.followers.total),w(b,()=>e().spotify.stats.premium),O(M,"src",a?_i:Pi),w(I,()=>t.display_name),w(T,a?(()=>{var R=nr();return w(R,()=>e().spotify.details.hasPremium),R})():[(()=>{var R=Ti();return w(R,()=>e().spotify.details.noPremium),R})(),(()=>{var R=nr();return w(R,()=>e().spotify.explainer[1]),R})()],null),w(U,v(ie,{get text(){return e().spotify.signOut},imageUrl:Qr,onClick:R=>{R.currentTarget.disabled==!0,r.logOut()}})),o})()},bt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20enable-background='new%200%200%2024%2024'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3crect%20fill='none'%20height='24'%20width='24'/%3e%3cpath%20d='M3,4V1h2v3h3v2H5v3H3V6H0V4H3z%20M6,10V7h3V4h7l1.83,2H21c1.1,0,2,0.9,2,2v12c0,1.1-0.9,2-2,2H5c-1.1,0-2-0.9-2-2V10H6z%20M13,19c2.76,0,5-2.24,5-5s-2.24-5-5-5s-5,2.24-5,5S10.24,19,13,19z%20M9.8,14c0,1.77,1.43,3.2,3.2,3.2s3.2-1.43,3.2-3.2%20s-1.43-3.2-3.2-3.2S9.8,12.23,9.8,14z'/%3e%3c/svg%3e",Ni="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M19%206.41L17.59%205%2012%2010.59%206.41%205%205%206.41%2010.59%2012%205%2017.59%206.41%2019%2012%2013.41%2017.59%2019%2019%2017.59%2013.41%2012z'/%3e%3c/svg%3e";var Ii=k("<dialog class=app-dialog><div><div class=details></div><div class=controls>");const ir=(r,e)=>t=>{if(r.hidden)return;const s=r.getBoundingClientRect();s.top<=t.clientY&&t.clientY<=s.top+s.height&&s.left<=t.clientX&&t.clientX<=s.left+s.width||e()},jt=()=>{const{dictionary:r}=L(),[e,t]=A(),[s,n]=A(!1),[i,a]=A(),o=()=>{if(!s())return!1;if(!i())return n(!1),e()?.close();i()()!==!1&&(n(!1),e()?.close())};return{Modal:c=>{const l=()=>s()?G(()=>c.children)():G(()=>{})();return t((()=>{var u=Ii(),f=u.firstChild,m=f.firstChild,g=m.nextSibling;return w(m,l),w(g,v(ie,{get text(){return r().common.close},imageUrl:Ni,onClick:o})),j(h=>{var b=!s(),y=`modal ${c.class??""}`;return b!==h.e&&(u.inert=h.e=b),y!==h.t&&it(f,h.t=y),h},{e:void 0,t:void 0}),u})()),a(()=>c.beforeClose),te(()=>{e()?.addEventListener("click",ir(e(),o))}),X(()=>{o(),e()?.removeEventListener("click",ir(e(),o))}),v(qs,{get children(){return e()}})},showModal:()=>{if(s())return!1;e&&(n(!0),e()?.showModal())},closeModal:o}};var Di=k("<a href=#instructions>"),ji=k("<a target=_blank>"),Vi=k("<h2>"),or=k("<p>"),zi=k("<p><a href=#todo target=_blank>"),Ui=k("<details><summary></summary><pre>");const Wi=qt(),Gi=()=>{const{locale:r,dictionary:e}=L(),{Modal:t,showModal:s}=jt(),n=S(()=>Hi(Wi,r()),r),i=async o=>(o.preventDefault(),o.stopPropagation(),s(),!1),a=S(()=>n()?(()=>{var o=ji();return w(o,()=>e().camera.permissions.permissionLink),j(()=>O(o,"href",n())),o})():(()=>{var o=Di();return o.$$click=i,w(o,()=>e().camera.permissions.permissionLink),o})(),n);return[S(a),v(t,{class:"reset-permission-modal",get children(){return[(()=>{var o=Vi();return w(o,()=>e().camera.permissions.title),o})(),(()=>{var o=or();return w(o,()=>e().camera.permissions.explainer),o})(),(()=>{var o=zi(),d=o.firstChild;return w(o,()=>e().camera.permissions.cta[0],d),w(d,()=>e().camera.permissions.cta[1]),w(o,()=>e().camera.permissions.cta[2],null),o})(),(()=>{var o=Ui(),d=o.firstChild,c=d.nextSibling;return w(d,()=>e().camera.permissions.deviceDetails),w(c,()=>JSON.stringify(qt(),null,4)),o})(),or()]}})]};function Hi(r,e){if(r.browser.name==="Chrome"){if(r.platform.type==="desktop")return`https://support.google.com/chrome/answer/114662?hl=${e}&co=GENIE.Platform%3DDesktop`;if(r.os.name==="Android")return`https://support.google.com/chrome/answer/114662?hl=${e}&co=GENIE.Platform%3DAndroid`;if(r.os.name==="IOS")return`https://support.google.com/chrome/answer/114662?hl=${e}&co=GENIE.Platform%3DiOS`}}nt(["click"]);const Ki="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='rgb(32,%2032,%2032)'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M9.4%2010.5l4.77-8.26C13.47%202.09%2012.75%202%2012%202c-2.4%200-4.6.85-6.32%202.25l3.66%206.35.06-.1zM21.54%209c-.92-2.92-3.15-5.26-6-6.34L11.88%209h9.66zm.26%201h-7.49l.29.5%204.76%208.25C21%2016.97%2022%2014.61%2022%2012c0-.69-.07-1.35-.2-2zM8.54%2012l-3.9-6.75C3.01%207.03%202%209.39%202%2012c0%20.69.07%201.35.2%202h7.49l-1.15-2zm-6.08%203c.92%202.92%203.15%205.26%206%206.34L12.12%2015H2.46zm11.27%200l-3.9%206.76c.7.15%201.42.24%202.17.24%202.4%200%204.6-.85%206.32-2.25l-3.66-6.35-.93%201.6z'/%3e%3c/svg%3e",Qi="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='rgb(32,%2032,%2032)'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3ccircle%20cx='12'%20cy='12'%20r='3.2'/%3e%3cpath%20d='M9%202L7.17%204H4c-1.1%200-2%20.9-2%202v12c0%201.1.9%202%202%202h16c1.1%200%202-.9%202-2V6c0-1.1-.9-2-2-2h-3.17L15%202H9zm3%2015c-2.76%200-5-2.24-5-5s2.24-5%205-5%205%202.24%205%205-2.24%205-5%205z'/%3e%3c/svg%3e",Ji="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='rgb(32,%2032,%2032)'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M12%2012c2.21%200%204-1.79%204-4s-1.79-4-4-4-4%201.79-4%204%201.79%204%204%204zm0%202c-2.67%200-8%201.34-8%204v2h16v-2c0-2.66-5.33-4-8-4z'/%3e%3c/svg%3e",Xi="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='rgb(32,%2032,%2032)'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M21%2019V5c0-1.1-.9-2-2-2H5c-1.1%200-2%20.9-2%202v14c0%201.1.9%202%202%202h14c1.1%200%202-.9%202-2zM8.5%2013.5l2.5%203.01L14.5%2012l4.5%206H5l3.5-4.5z'/%3e%3c/svg%3e";var We=k("<img>");const Yi=r=>S(()=>{const e=r()?.facing;return e==="loading"?null:e==="desktop"?(()=>{var t=We();return O(t,"src",Qi),t})():e==="user"?(()=>{var t=We();return O(t,"src",Ji),t})():e==="environment"?(()=>{var t=We();return O(t,"src",Xi),t})():(()=>{var t=We();return O(t,"src",Ki),t})()},r),Zi="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20enable-background='new%200%200%2024%2024'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3cg%3e%3cpath%20d='M0,0h24v24H0V0z'%20fill='none'/%3e%3c/g%3e%3cg%3e%3cg%3e%3cpath%20d='M16,7h-1l-1-1h-4L9,7H8C6.9,7,6,7.9,6,9v6c0,1.1,0.9,2,2,2h8c1.1,0,2-0.9,2-2V9C18,7.9,17.1,7,16,7z%20M12,14%20c-1.1,0-2-0.9-2-2c0-1.1,0.9-2,2-2s2,0.9,2,2C14,13.1,13.1,14,12,14z'/%3e%3cpath%20d='M8.57,0.51l4.48,4.48V2.04c4.72,0.47,8.48,4.23,8.95,8.95c0,0,2,0,2,0C23.34,3.02,15.49-1.59,8.57,0.51z'/%3e%3cpath%20d='M10.95,21.96C6.23,21.49,2.47,17.73,2,13.01c0,0-2,0-2,0c0.66,7.97,8.51,12.58,15.43,10.48l-4.48-4.48V21.96z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",eo="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M12%205.83L15.17%209l1.41-1.41L12%203%207.41%207.59%208.83%209%2012%205.83zm0%2012.34L8.83%2015l-1.41%201.41L12%2021l4.59-4.59L15.17%2015%2012%2018.17z'/%3e%3c/svg%3e";var to=k("<option>"),ro=k("<select>"),so=k("<img>"),no=k("<div class=app-dropdown><div><span>");const Jr=({disabled:r,value:e,onChange:t,options:s,selectImageUrl:n,disabledLabel:i})=>{const a=S(()=>s().find(({id:f})=>f===e())?.text,[s,e]),o=S(()=>s().map(({id:f,text:m})=>(()=>{var g=to();return g.value=f,w(g,m),j(()=>g.selected=f===e()),g})()),[e,s]),d=S(()=>r?r():!1,r),c=S(()=>s().length>1,s),l=S(()=>n!==!1&&c(),[c,n]),u=S(()=>{if(l())return n||eo},[l,n]);return(()=>{var f=no(),m=f.firstChild,g=m.firstChild;return w(f,v(ce,{get when(){return c()},fallback:void 0,get children(){var h=ro();return h.addEventListener("change",async b=>{if(b.target.value===e())return;const y=b.target.value,M=e();t(b,y,M)}),w(h,o),j(()=>h.disabled=d()),h}}),m),w(g,(()=>{var h=S(()=>!!(d()&&i));return()=>h()?i:a()})()),w(m,v(ce,{get when(){return l()},fallback:void 0,get children(){var h=so();return j(()=>O(h,"src",u())),h}}),null),j(()=>it(m,d()?"fake-button disabled":"fake-button")),f})()};var io=k("<div class=camera-select-button>");const Xr=({nameRef:r})=>{const{camera:e,devices:t,requestCamera:s,stopCameraStream:n}=re(),{dictionary:i}=L(),a=S(()=>t().map(o=>({id:o.deviceId,text:o.label})),[t,e]);return(()=>{var o=io();return w(o,v(Jr,{value:()=>e()?.id,options:a,disabled:()=>!e(),get disabledLabel(){return i().camera.openingCam},selectImageUrl:Zi,onChange:async(d,c)=>{r?.(c),await n(),await s(c)}})),o})()};var oo=k("<video loop>"),ao=k("<video>");const Yr=r=>{const{cameraStream:e,camera:t}=re(),n=oo();r.ref?.(n),X(()=>{r.ref?.(void 0);const a=n;a.pause();const o=a.srcObject,d=o?.getTracks()??[];for(const c of d)o?.removeTrack(c);a.src="",a.srcObject=null}),ee(()=>{const a=n,o=e();if(ar(o)){if(co(o,a.srcObject))return;a.removeAttribute("src"),a.srcObject=o,a.onloadedmetadata=()=>{a.play()},a.srcObject.addEventListener("removetrack",()=>{a.pause()},{once:!0}),a.srcObject.getTracks()[0].addEventListener("ended",()=>{a.pause()},{once:!0})}else{a.pause();const d=a.srcObject,c=d?.getTracks()??[];for(const l of c)d?.removeTrack(l);a.src="",a.srcObject=null}},[e,t]);const i=S(()=>ar(e())?n:ao());return S(i)},ar=r=>!r||!r.active||r.getTracks().length===0?!1:r.getTracks()[0].enabled,co=(r,e)=>r?.getTracks()[0]?.getSettings().deviceId==e?.getTracks()[0]?.getSettings().deviceId;var lo=k("<div class=camera-card><h2>"),uo=k('<div class="camera-request-card card no-controls"><div class=details><p></p><p> </p><p> '),fo=k('<div class="camera-request-card card no-controls"><div class=details><p></p><p></p><p> <!>.'),ho=k("<p class=error>"),mo=k('<div class="camera-request-card card"><div class=details><p></p><p></p></div><div class=controls>'),go=k('<div class="camera-request-card card"><div class=video-overlay></div><div class=details><p></p><p><i></i></p></div><div class=controls>'),po=k("<div class=stats><span>");const wo=()=>{const r=re(),{dictionary:e}=L(),t=S(()=>r.hasMediaSupport()?r.canPrompt()||r.permission()==="pending"?v(yo,{}):r.hasPermission()?v(So,{}):v(vo,{}):v(bo,{}),[r.hasMediaSupport,r.canPrompt,r.hasPermission]);return(()=>{var s=lo(),n=s.firstChild;return w(n,()=>e().camera.title),w(s,t,null),s})()},bo=()=>{const{dictionary:r}=L();return(()=>{var e=uo(),t=e.firstChild,s=t.firstChild,n=s.nextSibling,i=n.firstChild,a=n.nextSibling,o=a.firstChild;return w(s,()=>r().camera.explainer[0]),w(n,()=>r().camera.noSupport[0],i),w(a,()=>r().camera.noSupport[1],o),e})()},vo=()=>{const{dictionary:r}=L();return(()=>{var e=fo(),t=e.firstChild,s=t.firstChild,n=s.nextSibling,i=n.nextSibling,a=i.firstChild,o=a.nextSibling;return o.nextSibling,w(s,()=>r().camera.explainer[0]),w(n,()=>r().camera.noPermission[0]),w(i,()=>r().camera.noPermission[1],a),w(i,v(Gi,{}),o),e})()},yo=()=>{const r=re(),{dictionary:e}=L(),t=S(()=>r.permission()==="pending"?v(ie,{disabled:!0,get text(){return e().camera.requestingPermission},imageUrl:bt}):r.permission()==="error:inuse"?v(ie,{get text(){return e().common.refresh},imageUrl:bt,onClick:s=>{s.target.disabled=!0,window.location.reload()}}):v(ie,{get disabled(){return!r.canPrompt()},get text(){return e().camera.requestPermission},imageUrl:bt,onClick:()=>{r.requestPermission()}}),[r.canPrompt,r.permission]);return(()=>{var s=mo(),n=s.firstChild,i=n.firstChild,a=i.nextSibling,o=n.nextSibling;return w(i,()=>e().camera.explainer[0]),w(a,()=>e().camera.explainer[1]),w(n,v(ce,{get when(){return r.permission()==="error:inuse"},get children(){var d=ho();return w(d,()=>e().camera.inUse),d}}),null),w(o,t),s})()},So=()=>{const{camera:r}=re(),{dictionary:e,template:t}=L(),s=Yi(r);return(()=>{var n=go(),i=n.firstChild,a=i.nextSibling,o=a.firstChild,d=o.nextSibling,c=d.firstChild,l=a.nextSibling;return w(n,v(Yr,{}),i),w(i,(()=>{var u=S(()=>!!r());return()=>u()&&(()=>{var f=po(),m=f.firstChild;return w(f,s,m),w(m,()=>e().camera.type[r()?.facing??"unknown"]),f})()})()),w(o,()=>t(e().camera.selectedCamera,{label:r()?.label??"..."})),w(c,()=>e().camera.switchBanner),w(l,v(Xr,{})),n})()},Te="/guessify/assets/guessify-logo-DT33HoF3.svg",[tt,cr]=A(window.navigator.onLine?"online":"offline"),ko=()=>tt()!=="offline",At=ve({status:tt,online:ko}),Mo=()=>ye(At),_o=r=>{const e=()=>cr("online"),t=()=>cr("offline");return te(()=>{window.addEventListener("online",e),window.addEventListener("offline",t)}),X(()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}),v(At.Provider,{get value(){return{...At.defaultValue,online:S(()=>tt()!=="offline",tt)}},get children(){return G(()=>r.children)()}})};var Po=k("<div class=dependency-gate><h1 class=logo><img> Guessify</h1><p>"),xo=k("<div class=dependency-gate><h1 class=logo><img> Guessify");const Co=r=>{const e=be(),t=re(),{online:s}=Mo(),{dictionary:n}=L(),i=G(()=>r.children);if(!s())return(()=>{var d=Po(),c=d.firstChild,l=c.firstChild,u=c.nextSibling;return O(l,"src",Te),w(u,()=>n().common.offline),d})();const a=S(()=>e.isValid()&&t.hasPermission(),[e.isValid,t.hasPermission,t.permission]),o=(()=>{var d=xo(),c=d.firstChild,l=c.firstChild;return O(l,"src",Te),w(d,v(Bi,{}),null),w(d,v(wo,{}),null),d})();return v(ce,{get when(){return a()},get children(){return i()},fallback:o})},Q={canvasContextOptions:{willReadFrequently:!0,desynchronized:!0},showScaleCanvas:!1,showGrayscaleImage:!0,showOrientationLines:!0,sampleRate:200,blurAmount:3,debugEnabled(){return this.showScaleCanvas||this.showGrayscaleImage||this.showOrientationLines}},lr=Q.debugEnabled()?async(r,e)=>{const t=document.createElement("a");if(t.download=`camera-feed-${e}-${r.id}.png`,r instanceof HTMLCanvasElement)t.href=r.toDataURL();else{const n=await r.convertToBlob({type:"image/png"});var s=new FileReader;t.href=await new Promise(i=>{s.onload=a=>{i(a.target.result)},s.readAsDataURL(n)})}t.click()}:void 0,lt=(r,e,t,s=!0)=>{const n=new OffscreenCanvas(e,t),i=()=>n.getContext("2d",{...Q.canvasContextOptions,alpha:s});return Object.assign(n,{id:r,writeOutput:lr&&(d=>lr(n,d)),getCanvasContext:i,getImageData:()=>i().getImageData(0,0,e,t),putImageData:d=>i().putImageData(d,0,0)})},Vt=r=>new Promise(e=>{requestAnimationFrame(()=>{e(r())})});function Ao(r,e){const t=r.getBoundingClientRect(),s=e.getSettings();let{width:n,height:i,aspectRatio:a}=s;n||(n=i*a),i||(i=n*a);const o=Math.max(t.width/n,t.height/i),d=n*o,c=i*o;var l=(t.width-n*o)/2,u=(t.height-i*o)/2;return{boxWidth:d,boxHeight:c,frameWidth:n,frameHeight:i,offsetX:l,offsetY:u}}function $o(r,e){const t=Ao(r,e),{boxWidth:s,boxHeight:n,frameWidth:i,frameHeight:a,offsetX:o,offsetY:d}=t;if(!(s===0||Number.isNaN(s)))return Vt(()=>{const c=lt("scale",s,n);return c.getCanvasContext().drawImage(r,0,0,i,a,o,d,s,n),c})}function ur(r,e,t){return Vt(()=>{const s=lt(t?"grayscale-inverted":"grayscale",r.width*2,r.height*2);return s.getCanvasContext().filter=`grayscale() ${t?"invert()":""} contrast(4.5)`,s.getCanvasContext().drawImage(e,r.x,r.y,r.width,r.height,0,0,s.width,s.height),s})}function dr(r){return Vt(()=>{const e=lt(r.id.replace("grayscale","blur"),r.width,r.height);return e.getCanvasContext().filter=`blur(${Q.blurAmount}px)`,e.getCanvasContext().drawImage(r,0,0,r.width,r.height,0,0,e.width,e.height),e})}function vt(r,e,t,s){const i=r.width*4,a=t*4,o=s*i,d=a+o,[c,l,u,f]=r.data.slice(d,d+4),[m,g,h]=e.data.slice(d,d+4),b=fr(c,l,u)?1:0,y=fr(m,g,h)?2:0,M=b+y;return{r:c,g:l,b:u,a:f,x:t,y:s,abs:d,edgePixel:M,...{}}}function Eo(r,e){const t=r.getImageData(),s=e.getImageData();if(Number.isNaN(t.width)||t.width===0)return;const n={};return{width:t.width,height:t.height,size:t.data.length,pixel(i,a){return vt(t,s,i,a)},row(i){const a=Math.min(i,t.height);return{pixel:o=>vt(t,s,o,a)}},column(i){const a=Math.min(i,t.width);return{pixel:o=>vt(t,s,a,o)}},toIterable(i){const a=this.toIterableRaw(i);return Object.assign(a,{width:this.width,height:this.height,size:this.size,toArray:()=>Array.from(a),toPixelArray:()=>{const o=new Uint8ClampedArray(this.size);for(const d of a)o[d.abs+0]=d.r,o[d.abs+1]=d.g,o[d.abs+2]=d.b,o[d.abs+3]=d.a;return o}})},*toIterableRaw(i){for(let a=0;a<this.width;a++){const o=this.column(a);for(let d=0;d<this.height;d++){const c=o.pixel(d);yield i?{...c,...i(c)}:c}}},...n}}function fr(r,e,t){return!(r>160||r<50||e>160||e<50||t>160||t<50)}const Fo=({canvas:r,show:e})=>{if(!e)return;const t=Object.assign(document.createElement("canvas"),{id:r.id,width:r.width,height:r.height}),s=t.getContext("2d",{willReadFrequently:!0,alpha:!0});return ee(()=>{const n=r.getImageData();s.putImageData(n,0,0)}),t},Ro=({id:r,image:e,show:t})=>{if(!t)return;const s=Object.assign(document.createElement("canvas"),{id:r,width:e.width,height:e.height}),n=s.getContext("2d",{willReadFrequently:!0,alpha:!0});return ee(()=>{n.putImageData(e,0,0)}),s},[$t,Oo]=A({}),To=(r,e)=>Oo?.(t=>({...t,[e.id]:{canvas:e,show:r}})),Bo=()=>{const r=S(()=>Object.entries($t()).map(([e,{canvas:t,show:s}])=>v(Fo,{canvas:t,show:s})),()=>Object.keys($t()));return S(r)},[Et,Lo]=A({}),Zr=(r,e,t)=>Lo?.(s=>({...s,[e]:{image:t,show:r}})),qo=(r,e,t)=>Zr(r,e,new ImageData(t.toPixelArray(),t.width,t.height)),No=()=>{let r,e=!1;const t=Object.assign(document.createElement("div"),{id:"download-all",ondblclick:hr,ontouchend:()=>{e===!0&&hr(),clearTimeout(r),e=!0,r=setTimeout(()=>e=!1,500)}}),s=S(()=>Object.entries(Et()).map(([n,{image:i,show:a}])=>v(Ro,{id:n,image:i,show:a})),()=>Object.keys(Et()));return[S(s),t]},hr=async()=>{const r=Date.now();for(const{canvas:e}of Object.values($t()))await e.writeOutput?.(r);for(const[e,{image:t}]of Object.entries(Et())){const s=lt(e,t.width,t.height);s.putImageData(t),await s.writeOutput?.(r)}},Io=({edgePixel:r})=>r===1?{r:0,g:128,b:100,a:100}:r===2?{r:128,g:255,b:0,a:100}:r===3?{r:0,g:255,b:0,a:255}:{r:0,g:0,b:0,a:0},K=Q.debugEnabled()?{DebugCanvasDisplay:Bo,debugCanvas:To,DebugGridDisplay:No,debugImageData:Zr,debugGridPixels:qo,markLine:Io}:void 0;var Do=k("<div>"),jo=k("<div class=feedback>");const[Vo,ba]=A(""),[zo,va]=A(!1),[mr,Uo]=A(),gr=({videoElement:r})=>{const e=re();let t;async function s(){if(e.hasErrored())return;if(!e.hasPermission())return requestAnimationFrame(s);const n=await e.cameraStream();if(!n||!mr())return requestAnimationFrame(s);const i=mr().getBoundingClientRect();if(i.width===0||!r||r.getBoundingClientRect().width===0)return requestAnimationFrame(s);const a=n.getVideoTracks()[0];if(!a)return requestAnimationFrame(s);const o=await $o(r,a);if(!o)return requestAnimationFrame(s);K?.debugCanvas(Q.showScaleCanvas,o);const d=await Promise.all([ur(i,o,!1),ur(i,o,!0)]);K?.debugCanvas(Q.showGrayscaleImage,d[0]),K?.debugCanvas(Q.showGrayscaleImage,d[1]);const c=await Promise.all([dr(d[0]),dr(d[1])]);K?.debugCanvas(!1,c[0]),K?.debugCanvas(!1,c[1]);const l=Eo(c[0],c[1]);if(!l)return requestAnimationFrame(s);{const u=l.toIterable(K?.markLine);K?.debugGridPixels(Q.showOrientationLines,"edge",u)}t=setTimeout(()=>requestAnimationFrame(s),Q.sampleRate)}return te(async()=>{!e.hasPermission()||!e.camera()&&!await e.requestCamera()||(t=setTimeout(()=>requestAnimationFrame(s),Q.sampleRate))}),X(()=>{clearTimeout(t)}),[(()=>{var n=Do();return Pr(Uo,n),w(n,K&&v(K.DebugCanvasDisplay,{}),null),w(n,K&&v(K.DebugGridDisplay,{}),null),j(()=>it(n,zo()?"viewfinder scanning":"viewfinder")),n})(),(()=>{var n=jo();return w(n,Vo),n})()]};var Wo=k("<div class=camera-canvas>"),pr=k("<div class=video-overlay>"),Go=k('<div class="video-overlay debug">');const Ho=()=>{const[r,e]=A();return(()=>{var t=Wo();return w(t,v(Yr,{ref:e}),null),w(t,(()=>{var s=S(()=>!!Q.debugEnabled());return()=>s()?[pr(),(()=>{var n=Go();return w(n,v(gr,{get videoElement(){return r()}})),n})()]:(()=>{var n=pr();return w(n,v(gr,{get videoElement(){return r()}})),n})()})(),null),t})()};var Ko=k("<h1>"),yt=k("<p>"),Qo=k("<p><i>"),Jo=k(`<details><summary></summary><pre class=version> 
</pre><pre>`);const Xo=r=>{const{dictionary:e}=L(),[t,s]=A(),n="Application Version: 1.0.0-alpha.45",i=Array.from(n).fill("-").join(""),{Modal:a,showModal:o}=jt(),d=()=>(t()?.restore?.(),window.location.reload(),!1),c=f=>{s(f instanceof Error?f:new Error(f)),console.error("Uncaught application error",f);debugger;o()},l=f=>{const m=f.reason instanceof Error?f.reason:Object.assign(new Error(f.reason),{stack:f.promise.__creationPoint});c(m)},u=f=>c(f.error);return te(()=>{addEventListener("unhandledrejection",l),addEventListener("error",u)}),X(()=>{removeEventListener("unhandledrejection",l),removeEventListener("error",u)}),[v(ws,{fallback:(f,m)=>[],get children(){return G(()=>r.children)()}}),v(a,{class:"uncaught-error-modal",beforeClose:d,get children(){return[(()=>{var f=Ko();return w(f,()=>e().common.unhandledError.title),f})(),(()=>{var f=yt();return w(f,()=>e().common.unhandledError.explainer[0]),f})(),(()=>{var f=yt();return w(f,()=>e().common.unhandledError.explainer[1]),f})(),S(()=>S(()=>!!t())()&&[(()=>{var f=Jo(),m=f.firstChild,g=m.nextSibling,h=g.firstChild,b=g.nextSibling;return w(m,()=>e().common.unhandledError.details),w(g,n,h),w(g,i,null),w(b,()=>t().stack?.toString()??t().toString()),f})(),yt()]),(()=>{var f=Qo(),m=f.firstChild;return w(m,()=>e().common.unhandledError.explainer[2]),f})()]}})]},Yo="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M3%2018h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z'/%3e%3c/svg%3e",Zo={en:"English (en)",nl:"Nederlands (nl)"};var ea=k("<header><h1 class=logo><img><span>Guessify</span></h1><nav><button><img><span>Menu"),ta=k("<div class=menu><div class=details><h2 class=logo><img> <span>Guessify</span> <sub></sub></h2><hr>"),ra=k("<div class=camera-settings><p>"),sa=k("<div class=account-settings><p>Account: ");const na=()=>{const{Modal:r,showModal:e,closeModal:t}=jt();return te(async()=>{}),(()=>{var s=ea(),n=s.firstChild,i=n.firstChild,a=n.nextSibling,o=a.firstChild,d=o.firstChild;return O(i,"src",Te),_r(o,"click",e,!0),O(d,"src",Yo),w(s,v(r,{get children(){return v(ia,{closeModal:t})}}),null),s})()},ia=({closeModal:r})=>(()=>{var e=ta(),t=e.firstChild,s=t.firstChild,n=s.firstChild,i=n.nextSibling,a=i.nextSibling,o=a.nextSibling,d=o.nextSibling,c=s.nextSibling;return O(n,"src",Te),w(d,()=>"1.0.0-alpha.45"),w(t,v(oa,{}),c),w(t,v(aa,{}),c),w(t,v(ca,{closeModal:r}),null),w(t,v(la,{closeModal:r}),null),e})(),oa=()=>{const{locale:r,locales:e}=L(),t=e.map(n=>({id:n,text:Zo[n]})),s=Tr();return v(Jr,{value:r,options:()=>t,onChange:(n,i)=>{s("/"+i+"/")}})},aa=()=>{const{dictionary:r}=L();return v(ie,{disabled:!0,get text(){return r().common.share}})},ca=({closeModal:r})=>{const{camera:e,hasPermission:t,hasErrored:s}=re(),{dictionary:n,template:i}=L();return ee(()=>{(!t()||s())&&r()},[t,s]),(()=>{var a=ra(),o=a.firstChild;return w(o,()=>i(n().camera.selectedCamera,{label:e()?.label??"?"})),w(a,v(Xr,{}),null),a})()},la=({closeModal:r})=>{const{logOut:e,profile:t}=be(),{dictionary:s}=L();return(()=>{var n=sa(),i=n.firstChild;return i.firstChild,w(i,()=>t()?.display_name,null),w(n,v(ie,{get text(){return s().spotify.signOut},imageUrl:Qr,onClick:a=>{a.currentTarget.disabled=!0,r(),e()}}),null),n})()};nt(["click"]);var ua=k("<p>TODO, language selector <a href=/guessify/en/>English</a> / <a href=/guessify/nl/>Nederlands");const da=r=>v(Xo,{get children(){return v(_o,{get children(){return v(vi,{get children(){return G(()=>r.children)()}})}})}}),fa=()=>v(ki,{get children(){return v(Cn,{get children(){return v(Co,{get children(){return[v(na,{}),v(Ho,{})]}})}})}}),wr=()=>ua(),ha="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M16.24%207.76C15.07%206.59%2013.54%206%2012%206v6l-4.24%204.24c2.34%202.34%206.14%202.34%208.49%200%202.34-2.34%202.34-6.14-.01-8.48zM12%202C6.48%202%202%206.48%202%2012s4.48%2010%2010%2010%2010-4.48%2010-10S17.52%202%2012%202zm0%2018c-4.42%200-8-3.58-8-8s3.58-8%208-8%208%203.58%208%208-3.58%208-8%208z'/%3e%3c/svg%3e";var ma=k("<div class=auth><h1 class=logo><img> Guessify</h1><div class=details><p><img>");const ga=()=>{const r=Tr(),{handleAuthReturn:e}=ct(),t=at(),s=t?Tn(t).spotify.signingIn:"...";return ee(()=>{e().then(n=>{r(n,{replace:!0})})}),(()=>{var n=ma(),i=n.firstChild,a=i.firstChild,o=i.nextSibling,d=o.firstChild,c=d.firstChild;return O(a,"src",Te),O(c,"src",ha),w(d,s,null),n})()},pa=document.getElementById("root"),wa=r=>r.replace("/guessify/?","/guessify");globalThis.Promise=class extends Promise{constructor(){super(...arguments),this.__creationPoint=new Error().stack}};xs(()=>v(fn,{get base(){return"/guessify"},explicitLinks:!0,transformUrl:wa,root:da,get children(){return[v(Ve,{path:"/spotify-auth",component:ga}),v(Ve,{path:"/:locale/",component:fa}),v(Ve,{path:"/",component:wr}),v(Ve,{path:"*404",component:wr})]}}),pa);
