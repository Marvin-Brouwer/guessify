(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();const us=(r,e)=>r===e,tr=Symbol("solid-proxy"),ls=typeof Proxy=="function",kt={equals:us};let et=null,vn=Sn;const ke=1,_t=2,wn={owned:null,cleanups:null,context:null,owner:null};var T=null;let Gt=null,ds=null,U=null,se=null,we=null,Tt=0;function pr(r,e){const t=U,n=T,s=r.length===0,i=e===void 0?n:e,a=s?wn:{owned:null,cleanups:null,context:i?i.context:null,owner:i},o=s?r:()=>r(()=>me(()=>st(a)));T=a,U=null;try{return Oe(o,!0)}finally{U=t,T=n}}function q(r,e){e=e?Object.assign({},kt,e):kt;const t={value:r,observers:null,observerSlots:null,comparator:e.equals||void 0},n=s=>(typeof s=="function"&&(s=s(t.value)),bn(t,s));return[yn.bind(t),n]}function le(r,e,t){const n=Bt(r,e,!1,ke);dt(n)}function _e(r,e,t){vn=vs;const n=Bt(r,e,!1,ke);(!t||!t.render)&&(n.user=!0),we?we.push(n):dt(n)}function M(r,e,t){t=t?Object.assign({},kt,t):kt;const n=Bt(r,e,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=t.equals||void 0,dt(n),yn.bind(n)}function fs(r){return Oe(r,!1)}function me(r){if(U===null)return r();const e=U;U=null;try{return r()}finally{U=e}}function vr(r,e,t){const n=Array.isArray(r);let s,i=t&&t.defer;return a=>{let o;if(n){o=Array(r.length);for(let c=0;c<r.length;c++)o[c]=r[c]()}else o=r();if(i)return i=!1,a;const l=me(()=>e(o,s,a));return s=o,l}}function Pe(r){_e(()=>me(r))}function ye(r){return T===null||(T.cleanups===null?T.cleanups=[r]:T.cleanups.push(r)),r}function hs(r,e){et||(et=Symbol("error")),T=Bt(void 0,void 0,!0),T.context={...T.context,[et]:[e]};try{return r()}catch(t){ft(t)}finally{T=T.owner}}function wr(){return T}function yr(r,e){const t=T,n=U;T=r,U=null;try{return Oe(e,!0)}catch(s){ft(s)}finally{T=t,U=n}}function gs(r){const e=U,t=T;return Promise.resolve().then(()=>{U=e,T=t;let n;return Oe(r,!1),U=T=null,n?n.done:void 0})}function Xe(r,e){const t=Symbol("context");return{id:t,Provider:ys(t),defaultValue:r}}function Ke(r){let e;return T&&T.context&&(e=T.context[r.id])!==void 0?e:r.defaultValue}function pe(r){const e=M(r),t=M(()=>rr(e()));return t.toArray=()=>{const n=t();return Array.isArray(n)?n:n!=null?[n]:[]},t}function yn(){if(this.sources&&this.state)if(this.state===ke)dt(this);else{const r=se;se=null,Oe(()=>At(this),!1),se=r}if(U){const r=this.observers?this.observers.length:0;U.sources?(U.sources.push(this),U.sourceSlots.push(r)):(U.sources=[this],U.sourceSlots=[r]),this.observers?(this.observers.push(U),this.observerSlots.push(U.sources.length-1)):(this.observers=[U],this.observerSlots=[U.sources.length-1])}return this.value}function bn(r,e,t){let n=r.value;return(!r.comparator||!r.comparator(n,e))&&(r.value=e,r.observers&&r.observers.length&&Oe(()=>{for(let s=0;s<r.observers.length;s+=1){const i=r.observers[s],a=Gt&&Gt.running;a&&Gt.disposed.has(i),(a?!i.tState:!i.state)&&(i.pure?se.push(i):we.push(i),i.observers&&Mn(i)),a||(i.state=ke)}if(se.length>1e6)throw se=[],new Error},!1)),e}function dt(r){if(!r.fn)return;st(r);const e=Tt;ms(r,r.value,e)}function ms(r,e,t){let n;const s=T,i=U;U=T=r;try{n=r.fn(e)}catch(a){return r.pure&&(r.state=ke,r.owned&&r.owned.forEach(st),r.owned=null),r.updatedAt=t+1,ft(a)}finally{U=i,T=s}(!r.updatedAt||r.updatedAt<=t)&&(r.updatedAt!=null&&"observers"in r?bn(r,n):r.value=n,r.updatedAt=t)}function Bt(r,e,t,n=ke,s){const i={fn:r,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:T,context:T?T.context:null,pure:t};return T===null||T!==wn&&(T.owned?T.owned.push(i):T.owned=[i]),i}function Pt(r){if(r.state===0)return;if(r.state===_t)return At(r);if(r.suspense&&me(r.suspense.inFallback))return r.suspense.effects.push(r);const e=[r];for(;(r=r.owner)&&(!r.updatedAt||r.updatedAt<Tt);)r.state&&e.push(r);for(let t=e.length-1;t>=0;t--)if(r=e[t],r.state===ke)dt(r);else if(r.state===_t){const n=se;se=null,Oe(()=>At(r,e[0]),!1),se=n}}function Oe(r,e){if(se)return r();let t=!1;e||(se=[]),we?t=!0:we=[],Tt++;try{const n=r();return ps(t),n}catch(n){t||(we=null),se=null,ft(n)}}function ps(r){if(se&&(Sn(se),se=null),r)return;const e=we;we=null,e.length&&Oe(()=>vn(e),!1)}function Sn(r){for(let e=0;e<r.length;e++)Pt(r[e])}function vs(r){let e,t=0;for(e=0;e<r.length;e++){const n=r[e];n.user?r[t++]=n:Pt(n)}for(e=0;e<t;e++)Pt(r[e])}function At(r,e){r.state=0;for(let t=0;t<r.sources.length;t+=1){const n=r.sources[t];if(n.sources){const s=n.state;s===ke?n!==e&&(!n.updatedAt||n.updatedAt<Tt)&&Pt(n):s===_t&&At(n,e)}}}function Mn(r){for(let e=0;e<r.observers.length;e+=1){const t=r.observers[e];t.state||(t.state=_t,t.pure?se.push(t):we.push(t),t.observers&&Mn(t))}}function st(r){let e;if(r.sources)for(;r.sources.length;){const t=r.sources.pop(),n=r.sourceSlots.pop(),s=t.observers;if(s&&s.length){const i=s.pop(),a=t.observerSlots.pop();n<s.length&&(i.sourceSlots[a]=n,s[n]=i,t.observerSlots[n]=a)}}if(r.tOwned){for(e=r.tOwned.length-1;e>=0;e--)st(r.tOwned[e]);delete r.tOwned}if(r.owned){for(e=r.owned.length-1;e>=0;e--)st(r.owned[e]);r.owned=null}if(r.cleanups){for(e=r.cleanups.length-1;e>=0;e--)r.cleanups[e]();r.cleanups=null}r.state=0}function ws(r){return r instanceof Error?r:new Error(typeof r=="string"?r:"Unknown error",{cause:r})}function Nr(r,e,t){try{for(const n of e)n(r)}catch(n){ft(n,t&&t.owner||null)}}function ft(r,e=T){const t=et&&e&&e.context&&e.context[et],n=ws(r);if(!t)throw n;we?we.push({fn(){Nr(n,t,e)},state:ke}):Nr(n,t,e)}function rr(r){if(typeof r=="function"&&!r.length)return rr(r());if(Array.isArray(r)){const e=[];for(let t=0;t<r.length;t++){const n=rr(r[t]);Array.isArray(n)?e.push.apply(e,n):e.push(n)}return e}return r}function ys(r,e){return function(n){let s;return le(()=>s=me(()=>(T.context={...T.context,[r]:n.value},pe(()=>n.children))),void 0),s}}function b(r,e){return me(()=>r(e||{}))}function gt(){return!0}const bs={get(r,e,t){return e===tr?t:r.get(e)},has(r,e){return e===tr?!0:r.has(e)},set:gt,deleteProperty:gt,getOwnPropertyDescriptor(r,e){return{configurable:!0,enumerable:!0,get(){return r.get(e)},set:gt,deleteProperty:gt}},ownKeys(r){return r.keys()}};function Ht(r){return(r=typeof r=="function"?r():r)?r:{}}function Ss(){for(let r=0,e=this.length;r<e;++r){const t=this[r]();if(t!==void 0)return t}}function Ms(...r){let e=!1;for(let a=0;a<r.length;a++){const o=r[a];e=e||!!o&&tr in o,r[a]=typeof o=="function"?(e=!0,M(o)):o}if(ls&&e)return new Proxy({get(a){for(let o=r.length-1;o>=0;o--){const l=Ht(r[o])[a];if(l!==void 0)return l}},has(a){for(let o=r.length-1;o>=0;o--)if(a in Ht(r[o]))return!0;return!1},keys(){const a=[];for(let o=0;o<r.length;o++)a.push(...Object.keys(Ht(r[o])));return[...new Set(a)]}},bs);const t={},n=Object.create(null);for(let a=r.length-1;a>=0;a--){const o=r[a];if(!o)continue;const l=Object.getOwnPropertyNames(o);for(let c=l.length-1;c>=0;c--){const u=l[c];if(u==="__proto__"||u==="constructor")continue;const d=Object.getOwnPropertyDescriptor(o,u);if(!n[u])n[u]=d.get?{enumerable:!0,configurable:!0,get:Ss.bind(t[u]=[d.get.bind(o)])}:d.value!==void 0?d:void 0;else{const f=t[u];f&&(d.get?f.push(d.get.bind(o)):d.value!==void 0&&f.push(()=>d.value))}}}const s={},i=Object.keys(n);for(let a=i.length-1;a>=0;a--){const o=i[a],l=n[o];l&&l.get?Object.defineProperty(s,o,l):s[o]=l?l.value:void 0}return s}const xs=r=>`Stale read from <${r}>.`;function Be(r){const e=r.keyed,t=M(()=>r.when,void 0,{equals:(n,s)=>e?n===s:!n==!s});return M(()=>{const n=t();if(n){const s=r.children;return typeof s=="function"&&s.length>0?me(()=>s(e?n:()=>{if(!me(t))throw xs("Show");return r.when})):s}return r.fallback},void 0,void 0)}let Ue;function ks(){Ue&&[...Ue].forEach(r=>r())}function _s(r){let e;const[t,n]=q(e,void 0);return Ue||(Ue=new Set),Ue.add(n),ye(()=>Ue.delete(n)),M(()=>{let s;if(s=t()){const i=r.fallback;return typeof i=="function"&&i.length?me(()=>i(s,()=>n())):i}return hs(()=>r.children,n)},void 0,void 0)}const Ps=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],As=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...Ps]),Cs=new Set(["innerHTML","textContent","innerText","children"]),Es=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),$s=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function Fs(r,e){const t=$s[r];return typeof t=="object"?t[e]?t.$:void 0:t}const Rs=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]);function Os(r,e,t){let n=t.length,s=e.length,i=n,a=0,o=0,l=e[s-1].nextSibling,c=null;for(;a<s||o<i;){if(e[a]===t[o]){a++,o++;continue}for(;e[s-1]===t[i-1];)s--,i--;if(s===a){const u=i<n?o?t[o-1].nextSibling:t[i-o]:l;for(;o<i;)r.insertBefore(t[o++],u)}else if(i===o)for(;a<s;)(!c||!c.has(e[a]))&&e[a].remove(),a++;else if(e[a]===t[i-1]&&t[o]===e[s-1]){const u=e[--s].nextSibling;r.insertBefore(t[o++],e[a++].nextSibling),r.insertBefore(t[--i],u),e[s]=t[i]}else{if(!c){c=new Map;let d=o;for(;d<i;)c.set(t[d],d++)}const u=c.get(e[a]);if(u!=null)if(o<u&&u<i){let d=a,f=1,g;for(;++d<s&&d<i&&!((g=c.get(e[d]))==null||g!==u+f);)f++;if(f>u-o){const m=e[a];for(;o<u;)r.insertBefore(t[o++],m)}else r.replaceChild(t[o++],e[a++])}else a++;else e[a++].remove()}}}const Lr="_$DX_DELEGATE";function Ts(r,e,t,n={}){let s;return pr(i=>{s=i,e===document?r():w(e,r(),e.firstChild?null:void 0,t)},n.owner),()=>{s(),e.textContent=""}}function k(r,e,t){let n;const s=()=>{const a=document.createElement("template");return a.innerHTML=r,a.content.firstChild},i=()=>(n||(n=s())).cloneNode(!0);return i.cloneNode=i,i}function Nt(r,e=window.document){const t=e[Lr]||(e[Lr]=new Set);for(let n=0,s=r.length;n<s;n++){const i=r[n];t.has(i)||(t.add(i),e.addEventListener(i,Us))}}function J(r,e,t){t==null?r.removeAttribute(e):r.setAttribute(e,t)}function Bs(r,e,t){t?r.setAttribute(e,""):r.removeAttribute(e)}function Lt(r,e){e==null?r.removeAttribute("class"):r.className=e}function xn(r,e,t,n){if(n)Array.isArray(t)?(r[`$$${e}`]=t[0],r[`$$${e}Data`]=t[1]):r[`$$${e}`]=t;else if(Array.isArray(t)){const s=t[0];r.addEventListener(e,t[0]=i=>s.call(r,t[1],i))}else r.addEventListener(e,t,typeof t!="function"&&t)}function Ns(r,e,t={}){const n=Object.keys(e||{}),s=Object.keys(t);let i,a;for(i=0,a=s.length;i<a;i++){const o=s[i];!o||o==="undefined"||e[o]||(qr(r,o,!1),delete t[o])}for(i=0,a=n.length;i<a;i++){const o=n[i],l=!!e[o];!o||o==="undefined"||t[o]===l||!l||(qr(r,o,!0),t[o]=l)}return t}function Ls(r,e,t){if(!e)return t?J(r,"style"):e;const n=r.style;if(typeof e=="string")return n.cssText=e;typeof t=="string"&&(n.cssText=t=void 0),t||(t={}),e||(e={});let s,i;for(i in t)e[i]==null&&n.removeProperty(i),delete t[i];for(i in e)s=e[i],s!==t[i]&&(n.setProperty(i,s),t[i]=s);return t}function qs(r,e={},t,n){const s={};return le(()=>typeof e.ref=="function"&&kn(e.ref,r)),le(()=>Is(r,e,t,!0,s,!0)),s}function kn(r,e,t){return me(()=>r(e,t))}function w(r,e,t,n){if(t!==void 0&&!n&&(n=[]),typeof e!="function")return Ct(r,e,n,t);le(s=>Ct(r,e(),s,t),n)}function Is(r,e,t,n,s={},i=!1){e||(e={});for(const a in s)if(!(a in e)){if(a==="children")continue;s[a]=Ir(r,a,null,s[a],t,i,e)}for(const a in e){if(a==="children")continue;const o=e[a];s[a]=Ir(r,a,o,s[a],t,i,e)}}function Ds(r){return r.toLowerCase().replace(/-([a-z])/g,(e,t)=>t.toUpperCase())}function qr(r,e,t){const n=e.trim().split(/\s+/);for(let s=0,i=n.length;s<i;s++)r.classList.toggle(n[s],t)}function Ir(r,e,t,n,s,i,a){let o,l,c,u,d;if(e==="style")return Ls(r,t,n);if(e==="classList")return Ns(r,t,n);if(t===n)return n;if(e==="ref")i||t(r);else if(e.slice(0,3)==="on:"){const f=e.slice(3);n&&r.removeEventListener(f,n,typeof n!="function"&&n),t&&r.addEventListener(f,t,typeof t!="function"&&t)}else if(e.slice(0,10)==="oncapture:"){const f=e.slice(10);n&&r.removeEventListener(f,n,!0),t&&r.addEventListener(f,t,!0)}else if(e.slice(0,2)==="on"){const f=e.slice(2).toLowerCase(),g=Rs.has(f);if(!g&&n){const m=Array.isArray(n)?n[0]:n;r.removeEventListener(f,m)}(g||t)&&(xn(r,f,t,g),g&&Nt([f]))}else e.slice(0,5)==="attr:"?J(r,e.slice(5),t):e.slice(0,5)==="bool:"?Bs(r,e.slice(5),t):(d=e.slice(0,5)==="prop:")||(c=Cs.has(e))||(u=Fs(e,r.tagName))||(l=As.has(e))||(o=r.nodeName.includes("-")||"is"in a)?(d&&(e=e.slice(5),l=!0),e==="class"||e==="className"?Lt(r,t):o&&!l&&!c?r[Ds(e)]=t:r[u||e]=t):J(r,Es[e]||e,t);return t}function Us(r){let e=r.target;const t=`$$${r.type}`,n=r.target,s=r.currentTarget,i=l=>Object.defineProperty(r,"target",{configurable:!0,value:l}),a=()=>{const l=e[t];if(l&&!e.disabled){const c=e[`${t}Data`];if(c!==void 0?l.call(e,c,r):l.call(e,r),r.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(r.target)&&i(e.host),!0},o=()=>{for(;a()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(r,"currentTarget",{configurable:!0,get(){return e||document}}),r.composedPath){const l=r.composedPath();i(l[0]);for(let c=0;c<l.length-2&&(e=l[c],!!a());c++){if(e._$host){e=e._$host,o();break}if(e.parentNode===s)break}}else o();i(n)}function Ct(r,e,t,n,s){for(;typeof t=="function";)t=t();if(e===t)return t;const i=typeof e,a=n!==void 0;if(r=a&&t[0]&&t[0].parentNode||r,i==="string"||i==="number"){if(i==="number"&&(e=e.toString(),e===t))return t;if(a){let o=t[0];o&&o.nodeType===3?o.data!==e&&(o.data=e):o=document.createTextNode(e),t=qe(r,t,n,o)}else t!==""&&typeof t=="string"?t=r.firstChild.data=e:t=r.textContent=e}else if(e==null||i==="boolean")t=qe(r,t,n);else{if(i==="function")return le(()=>{let o=e();for(;typeof o=="function";)o=o();t=Ct(r,o,t,n)}),()=>t;if(Array.isArray(e)){const o=[],l=t&&Array.isArray(t);if(nr(o,e,t,s))return le(()=>t=Ct(r,o,t,n,!0)),()=>t;if(o.length===0){if(t=qe(r,t,n),a)return t}else l?t.length===0?Dr(r,o,n):Os(r,t,o):(t&&qe(r),Dr(r,o));t=o}else if(e.nodeType){if(Array.isArray(t)){if(a)return t=qe(r,t,n,e);qe(r,t,null,e)}else t==null||t===""||!r.firstChild?r.appendChild(e):r.replaceChild(e,r.firstChild);t=e}}return t}function nr(r,e,t,n){let s=!1;for(let i=0,a=e.length;i<a;i++){let o=e[i],l=t&&t[r.length],c;if(!(o==null||o===!0||o===!1))if((c=typeof o)=="object"&&o.nodeType)r.push(o);else if(Array.isArray(o))s=nr(r,o,l)||s;else if(c==="function")if(n){for(;typeof o=="function";)o=o();s=nr(r,Array.isArray(o)?o:[o],Array.isArray(l)?l:[l])||s}else r.push(o),s=!0;else{const u=String(o);l&&l.nodeType===3&&l.data===u?r.push(l):r.push(document.createTextNode(u))}}return s}function Dr(r,e,t=null){for(let n=0,s=e.length;n<s;n++)r.insertBefore(e[n],t)}function qe(r,e,t,n){if(t===void 0)return r.textContent="";const s=n||document.createTextNode("");if(e.length){let i=!1;for(let a=e.length-1;a>=0;a--){const o=e[a];if(s!==o){const l=o.parentNode===r;!i&&!a?l?r.replaceChild(s,o):r.insertBefore(s,t):l&&o.remove()}else i=!0}}else r.insertBefore(s,t);return[s]}const zs=()=>{},_n=!1,js="http://www.w3.org/2000/svg";function Vs(r,e=!1){return e?document.createElementNS(js,r):document.createElement(r)}function Ws(r){const{useShadow:e}=r,t=document.createTextNode(""),n=()=>r.mount||document.body,s=wr();let i;return _e(()=>{i||(i=yr(s,()=>M(()=>r.children)));const a=n();if(a instanceof HTMLHeadElement){const[o,l]=q(!1),c=()=>l(!0);pr(u=>w(a,()=>o()?u():i(),null)),ye(c)}else{const o=Vs(r.isSVG?"g":"div",r.isSVG),l=e&&o.attachShadow?o.attachShadow({mode:"open"}):o;Object.defineProperty(o,"_$host",{get(){return t.parentNode},configurable:!0}),w(l,i),a.appendChild(o),r.ref&&r.ref(o),ye(()=>a.removeChild(o))}},void 0,{render:!0}),t}function Pn(){let r=new Set;function e(s){return r.add(s),()=>r.delete(s)}let t=!1;function n(s,i){if(t)return!(t=!1);const a={to:s,options:i,defaultPrevented:!1,preventDefault:()=>a.defaultPrevented=!0};for(const o of r)o.listener({...a,from:o.location,retry:l=>{l&&(t=!0),o.navigate(s,{...i,resolve:!1})}});return!a.defaultPrevented}return{subscribe:e,confirm:n}}let sr;function br(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),sr=window.history.state._depth}br();function Gs(r){return{...r,_depth:window.history.state&&window.history.state._depth}}function Hs(r,e){let t=!1;return()=>{const n=sr;br();const s=n==null?null:sr-n;if(t){t=!1;return}s&&e(s)?(t=!0,window.history.go(-s)):r()}}const Ys=/^(?:[a-z0-9]+:)?\/\//i,Xs=/^\/+|(\/)\/+$/g,An="http://sr";function tt(r,e=!1){const t=r.replace(Xs,"$1");return t?e||/^[?#]/.test(t)?t:"/"+t:""}function bt(r,e,t){if(Ys.test(e))return;const n=tt(r),s=t&&tt(t);let i="";return!s||e.startsWith("/")?i=n:s.toLowerCase().indexOf(n.toLowerCase())!==0?i=n+s:i=s,(i||"/")+tt(e,!i)}function Ks(r,e){if(r==null)throw new Error(e);return r}function Qs(r,e){return tt(r).replace(/\/*(\*.*)?$/g,"")+tt(e)}function Cn(r){const e={};return r.searchParams.forEach((t,n)=>{n in e?Array.isArray(e[n])?e[n].push(t):e[n]=[e[n],t]:e[n]=t}),e}function Js(r,e,t){const[n,s]=r.split("/*",2),i=n.split("/").filter(Boolean),a=i.length;return o=>{const l=o.split("/").filter(Boolean),c=l.length-a;if(c<0||c>0&&s===void 0&&!e)return null;const u={path:a?"":"/",params:{}},d=f=>t===void 0?void 0:t[f];for(let f=0;f<a;f++){const g=i[f],m=g[0]===":",h=m?l[f]:l[f].toLowerCase(),p=m?g.slice(1):g.toLowerCase();if(m&&Yt(h,d(p)))u.params[p]=h;else if(m||!Yt(h,p))return null;u.path+=`/${h}`}if(s){const f=c?l.slice(-c).join("/"):"";if(Yt(f,d(s)))u.params[s]=f;else return null}return u}}function Yt(r,e){const t=n=>n===r;return e===void 0?!0:typeof e=="string"?t(e):typeof e=="function"?e(r):Array.isArray(e)?e.some(t):e instanceof RegExp?e.test(r):!1}function Zs(r){const[e,t]=r.pattern.split("/*",2),n=e.split("/").filter(Boolean);return n.reduce((s,i)=>s+(i.startsWith(":")?2:3),n.length-(t===void 0?0:1))}function En(r){const e=new Map,t=wr();return new Proxy({},{get(n,s){return e.has(s)||yr(t,()=>e.set(s,M(()=>r()[s]))),e.get(s)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(r())}})}function $n(r){let e=/(\/?\:[^\/]+)\?/.exec(r);if(!e)return[r];let t=r.slice(0,e.index),n=r.slice(e.index+e[0].length);const s=[t,t+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(n);)s.push(t+=e[1]),n=n.slice(e[0].length);return $n(n).reduce((i,a)=>[...i,...s.map(o=>o+a)],[])}const ei=100,Fn=Xe(),Rn=Xe(),Sr=()=>Ks(Ke(Fn),"<A> and 'use' router primitives can be only used inside a Route."),ti=r=>{const e=Sr();return M(()=>{const t=r();return t!==void 0?e.renderPath(t):t})},On=()=>Sr().navigatorFactory(),ri=()=>Sr().params;function ni(r,e=""){const{component:t,preload:n,load:s,children:i,info:a}=r,o=!i||Array.isArray(i)&&!i.length,l={key:r,component:t,preload:n||s,info:a};return Tn(r.path).reduce((c,u)=>{for(const d of $n(u)){const f=Qs(e,d);let g=o?f:f.split("/*",1)[0];g=g.split("/").map(m=>m.startsWith(":")||m.startsWith("*")?m:encodeURIComponent(m)).join("/"),c.push({...l,originalPath:u,pattern:g,matcher:Js(g,!o,r.matchFilters)})}return c},[])}function si(r,e=0){return{routes:r,score:Zs(r[r.length-1])*1e4-e,matcher(t){const n=[];for(let s=r.length-1;s>=0;s--){const i=r[s],a=i.matcher(t);if(!a)return null;n.unshift({...a,route:i})}return n}}}function Tn(r){return Array.isArray(r)?r:[r]}function Bn(r,e="",t=[],n=[]){const s=Tn(r);for(let i=0,a=s.length;i<a;i++){const o=s[i];if(o&&typeof o=="object"){o.hasOwnProperty("path")||(o.path="");const l=ni(o,e);for(const c of l){t.push(c);const u=Array.isArray(o.children)&&o.children.length===0;if(o.children&&!u)Bn(o.children,c.pattern,t,n);else{const d=si([...t],n.length);n.push(d)}t.pop()}}}return t.length?n:n.sort((i,a)=>a.score-i.score)}function Xt(r,e){for(let t=0,n=r.length;t<n;t++){const s=r[t].matcher(e);if(s)return s}return[]}function ii(r,e,t){const n=new URL(An),s=M(u=>{const d=r();try{return new URL(d,n)}catch{return console.error(`Invalid path ${d}`),u}},n,{equals:(u,d)=>u.href===d.href}),i=M(()=>s().pathname),a=M(()=>s().search,!0),o=M(()=>s().hash),l=()=>"",c=vr(a,()=>Cn(s()));return{get pathname(){return i()},get search(){return a()},get hash(){return o()},get state(){return e()},get key(){return l()},query:t?t(c):En(c)}}let Te;function ai(){return Te}function oi(r,e,t,n={}){const{signal:[s,i],utils:a={}}=r,o=a.parsePath||(_=>_),l=a.renderPath||(_=>_),c=a.beforeLeave||Pn(),u=bt("",n.base||"");if(u===void 0)throw new Error(`${u} is not a valid base path`);u&&!s().value&&i({value:u,replace:!0,scroll:!1});const[d,f]=q(!1);let g;const m=(_,A)=>{A.value===h()&&A.state===y()||(g===void 0&&f(!0),Te=_,g=A,gs(()=>{g===A&&(p(g.value),S(g.state),ks(),B[1](O=>O.filter(F=>F.pending)))}).finally(()=>{g===A&&fs(()=>{Te=void 0,_==="navigate"&&D(g),f(!1),g=void 0})}))},[h,p]=q(s().value),[y,S]=q(s().state),$=ii(h,y,a.queryWrapper),x=[],B=q([]),E=M(()=>typeof n.transformUrl=="function"?Xt(e(),n.transformUrl($.pathname)):Xt(e(),$.pathname)),N=()=>{const _=E(),A={};for(let O=0;O<_.length;O++)Object.assign(A,_[O].params);return A},C=a.paramsWrapper?a.paramsWrapper(N,e):En(N),P={pattern:u,path:()=>u,outlet:()=>null,resolvePath(_){return bt(u,_)}};return le(vr(s,_=>m("native",_),{defer:!0})),{base:P,location:$,params:C,isRouting:d,renderPath:l,parsePath:o,navigatorFactory:j,matches:E,beforeLeave:c,preloadRoute:ae,singleFlight:n.singleFlight===void 0?!0:n.singleFlight,submissions:B};function I(_,A,O){me(()=>{if(typeof A=="number"){A&&(a.go?a.go(A):console.warn("Router integration does not support relative routing"));return}const F=!A||A[0]==="?",{replace:G,resolve:W,scroll:ve,state:X}={replace:!1,resolve:!F,scroll:!0,...O},oe=W?_.resolvePath(A):bt(F&&$.pathname||"",A);if(oe===void 0)throw new Error(`Path '${A}' is not a routable path`);if(x.length>=ei)throw new Error("Too many redirects");const fe=h();(oe!==fe||X!==y())&&(_n||c.confirm(oe,O)&&(x.push({value:fe,replace:G,scroll:ve,state:y()}),m("navigate",{value:oe,state:X})))})}function j(_){return _=_||Ke(Rn)||P,(A,O)=>I(_,A,O)}function D(_){const A=x[0];A&&(i({..._,replace:A.replace,scroll:A.scroll}),x.length=0)}function ae(_,A){const O=Xt(e(),_.pathname),F=Te;Te="preload";for(let G in O){const{route:W,params:ve}=O[G];W.component&&W.component.preload&&W.component.preload();const{preload:X}=W;A&&X&&yr(t(),()=>X({params:ve,location:{pathname:_.pathname,search:_.search,hash:_.hash,query:Cn(_),state:null,key:""},intent:"preload"}))}Te=F}}function ci(r,e,t,n){const{base:s,location:i,params:a}=r,{pattern:o,component:l,preload:c}=n().route,u=M(()=>n().path);l&&l.preload&&l.preload();const d=c?c({params:a,location:i,intent:Te||"initial"}):void 0;return{parent:e,pattern:o,path:u,outlet:()=>l?b(l,{params:a,location:i,data:d,get children(){return t()}}):t(),resolvePath(g){return bt(s.path(),g,u())}}}const Nn=r=>e=>{const{base:t}=e,n=pe(()=>e.children),s=M(()=>Bn(n(),e.base||""));let i;const a=oi(r,s,()=>i,{base:t,singleFlight:e.singleFlight,transformUrl:e.transformUrl});return r.create&&r.create(a),b(Fn.Provider,{value:a,get children(){return b(ui,{routerState:a,get root(){return e.root},get preload(){return e.rootPreload||e.rootLoad},get children(){return[M(()=>(i=wr())&&null),b(li,{routerState:a,get branches(){return s()}})]}})}})};function ui(r){const e=r.routerState.location,t=r.routerState.params,n=M(()=>r.preload&&me(()=>{r.preload({params:t,location:e,intent:ai()||"initial"})}));return b(Be,{get when(){return r.root},keyed:!0,get fallback(){return r.children},children:s=>b(s,{params:t,location:e,get data(){return n()},get children(){return r.children}})})}function li(r){const e=[];let t;const n=M(vr(r.routerState.matches,(s,i,a)=>{let o=i&&s.length===i.length;const l=[];for(let c=0,u=s.length;c<u;c++){const d=i&&i[c],f=s[c];a&&d&&f.route.key===d.route.key?l[c]=a[c]:(o=!1,e[c]&&e[c](),pr(g=>{e[c]=g,l[c]=ci(r.routerState,l[c-1]||r.routerState.base,Ur(()=>n()[c+1]),()=>r.routerState.matches()[c])}))}return e.splice(s.length).forEach(c=>c()),a&&o?a:(t=l[0],l)}));return Ur(()=>n()&&t)()}const Ur=r=>()=>b(Be,{get when(){return r()},keyed:!0,children:e=>b(Rn.Provider,{value:e,get children(){return e.outlet()}})}),mt=r=>{const e=pe(()=>r.children);return Ms(r,{get children(){return e()}})};function di([r,e],t,n){return[r,s=>e(n(s))]}function fi(r){let e=!1;const t=s=>typeof s=="string"?{value:s}:s,n=di(q(t(r.get()),{equals:(s,i)=>s.value===i.value&&s.state===i.state}),void 0,s=>(!e&&r.set(s),s));return r.init&&ye(r.init((s=r.get())=>{e=!0,n[1](t(s)),e=!1})),Nn({signal:n,create:r.create,utils:r.utils})}function hi(r,e,t){return r.addEventListener(e,t),()=>r.removeEventListener(e,t)}function gi(r,e){const t=r&&document.getElementById(r);t?t.scrollIntoView():e&&window.scrollTo(0,0)}function mi(r){const e=new URL(r);return e.pathname+e.search}function pi(r){let e;const t={value:r.url||(e=zs())&&mi(e.request.url)||""};return Nn({signal:[()=>t,n=>Object.assign(t,n)]})(r)}const vi=new Map;function wi(r=!0,e=!1,t="/_server",n){return s=>{const i=s.base.path(),a=s.navigatorFactory(s.base);let o,l;function c(h){return h.namespaceURI==="http://www.w3.org/2000/svg"}function u(h){if(h.defaultPrevented||h.button!==0||h.metaKey||h.altKey||h.ctrlKey||h.shiftKey)return;const p=h.composedPath().find(E=>E instanceof Node&&E.nodeName.toUpperCase()==="A");if(!p||e&&!p.hasAttribute("link"))return;const y=c(p),S=y?p.href.baseVal:p.href;if((y?p.target.baseVal:p.target)||!S&&!p.hasAttribute("state"))return;const x=(p.getAttribute("rel")||"").split(/\s+/);if(p.hasAttribute("download")||x&&x.includes("external"))return;const B=y?new URL(S,document.baseURI):new URL(S);if(!(B.origin!==window.location.origin||i&&B.pathname&&!B.pathname.toLowerCase().startsWith(i.toLowerCase())))return[p,B]}function d(h){const p=u(h);if(!p)return;const[y,S]=p,$=s.parsePath(S.pathname+S.search+S.hash),x=y.getAttribute("state");h.preventDefault(),a($,{resolve:!1,replace:y.hasAttribute("replace"),scroll:!y.hasAttribute("noscroll"),state:x?JSON.parse(x):void 0})}function f(h){const p=u(h);if(!p)return;const[y,S]=p;n&&(S.pathname=n(S.pathname)),s.preloadRoute(S,y.getAttribute("preload")!=="false")}function g(h){clearTimeout(o);const p=u(h);if(!p)return l=null;const[y,S]=p;l!==y&&(n&&(S.pathname=n(S.pathname)),o=setTimeout(()=>{s.preloadRoute(S,y.getAttribute("preload")!=="false"),l=y},20))}function m(h){if(h.defaultPrevented)return;let p=h.submitter&&h.submitter.hasAttribute("formaction")?h.submitter.getAttribute("formaction"):h.target.getAttribute("action");if(!p)return;if(!p.startsWith("https://action/")){const S=new URL(p,An);if(p=s.parsePath(S.pathname+S.search),!p.startsWith(t))return}if(h.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const y=vi.get(p);if(y){h.preventDefault();const S=new FormData(h.target,h.submitter);y.call({r:s,f:h.target},h.target.enctype==="multipart/form-data"?S:new URLSearchParams(S))}}Nt(["click","submit"]),document.addEventListener("click",d),r&&(document.addEventListener("mousemove",g,{passive:!0}),document.addEventListener("focusin",f,{passive:!0}),document.addEventListener("touchstart",f,{passive:!0})),document.addEventListener("submit",m),ye(()=>{document.removeEventListener("click",d),r&&(document.removeEventListener("mousemove",g),document.removeEventListener("focusin",f),document.removeEventListener("touchstart",f)),document.removeEventListener("submit",m)})}}function yi(r){if(_n)return pi(r);const e=()=>{const n=window.location.pathname.replace(/^\/+/,"/")+window.location.search,s=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:n+window.location.hash,state:s}},t=Pn();return fi({get:e,set({value:n,replace:s,scroll:i,state:a}){s?window.history.replaceState(Gs(a),"",n):window.history.pushState(a,"",n),gi(decodeURIComponent(window.location.hash.slice(1)),i),br()},init:n=>hi(window,"popstate",Hs(n,s=>{if(s&&s<0)return!t.confirm(s);{const i=e();return!t.confirm(i.value,{state:i.state})}})),create:wi(r.preload,r.explicitLinks,r.actionBase,r.transformUrl),utils:{go:n=>window.history.go(n),beforeLeave:t}})(r)}var Kt={},pt={},St={exports:{}},bi=St.exports,zr;function Si(){return zr||(zr=1,function(r,e){(function(t,n){r.exports=n()})(bi,function(){return function(t){var n={};function s(i){if(n[i])return n[i].exports;var a=n[i]={i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,s),a.l=!0,a.exports}return s.m=t,s.c=n,s.d=function(i,a,o){s.o(i,a)||Object.defineProperty(i,a,{enumerable:!0,get:o})},s.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},s.t=function(i,a){if(1&a&&(i=s(i)),8&a||4&a&&typeof i=="object"&&i&&i.__esModule)return i;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:i}),2&a&&typeof i!="string")for(var l in i)s.d(o,l,function(c){return i[c]}.bind(null,l));return o},s.n=function(i){var a=i&&i.__esModule?function(){return i.default}:function(){return i};return s.d(a,"a",a),a},s.o=function(i,a){return Object.prototype.hasOwnProperty.call(i,a)},s.p="",s(s.s=90)}({17:function(t,n,s){n.__esModule=!0,n.default=void 0;var i=s(18),a=function(){function o(){}return o.getFirstMatch=function(l,c){var u=c.match(l);return u&&u.length>0&&u[1]||""},o.getSecondMatch=function(l,c){var u=c.match(l);return u&&u.length>1&&u[2]||""},o.matchAndReturnConst=function(l,c,u){if(l.test(c))return u},o.getWindowsVersionName=function(l){switch(l){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},o.getMacOSVersionName=function(l){var c=l.split(".").splice(0,2).map(function(u){return parseInt(u,10)||0});if(c.push(0),c[0]===10)switch(c[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},o.getAndroidVersionName=function(l){var c=l.split(".").splice(0,2).map(function(u){return parseInt(u,10)||0});if(c.push(0),!(c[0]===1&&c[1]<5))return c[0]===1&&c[1]<6?"Cupcake":c[0]===1&&c[1]>=6?"Donut":c[0]===2&&c[1]<2?"Eclair":c[0]===2&&c[1]===2?"Froyo":c[0]===2&&c[1]>2?"Gingerbread":c[0]===3?"Honeycomb":c[0]===4&&c[1]<1?"Ice Cream Sandwich":c[0]===4&&c[1]<4?"Jelly Bean":c[0]===4&&c[1]>=4?"KitKat":c[0]===5?"Lollipop":c[0]===6?"Marshmallow":c[0]===7?"Nougat":c[0]===8?"Oreo":c[0]===9?"Pie":void 0},o.getVersionPrecision=function(l){return l.split(".").length},o.compareVersions=function(l,c,u){u===void 0&&(u=!1);var d=o.getVersionPrecision(l),f=o.getVersionPrecision(c),g=Math.max(d,f),m=0,h=o.map([l,c],function(p){var y=g-o.getVersionPrecision(p),S=p+new Array(y+1).join(".0");return o.map(S.split("."),function($){return new Array(20-$.length).join("0")+$}).reverse()});for(u&&(m=g-Math.min(d,f)),g-=1;g>=m;){if(h[0][g]>h[1][g])return 1;if(h[0][g]===h[1][g]){if(g===m)return 0;g-=1}else if(h[0][g]<h[1][g])return-1}},o.map=function(l,c){var u,d=[];if(Array.prototype.map)return Array.prototype.map.call(l,c);for(u=0;u<l.length;u+=1)d.push(c(l[u]));return d},o.find=function(l,c){var u,d;if(Array.prototype.find)return Array.prototype.find.call(l,c);for(u=0,d=l.length;u<d;u+=1){var f=l[u];if(c(f,u))return f}},o.assign=function(l){for(var c,u,d=l,f=arguments.length,g=new Array(f>1?f-1:0),m=1;m<f;m++)g[m-1]=arguments[m];if(Object.assign)return Object.assign.apply(Object,[l].concat(g));var h=function(){var p=g[c];typeof p=="object"&&p!==null&&Object.keys(p).forEach(function(y){d[y]=p[y]})};for(c=0,u=g.length;c<u;c+=1)h();return l},o.getBrowserAlias=function(l){return i.BROWSER_ALIASES_MAP[l]},o.getBrowserTypeByAlias=function(l){return i.BROWSER_MAP[l]||""},o}();n.default=a,t.exports=n.default},18:function(t,n,s){n.__esModule=!0,n.ENGINE_MAP=n.OS_MAP=n.PLATFORMS_MAP=n.BROWSER_MAP=n.BROWSER_ALIASES_MAP=void 0,n.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},n.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},n.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},n.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},n.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(t,n,s){n.__esModule=!0,n.default=void 0;var i,a=(i=s(91))&&i.__esModule?i:{default:i},o=s(18);function l(u,d){for(var f=0;f<d.length;f++){var g=d[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(u,g.key,g)}}var c=function(){function u(){}var d,f,g;return u.getParser=function(m,h){if(h===void 0&&(h=!1),typeof m!="string")throw new Error("UserAgent should be a string");return new a.default(m,h)},u.parse=function(m){return new a.default(m).getResult()},d=u,g=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}],(f=null)&&l(d.prototype,f),g&&l(d,g),u}();n.default=c,t.exports=n.default},91:function(t,n,s){n.__esModule=!0,n.default=void 0;var i=u(s(92)),a=u(s(93)),o=u(s(94)),l=u(s(95)),c=u(s(17));function u(f){return f&&f.__esModule?f:{default:f}}var d=function(){function f(m,h){if(h===void 0&&(h=!1),m==null||m==="")throw new Error("UserAgent parameter can't be empty");this._ua=m,this.parsedResult={},h!==!0&&this.parse()}var g=f.prototype;return g.getUA=function(){return this._ua},g.test=function(m){return m.test(this._ua)},g.parseBrowser=function(){var m=this;this.parsedResult.browser={};var h=c.default.find(i.default,function(p){if(typeof p.test=="function")return p.test(m);if(p.test instanceof Array)return p.test.some(function(y){return m.test(y)});throw new Error("Browser's test function is not valid")});return h&&(this.parsedResult.browser=h.describe(this.getUA())),this.parsedResult.browser},g.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},g.getBrowserName=function(m){return m?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},g.getBrowserVersion=function(){return this.getBrowser().version},g.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},g.parseOS=function(){var m=this;this.parsedResult.os={};var h=c.default.find(a.default,function(p){if(typeof p.test=="function")return p.test(m);if(p.test instanceof Array)return p.test.some(function(y){return m.test(y)});throw new Error("Browser's test function is not valid")});return h&&(this.parsedResult.os=h.describe(this.getUA())),this.parsedResult.os},g.getOSName=function(m){var h=this.getOS().name;return m?String(h).toLowerCase()||"":h||""},g.getOSVersion=function(){return this.getOS().version},g.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},g.getPlatformType=function(m){m===void 0&&(m=!1);var h=this.getPlatform().type;return m?String(h).toLowerCase()||"":h||""},g.parsePlatform=function(){var m=this;this.parsedResult.platform={};var h=c.default.find(o.default,function(p){if(typeof p.test=="function")return p.test(m);if(p.test instanceof Array)return p.test.some(function(y){return m.test(y)});throw new Error("Browser's test function is not valid")});return h&&(this.parsedResult.platform=h.describe(this.getUA())),this.parsedResult.platform},g.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},g.getEngineName=function(m){return m?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},g.parseEngine=function(){var m=this;this.parsedResult.engine={};var h=c.default.find(l.default,function(p){if(typeof p.test=="function")return p.test(m);if(p.test instanceof Array)return p.test.some(function(y){return m.test(y)});throw new Error("Browser's test function is not valid")});return h&&(this.parsedResult.engine=h.describe(this.getUA())),this.parsedResult.engine},g.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},g.getResult=function(){return c.default.assign({},this.parsedResult)},g.satisfies=function(m){var h=this,p={},y=0,S={},$=0;if(Object.keys(m).forEach(function(j){var D=m[j];typeof D=="string"?(S[j]=D,$+=1):typeof D=="object"&&(p[j]=D,y+=1)}),y>0){var x=Object.keys(p),B=c.default.find(x,function(j){return h.isOS(j)});if(B){var E=this.satisfies(p[B]);if(E!==void 0)return E}var N=c.default.find(x,function(j){return h.isPlatform(j)});if(N){var C=this.satisfies(p[N]);if(C!==void 0)return C}}if($>0){var P=Object.keys(S),I=c.default.find(P,function(j){return h.isBrowser(j,!0)});if(I!==void 0)return this.compareVersion(S[I])}},g.isBrowser=function(m,h){h===void 0&&(h=!1);var p=this.getBrowserName().toLowerCase(),y=m.toLowerCase(),S=c.default.getBrowserTypeByAlias(y);return h&&S&&(y=S.toLowerCase()),y===p},g.compareVersion=function(m){var h=[0],p=m,y=!1,S=this.getBrowserVersion();if(typeof S=="string")return m[0]===">"||m[0]==="<"?(p=m.substr(1),m[1]==="="?(y=!0,p=m.substr(2)):h=[],m[0]===">"?h.push(1):h.push(-1)):m[0]==="="?p=m.substr(1):m[0]==="~"&&(y=!0,p=m.substr(1)),h.indexOf(c.default.compareVersions(S,p,y))>-1},g.isOS=function(m){return this.getOSName(!0)===String(m).toLowerCase()},g.isPlatform=function(m){return this.getPlatformType(!0)===String(m).toLowerCase()},g.isEngine=function(m){return this.getEngineName(!0)===String(m).toLowerCase()},g.is=function(m,h){return h===void 0&&(h=!1),this.isBrowser(m,h)||this.isOS(m)||this.isPlatform(m)},g.some=function(m){var h=this;return m===void 0&&(m=[]),m.some(function(p){return h.is(p)})},f}();n.default=d,t.exports=n.default},92:function(t,n,s){n.__esModule=!0,n.default=void 0;var i,a=(i=s(17))&&i.__esModule?i:{default:i},o=/version\/(\d+(\.?_?\d+)+)/i,l=[{test:[/googlebot/i],describe:function(c){var u={name:"Googlebot"},d=a.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,c)||a.default.getFirstMatch(o,c);return d&&(u.version=d),u}},{test:[/opera/i],describe:function(c){var u={name:"Opera"},d=a.default.getFirstMatch(o,c)||a.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:[/opr\/|opios/i],describe:function(c){var u={name:"Opera"},d=a.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,c)||a.default.getFirstMatch(o,c);return d&&(u.version=d),u}},{test:[/SamsungBrowser/i],describe:function(c){var u={name:"Samsung Internet for Android"},d=a.default.getFirstMatch(o,c)||a.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:[/Whale/i],describe:function(c){var u={name:"NAVER Whale Browser"},d=a.default.getFirstMatch(o,c)||a.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,c);return d&&(u.version=d),u}},{test:[/MZBrowser/i],describe:function(c){var u={name:"MZ Browser"},d=a.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,c)||a.default.getFirstMatch(o,c);return d&&(u.version=d),u}},{test:[/focus/i],describe:function(c){var u={name:"Focus"},d=a.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,c)||a.default.getFirstMatch(o,c);return d&&(u.version=d),u}},{test:[/swing/i],describe:function(c){var u={name:"Swing"},d=a.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,c)||a.default.getFirstMatch(o,c);return d&&(u.version=d),u}},{test:[/coast/i],describe:function(c){var u={name:"Opera Coast"},d=a.default.getFirstMatch(o,c)||a.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(c){var u={name:"Opera Touch"},d=a.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,c)||a.default.getFirstMatch(o,c);return d&&(u.version=d),u}},{test:[/yabrowser/i],describe:function(c){var u={name:"Yandex Browser"},d=a.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,c)||a.default.getFirstMatch(o,c);return d&&(u.version=d),u}},{test:[/ucbrowser/i],describe:function(c){var u={name:"UC Browser"},d=a.default.getFirstMatch(o,c)||a.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:[/Maxthon|mxios/i],describe:function(c){var u={name:"Maxthon"},d=a.default.getFirstMatch(o,c)||a.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:[/epiphany/i],describe:function(c){var u={name:"Epiphany"},d=a.default.getFirstMatch(o,c)||a.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:[/puffin/i],describe:function(c){var u={name:"Puffin"},d=a.default.getFirstMatch(o,c)||a.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:[/sleipnir/i],describe:function(c){var u={name:"Sleipnir"},d=a.default.getFirstMatch(o,c)||a.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:[/k-meleon/i],describe:function(c){var u={name:"K-Meleon"},d=a.default.getFirstMatch(o,c)||a.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:[/micromessenger/i],describe:function(c){var u={name:"WeChat"},d=a.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,c)||a.default.getFirstMatch(o,c);return d&&(u.version=d),u}},{test:[/qqbrowser/i],describe:function(c){var u={name:/qqbrowserlite/i.test(c)?"QQ Browser Lite":"QQ Browser"},d=a.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,c)||a.default.getFirstMatch(o,c);return d&&(u.version=d),u}},{test:[/msie|trident/i],describe:function(c){var u={name:"Internet Explorer"},d=a.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:[/\sedg\//i],describe:function(c){var u={name:"Microsoft Edge"},d=a.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:[/edg([ea]|ios)/i],describe:function(c){var u={name:"Microsoft Edge"},d=a.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:[/vivaldi/i],describe:function(c){var u={name:"Vivaldi"},d=a.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:[/seamonkey/i],describe:function(c){var u={name:"SeaMonkey"},d=a.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:[/sailfish/i],describe:function(c){var u={name:"Sailfish"},d=a.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,c);return d&&(u.version=d),u}},{test:[/silk/i],describe:function(c){var u={name:"Amazon Silk"},d=a.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:[/phantom/i],describe:function(c){var u={name:"PhantomJS"},d=a.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:[/slimerjs/i],describe:function(c){var u={name:"SlimerJS"},d=a.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(c){var u={name:"BlackBerry"},d=a.default.getFirstMatch(o,c)||a.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:[/(web|hpw)[o0]s/i],describe:function(c){var u={name:"WebOS Browser"},d=a.default.getFirstMatch(o,c)||a.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:[/bada/i],describe:function(c){var u={name:"Bada"},d=a.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:[/tizen/i],describe:function(c){var u={name:"Tizen"},d=a.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,c)||a.default.getFirstMatch(o,c);return d&&(u.version=d),u}},{test:[/qupzilla/i],describe:function(c){var u={name:"QupZilla"},d=a.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,c)||a.default.getFirstMatch(o,c);return d&&(u.version=d),u}},{test:[/firefox|iceweasel|fxios/i],describe:function(c){var u={name:"Firefox"},d=a.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:[/electron/i],describe:function(c){var u={name:"Electron"},d=a.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:[/MiuiBrowser/i],describe:function(c){var u={name:"Miui"},d=a.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:[/chromium/i],describe:function(c){var u={name:"Chromium"},d=a.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,c)||a.default.getFirstMatch(o,c);return d&&(u.version=d),u}},{test:[/chrome|crios|crmo/i],describe:function(c){var u={name:"Chrome"},d=a.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:[/GSA/i],describe:function(c){var u={name:"Google Search"},d=a.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:function(c){var u=!c.test(/like android/i),d=c.test(/android/i);return u&&d},describe:function(c){var u={name:"Android Browser"},d=a.default.getFirstMatch(o,c);return d&&(u.version=d),u}},{test:[/playstation 4/i],describe:function(c){var u={name:"PlayStation 4"},d=a.default.getFirstMatch(o,c);return d&&(u.version=d),u}},{test:[/safari|applewebkit/i],describe:function(c){var u={name:"Safari"},d=a.default.getFirstMatch(o,c);return d&&(u.version=d),u}},{test:[/.*/i],describe:function(c){var u=c.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:a.default.getFirstMatch(u,c),version:a.default.getSecondMatch(u,c)}}}];n.default=l,t.exports=n.default},93:function(t,n,s){n.__esModule=!0,n.default=void 0;var i,a=(i=s(17))&&i.__esModule?i:{default:i},o=s(18),l=[{test:[/Roku\/DVP/],describe:function(c){var u=a.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,c);return{name:o.OS_MAP.Roku,version:u}}},{test:[/windows phone/i],describe:function(c){var u=a.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,c);return{name:o.OS_MAP.WindowsPhone,version:u}}},{test:[/windows /i],describe:function(c){var u=a.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,c),d=a.default.getWindowsVersionName(u);return{name:o.OS_MAP.Windows,version:u,versionName:d}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(c){var u={name:o.OS_MAP.iOS},d=a.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,c);return d&&(u.version=d),u}},{test:[/macintosh/i],describe:function(c){var u=a.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,c).replace(/[_\s]/g,"."),d=a.default.getMacOSVersionName(u),f={name:o.OS_MAP.MacOS,version:u};return d&&(f.versionName=d),f}},{test:[/(ipod|iphone|ipad)/i],describe:function(c){var u=a.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,c).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:u}}},{test:function(c){var u=!c.test(/like android/i),d=c.test(/android/i);return u&&d},describe:function(c){var u=a.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,c),d=a.default.getAndroidVersionName(u),f={name:o.OS_MAP.Android,version:u};return d&&(f.versionName=d),f}},{test:[/(web|hpw)[o0]s/i],describe:function(c){var u=a.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,c),d={name:o.OS_MAP.WebOS};return u&&u.length&&(d.version=u),d}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(c){var u=a.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,c)||a.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,c)||a.default.getFirstMatch(/\bbb(\d+)/i,c);return{name:o.OS_MAP.BlackBerry,version:u}}},{test:[/bada/i],describe:function(c){var u=a.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,c);return{name:o.OS_MAP.Bada,version:u}}},{test:[/tizen/i],describe:function(c){var u=a.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,c);return{name:o.OS_MAP.Tizen,version:u}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(c){var u=a.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,c);return{name:o.OS_MAP.PlayStation4,version:u}}}];n.default=l,t.exports=n.default},94:function(t,n,s){n.__esModule=!0,n.default=void 0;var i,a=(i=s(17))&&i.__esModule?i:{default:i},o=s(18),l=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(c){var u=a.default.getFirstMatch(/(can-l01)/i,c)&&"Nova",d={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return u&&(d.model=u),d}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(c){var u=c.test(/ipod|iphone/i),d=c.test(/like (ipod|iphone)/i);return u&&!d},describe:function(c){var u=a.default.getFirstMatch(/(ipod|iphone)/i,c);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:u}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(c){return c.getBrowserName(!0)==="blackberry"},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(c){return c.getBrowserName(!0)==="bada"},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(c){return c.getBrowserName()==="windows phone"},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(c){var u=Number(String(c.getOSVersion()).split(".")[0]);return c.getOSName(!0)==="android"&&u>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(c){return c.getOSName(!0)==="android"},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(c){return c.getOSName(!0)==="macos"},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(c){return c.getOSName(!0)==="windows"},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(c){return c.getOSName(!0)==="linux"},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(c){return c.getOSName(!0)==="playstation 4"},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(c){return c.getOSName(!0)==="roku"},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];n.default=l,t.exports=n.default},95:function(t,n,s){n.__esModule=!0,n.default=void 0;var i,a=(i=s(17))&&i.__esModule?i:{default:i},o=s(18),l=[{test:function(c){return c.getBrowserName(!0)==="microsoft edge"},describe:function(c){if(/\sedg\//i.test(c))return{name:o.ENGINE_MAP.Blink};var u=a.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,c);return{name:o.ENGINE_MAP.EdgeHTML,version:u}}},{test:[/trident/i],describe:function(c){var u={name:o.ENGINE_MAP.Trident},d=a.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:function(c){return c.test(/presto/i)},describe:function(c){var u={name:o.ENGINE_MAP.Presto},d=a.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:function(c){var u=c.test(/gecko/i),d=c.test(/like gecko/i);return u&&!d},describe:function(c){var u={name:o.ENGINE_MAP.Gecko},d=a.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(c){var u={name:o.ENGINE_MAP.WebKit},d=a.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,c);return d&&(u.version=d),u}}];n.default=l,t.exports=n.default}})})}(St)),St.exports}var jr;function Mi(){return jr||(jr=1,function(r){var e=pt.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(r,"__esModule",{value:!0}),r.requestVideoPermissions=r.requestAudioPermissions=r.requestMediaPermissions=r.MediaPermissionsErrorType=void 0;const t=e(Si());var n;(function(o){o.SystemPermissionDenied="SystemPermissionDenied",o.UserPermissionDenied="UserPermissionDenied",o.CouldNotStartVideoSource="CouldNotStartVideoSource",o.Generic="Generic"})(n=r.MediaPermissionsErrorType||(r.MediaPermissionsErrorType={}));const s=o=>new Promise((l,c)=>{navigator.mediaDevices.getUserMedia(o??{audio:!0,video:!0}).then(u=>{u.getTracks().forEach(d=>{d.stop()}),l(!0)}).catch(u=>{const f=t.default.getParser(window.navigator.userAgent).getBrowserName(),g=u.name,m=u.message;let h=n.Generic;f==="Chrome"?g==="NotAllowedError"?m==="Permission denied by system"?h=n.SystemPermissionDenied:m==="Permission denied"&&(h=n.UserPermissionDenied):g==="NotReadableError"&&(h=n.CouldNotStartVideoSource):f==="Safari"?g==="NotAllowedError"&&(h=n.UserPermissionDenied):f==="Microsoft Edge"?g==="NotAllowedError"?h=n.UserPermissionDenied:g==="NotReadableError"&&(h=n.CouldNotStartVideoSource):f==="Firefox"&&(g==="NotFoundError"||g==="NotReadableError"?h=n.SystemPermissionDenied:g==="NotAllowedError"?h=n.UserPermissionDenied:g==="AbortError"&&(h=n.CouldNotStartVideoSource)),c({type:h,name:u.name,message:u.message})})});r.requestMediaPermissions=s;const i=()=>(0,r.requestMediaPermissions)({audio:!0,video:!1});r.requestAudioPermissions=i;const a=()=>(0,r.requestMediaPermissions)({audio:!1,video:!0});r.requestVideoPermissions=a}(pt)),pt}var Vr;function xi(){return Vr||(Vr=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.requestMediaPermissions=r.MediaPermissionsErrorType=void 0;var e=Mi();Object.defineProperty(r,"MediaPermissionsErrorType",{enumerable:!0,get:function(){return e.MediaPermissionsErrorType}}),Object.defineProperty(r,"requestMediaPermissions",{enumerable:!0,get:function(){return e.requestMediaPermissions}})}(Kt)),Kt}var Je=xi();const ki={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},Ln={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},H={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},ie={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Ee={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class v{static getFirstMatch(e,t){const n=t.match(e);return n&&n.length>0&&n[1]||""}static getSecondMatch(e,t){const n=t.match(e);return n&&n.length>1&&n[2]||""}static matchAndReturnConst(e,t,n){if(e.test(t))return n}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const t=e.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(t.push(0),t[0]===10)switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const t=e.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(t.push(0),!(t[0]===1&&t[1]<5)){if(t[0]===1&&t[1]<6)return"Cupcake";if(t[0]===1&&t[1]>=6)return"Donut";if(t[0]===2&&t[1]<2)return"Eclair";if(t[0]===2&&t[1]===2)return"Froyo";if(t[0]===2&&t[1]>2)return"Gingerbread";if(t[0]===3)return"Honeycomb";if(t[0]===4&&t[1]<1)return"Ice Cream Sandwich";if(t[0]===4&&t[1]<4)return"Jelly Bean";if(t[0]===4&&t[1]>=4)return"KitKat";if(t[0]===5)return"Lollipop";if(t[0]===6)return"Marshmallow";if(t[0]===7)return"Nougat";if(t[0]===8)return"Oreo";if(t[0]===9)return"Pie"}}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,t,n=!1){const s=v.getVersionPrecision(e),i=v.getVersionPrecision(t);let a=Math.max(s,i),o=0;const l=v.map([e,t],c=>{const u=a-v.getVersionPrecision(c),d=c+new Array(u+1).join(".0");return v.map(d.split("."),f=>new Array(20-f.length).join("0")+f).reverse()});for(n&&(o=a-Math.min(s,i)),a-=1;a>=o;){if(l[0][a]>l[1][a])return 1;if(l[0][a]===l[1][a]){if(a===o)return 0;a-=1}else if(l[0][a]<l[1][a])return-1}}static map(e,t){const n=[];let s;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(s=0;s<e.length;s+=1)n.push(t(e[s]));return n}static find(e,t){let n,s;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,s=e.length;n<s;n+=1){const i=e[n];if(t(i,n))return i}}static assign(e,...t){const n=e;let s,i;if(Object.assign)return Object.assign(e,...t);for(s=0,i=t.length;s<i;s+=1){const a=t[s];typeof a=="object"&&a!==null&&Object.keys(a).forEach(l=>{n[l]=a[l]})}return e}static getBrowserAlias(e){return ki[e]}static getBrowserTypeByAlias(e){return Ln[e]||""}}const L=/version\/(\d+(\.?_?\d+)+)/i,_i=[{test:[/googlebot/i],describe(r){const e={name:"Googlebot"},t=v.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,r)||v.getFirstMatch(L,r);return t&&(e.version=t),e}},{test:[/opera/i],describe(r){const e={name:"Opera"},t=v.getFirstMatch(L,r)||v.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/opr\/|opios/i],describe(r){const e={name:"Opera"},t=v.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,r)||v.getFirstMatch(L,r);return t&&(e.version=t),e}},{test:[/SamsungBrowser/i],describe(r){const e={name:"Samsung Internet for Android"},t=v.getFirstMatch(L,r)||v.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/Whale/i],describe(r){const e={name:"NAVER Whale Browser"},t=v.getFirstMatch(L,r)||v.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/MZBrowser/i],describe(r){const e={name:"MZ Browser"},t=v.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,r)||v.getFirstMatch(L,r);return t&&(e.version=t),e}},{test:[/focus/i],describe(r){const e={name:"Focus"},t=v.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,r)||v.getFirstMatch(L,r);return t&&(e.version=t),e}},{test:[/swing/i],describe(r){const e={name:"Swing"},t=v.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,r)||v.getFirstMatch(L,r);return t&&(e.version=t),e}},{test:[/coast/i],describe(r){const e={name:"Opera Coast"},t=v.getFirstMatch(L,r)||v.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(r){const e={name:"Opera Touch"},t=v.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,r)||v.getFirstMatch(L,r);return t&&(e.version=t),e}},{test:[/yabrowser/i],describe(r){const e={name:"Yandex Browser"},t=v.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,r)||v.getFirstMatch(L,r);return t&&(e.version=t),e}},{test:[/ucbrowser/i],describe(r){const e={name:"UC Browser"},t=v.getFirstMatch(L,r)||v.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/Maxthon|mxios/i],describe(r){const e={name:"Maxthon"},t=v.getFirstMatch(L,r)||v.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/epiphany/i],describe(r){const e={name:"Epiphany"},t=v.getFirstMatch(L,r)||v.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/puffin/i],describe(r){const e={name:"Puffin"},t=v.getFirstMatch(L,r)||v.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/sleipnir/i],describe(r){const e={name:"Sleipnir"},t=v.getFirstMatch(L,r)||v.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/k-meleon/i],describe(r){const e={name:"K-Meleon"},t=v.getFirstMatch(L,r)||v.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/micromessenger/i],describe(r){const e={name:"WeChat"},t=v.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,r)||v.getFirstMatch(L,r);return t&&(e.version=t),e}},{test:[/qqbrowser/i],describe(r){const e={name:/qqbrowserlite/i.test(r)?"QQ Browser Lite":"QQ Browser"},t=v.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,r)||v.getFirstMatch(L,r);return t&&(e.version=t),e}},{test:[/msie|trident/i],describe(r){const e={name:"Internet Explorer"},t=v.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/\sedg\//i],describe(r){const e={name:"Microsoft Edge"},t=v.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/edg([ea]|ios)/i],describe(r){const e={name:"Microsoft Edge"},t=v.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/vivaldi/i],describe(r){const e={name:"Vivaldi"},t=v.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/seamonkey/i],describe(r){const e={name:"SeaMonkey"},t=v.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/sailfish/i],describe(r){const e={name:"Sailfish"},t=v.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,r);return t&&(e.version=t),e}},{test:[/silk/i],describe(r){const e={name:"Amazon Silk"},t=v.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/phantom/i],describe(r){const e={name:"PhantomJS"},t=v.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/slimerjs/i],describe(r){const e={name:"SlimerJS"},t=v.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(r){const e={name:"BlackBerry"},t=v.getFirstMatch(L,r)||v.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/(web|hpw)[o0]s/i],describe(r){const e={name:"WebOS Browser"},t=v.getFirstMatch(L,r)||v.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/bada/i],describe(r){const e={name:"Bada"},t=v.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/tizen/i],describe(r){const e={name:"Tizen"},t=v.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,r)||v.getFirstMatch(L,r);return t&&(e.version=t),e}},{test:[/qupzilla/i],describe(r){const e={name:"QupZilla"},t=v.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,r)||v.getFirstMatch(L,r);return t&&(e.version=t),e}},{test:[/firefox|iceweasel|fxios/i],describe(r){const e={name:"Firefox"},t=v.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/electron/i],describe(r){const e={name:"Electron"},t=v.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/MiuiBrowser/i],describe(r){const e={name:"Miui"},t=v.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/chromium/i],describe(r){const e={name:"Chromium"},t=v.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,r)||v.getFirstMatch(L,r);return t&&(e.version=t),e}},{test:[/chrome|crios|crmo/i],describe(r){const e={name:"Chrome"},t=v.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/GSA/i],describe(r){const e={name:"Google Search"},t=v.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test(r){const e=!r.test(/like android/i),t=r.test(/android/i);return e&&t},describe(r){const e={name:"Android Browser"},t=v.getFirstMatch(L,r);return t&&(e.version=t),e}},{test:[/playstation 4/i],describe(r){const e={name:"PlayStation 4"},t=v.getFirstMatch(L,r);return t&&(e.version=t),e}},{test:[/safari|applewebkit/i],describe(r){const e={name:"Safari"},t=v.getFirstMatch(L,r);return t&&(e.version=t),e}},{test:[/.*/i],describe(r){const e=/^(.*)\/(.*) /,t=/^(.*)\/(.*)[ \t]\((.*)/,s=r.search("\\(")!==-1?t:e;return{name:v.getFirstMatch(s,r),version:v.getSecondMatch(s,r)}}}],Pi=[{test:[/Roku\/DVP/],describe(r){const e=v.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,r);return{name:ie.Roku,version:e}}},{test:[/windows phone/i],describe(r){const e=v.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,r);return{name:ie.WindowsPhone,version:e}}},{test:[/windows /i],describe(r){const e=v.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,r),t=v.getWindowsVersionName(e);return{name:ie.Windows,version:e,versionName:t}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(r){const e={name:ie.iOS},t=v.getSecondMatch(/(Version\/)(\d[\d.]+)/,r);return t&&(e.version=t),e}},{test:[/macintosh/i],describe(r){const e=v.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,r).replace(/[_\s]/g,"."),t=v.getMacOSVersionName(e),n={name:ie.MacOS,version:e};return t&&(n.versionName=t),n}},{test:[/(ipod|iphone|ipad)/i],describe(r){const e=v.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,r).replace(/[_\s]/g,".");return{name:ie.iOS,version:e}}},{test(r){const e=!r.test(/like android/i),t=r.test(/android/i);return e&&t},describe(r){const e=v.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,r),t=v.getAndroidVersionName(e),n={name:ie.Android,version:e};return t&&(n.versionName=t),n}},{test:[/(web|hpw)[o0]s/i],describe(r){const e=v.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,r),t={name:ie.WebOS};return e&&e.length&&(t.version=e),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(r){const e=v.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,r)||v.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,r)||v.getFirstMatch(/\bbb(\d+)/i,r);return{name:ie.BlackBerry,version:e}}},{test:[/bada/i],describe(r){const e=v.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,r);return{name:ie.Bada,version:e}}},{test:[/tizen/i],describe(r){const e=v.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,r);return{name:ie.Tizen,version:e}}},{test:[/linux/i],describe(){return{name:ie.Linux}}},{test:[/CrOS/],describe(){return{name:ie.ChromeOS}}},{test:[/PlayStation 4/],describe(r){const e=v.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,r);return{name:ie.PlayStation4,version:e}}}],Ai=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(r){const e=v.getFirstMatch(/(can-l01)/i,r)&&"Nova",t={type:H.mobile,vendor:"Huawei"};return e&&(t.model=e),t}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:H.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:H.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:H.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:H.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:H.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:H.tablet}}},{test(r){const e=r.test(/ipod|iphone/i),t=r.test(/like (ipod|iphone)/i);return e&&!t},describe(r){const e=v.getFirstMatch(/(ipod|iphone)/i,r);return{type:H.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:H.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:H.mobile}}},{test(r){return r.getBrowserName(!0)==="blackberry"},describe(){return{type:H.mobile,vendor:"BlackBerry"}}},{test(r){return r.getBrowserName(!0)==="bada"},describe(){return{type:H.mobile}}},{test(r){return r.getBrowserName()==="windows phone"},describe(){return{type:H.mobile,vendor:"Microsoft"}}},{test(r){const e=Number(String(r.getOSVersion()).split(".")[0]);return r.getOSName(!0)==="android"&&e>=3},describe(){return{type:H.tablet}}},{test(r){return r.getOSName(!0)==="android"},describe(){return{type:H.mobile}}},{test(r){return r.getOSName(!0)==="macos"},describe(){return{type:H.desktop,vendor:"Apple"}}},{test(r){return r.getOSName(!0)==="windows"},describe(){return{type:H.desktop}}},{test(r){return r.getOSName(!0)==="linux"},describe(){return{type:H.desktop}}},{test(r){return r.getOSName(!0)==="playstation 4"},describe(){return{type:H.tv}}},{test(r){return r.getOSName(!0)==="roku"},describe(){return{type:H.tv}}}],Ci=[{test(r){return r.getBrowserName(!0)==="microsoft edge"},describe(r){if(/\sedg\//i.test(r))return{name:Ee.Blink};const t=v.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,r);return{name:Ee.EdgeHTML,version:t}}},{test:[/trident/i],describe(r){const e={name:Ee.Trident},t=v.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test(r){return r.test(/presto/i)},describe(r){const e={name:Ee.Presto},t=v.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test(r){const e=r.test(/gecko/i),t=r.test(/like gecko/i);return e&&!t},describe(r){const e={name:Ee.Gecko},t=v.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:Ee.Blink}}},{test:[/(apple)?webkit/i],describe(r){const e={name:Ee.WebKit},t=v.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}}];class Wr{constructor(e,t=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},t!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=v.find(_i,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=v.find(Pi,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:t}=this.getOS();return e?String(t).toLowerCase()||"":t||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:t}=this.getPlatform();return e?String(t).toLowerCase()||"":t||""}parsePlatform(){this.parsedResult.platform={};const e=v.find(Ai,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=v.find(Ci,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return v.assign({},this.parsedResult)}satisfies(e){const t={};let n=0;const s={};let i=0;if(Object.keys(e).forEach(o=>{const l=e[o];typeof l=="string"?(s[o]=l,i+=1):typeof l=="object"&&(t[o]=l,n+=1)}),n>0){const o=Object.keys(t),l=v.find(o,u=>this.isOS(u));if(l){const u=this.satisfies(t[l]);if(u!==void 0)return u}const c=v.find(o,u=>this.isPlatform(u));if(c){const u=this.satisfies(t[c]);if(u!==void 0)return u}}if(i>0){const o=Object.keys(s),l=v.find(o,c=>this.isBrowser(c,!0));if(l!==void 0)return this.compareVersion(s[l])}}isBrowser(e,t=!1){const n=this.getBrowserName().toLowerCase();let s=e.toLowerCase();const i=v.getBrowserTypeByAlias(s);return t&&i&&(s=i.toLowerCase()),s===n}compareVersion(e){let t=[0],n=e,s=!1;const i=this.getBrowserVersion();if(typeof i=="string")return e[0]===">"||e[0]==="<"?(n=e.substr(1),e[1]==="="?(s=!0,n=e.substr(2)):t=[],e[0]===">"?t.push(1):t.push(-1)):e[0]==="="?n=e.substr(1):e[0]==="~"&&(s=!0,n=e.substr(1)),t.indexOf(v.compareVersions(i,n,s))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,t=!1){return this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(t=>this.is(t))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Ei{static getParser(e,t=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new Wr(e,t)}static parse(e){return new Wr(e).getResult()}static get BROWSER_MAP(){return Ln}static get ENGINE_MAP(){return Ee}static get OS_MAP(){return ie}static get PLATFORMS_MAP(){return H}}let vt;const Mr=()=>vt||(vt=Ei.parse(window.navigator.userAgent),vt),$i=r=>(r.stack??=new Error().stack,r),xe=async r=>{try{return await r()}catch(e){throw $i(e instanceof Error?e:new Error(e?.toString()))}};function qn(r){return{...Gr,video:{...Gr.video,deviceId:{exact:r}}}}const Gr={audio:!1,video:{facingMode:{ideal:"environment"},frameRate:{ideal:60,min:30},sampleRate:{ideal:60,min:30}}},[In,Fi]=q([]);async function qt(){if(navigator.mediaDevices?.enumerateDevices)try{const e=(await xe(()=>navigator.mediaDevices?.enumerateDevices())).filter(t=>t.kind==="videoinput");In().length!==e.length&&Fi(e)}catch(r){if(r.message.includes("Illegal invocation"))return;throw r}}function Ri(){if(!("mediaDevices"in navigator&&"getUserMedia"in navigator.mediaDevices)){ne("error:nosupport");return}navigator.permissions.query({name:"camera"}).then(e=>{e.state==="granted"&&ne("granted"),e.state==="denied"&&ne("denied")}).catch(e=>{console.error(e)}).finally(qt)}const[Z,ne]=q("unknown");Ri();const[it,ir]=q(),at=new Map,Hr=()=>it()?at.get(it().id):void 0;async function xr(){for(const[r,e]of at){const t=e;if(!t){at.delete(r);continue}if(t.active){t.getTracks().forEach(n=>{n.readyState!=="ended"&&(n.stop(),n.enabled=!1)});try{t.stop&&t.stop()}catch{}ir(void 0)}}await new Promise(r=>setTimeout(r,200))}const ze=()=>Z().startsWith("error"),Dn=()=>Z()==="unknown"||Z()==="error:inuse",Un=()=>Z()==="granted",ar=Xe({permission:Z,hasPermission:Un,hasErrored:ze,canPrompt:Dn,hasMediaSupport:()=>Z()!=="error:nosupport",requestCamera:jn,stopCameraStream:xr,requestPermission:Oi,devices:In,camera:it,cameraStream:()=>{}}),Ae=()=>Ke(ar);async function Oi(){if(!Dn())return Z();ne("pending");const r=localStorage.getItem("camera")??void 0;return await Je.requestMediaPermissions(qn(r)).then(async()=>(await qt(),await kr(),ne("granted"))).catch(e=>zn(e,r))}function zn(r,e){const{type:t,message:n,name:s}=r;return t===Je.MediaPermissionsErrorType.SystemPermissionDenied?ne("denied:system"):t===Je.MediaPermissionsErrorType.UserPermissionDenied?ne("denied"):t===Je.MediaPermissionsErrorType.CouldNotStartVideoSource||s==="AbortError"&&n==="Starting videoinput failed"||s==="NotReadableError"?ne("error:inuse"):t===Je.MediaPermissionsErrorType.Generic&&n==="Permission dismissed"?ne("unknown"):s==="OverconstrainedError"&&(r.constraint==="deviceId"||n==="")&&e?(localStorage.removeItem("camera"),ne("error:inuse")):(console.error(r),ne("error"))}function jn(r){if(Z()!=="granted")throw new Error("Call 'requestPermission' before 'getStream'");return kr(r)}async function kr(r){if(ze())return{id:"",label:"X",facing:"loading",name:"X"};const e=localStorage.getItem("camera")??void 0,t=r??e??void 0;it()?.id!==t&&await xr();const n=await xe(()=>navigator.mediaDevices.getUserMedia(qn(t))).catch(i=>{if(i.name==="NotReadableError"){localStorage.setItem("camera",t),window.location.reload();return}if(zn(i,e)==="error")throw i});if(!n)return{id:t,label:"?",facing:"loading",name:""};if(await qt(),r&&at.set(r,n),!n.active||!n.getTracks())return localStorage.setItem("camera",t),Z()==="error:inuse"?(ir(void 0),{id:t,label:"X",facing:"loading",name:"X"}):{id:t,label:"?",facing:"loading",name:""};const s=n.getTracks()[0].getSettings().deviceId;return at.set(s,n),localStorage.setItem("camera",s),ir({id:s,name:n.getTracks()[0].label,label:n.getTracks()[0].label.split("(")[0].split(",")[0].trim(),facing:Mr().platform.type==="desktop"?"desktop":n.getTracks()[0].getSettings().facingMode})}const Ti=r=>{const e=t=>async n=>{ze()||(await qt(),t.state==="granted"&&Z()!=="granted"&&!ze()&&await kr().then(()=>ne("granted")),t.state==="denied"&&ne("denied"),t.state==="prompt"&&ne("unknown"))};return Pe(async()=>{const t=()=>{Z()!=="pending"&&(ze()||xe(()=>navigator.permissions.query({name:"camera"})).then(n=>{e(n)()}).catch(()=>{}).finally(()=>window.setTimeout(()=>requestAnimationFrame(t),10)))};await xe(()=>navigator.permissions.query({name:"camera"})).then(n=>{n.onchange=e(n),requestAnimationFrame(t)}).catch(()=>{}),Un()&&!ze()&&!Hr()&&await jn()}),ye(async()=>{await xr()}),b(ar.Provider,{get value(){return{...ar.defaultValue,hasPermission:M(()=>Z()==="granted",Z),canPrompt:M(()=>Z()==="unknown"||Z()==="error:inuse",Z),hasMediaSupport:M(()=>Z()!=="error:nosupport",Z),cameraStream:M(Hr,[it])}},get children(){return pe(()=>r.children)()}})};var Bi=(r,e)=>{if(e)for(const[t,n]of Object.entries(e))r=r.replace(new RegExp(`{{\\s*${t}\\s*}}`,"g"),n);return r},Ni=k("<br>");const Li={common:{close:"Close",offline:"You appear to be offline, please check your network connection",refresh:"Refresh page",share:"Share Guessify",unhandledError:{title:"Something went wrong.",details:"Details",explainer:["The application has encountered an unhandled error, please try again.","If this problem persists, please file a bug report, using the details below.","Closing this message will restart the application."]}},spotify:{title:"Spotify",explainer:[["Please connect to Spotify. ",Ni(),"We need you to log into Spotify to be able to play music in the browser."],"For Spotify to allow this app to play music, your account needs to be a premium subscription."],signingIn:"Signing in...",signIn:"Sign in to Spotify",signOut:"Sign out",errors:{access_denied:"Access denied, please try again!",unknown:"Something went wrong, please try again!"},stats:{country:"Country",followers:"Followers",premium:"Premium"},details:{hasPremium:"Spotify premium user.",noPremium:"User doesn't have premium account!"}},camera:{title:"Camera",inUse:"Your camera is being used by another process, please close and try again.",type:{desktop:`Desktop
camera`,user:`Selfie
camera`,environment:`Environment
camera`,unknown:"Camera",loading:""},openingCam:"Connecting...",explainer:["To be able to scan the codes, we need access to your device's camera.","Please, give your browser permission to access the camera."],noSupport:["Your device likely doesn't have a camera, or your system doesn't allow your browser to access the camera.","Sadly, you cannot use the app."],noPermission:["Your browser doesn't have the correct permissions, possibly you denied the use of the camera.","To use this application, you need to "],selectedCamera:'You selected "{{label}}" to scan the codes.',switchBanner:"When using the app, you can change the camera at any time.",requestPermission:"Request permission",requestingPermission:"Requesting permission...",permissions:{title:"Reset browser permissions",permissionLink:"reset your browser permissions",deviceDetails:"Device details",explainer:"We couldn't find a page for your browser, please look in your settings to reset the browser permissions.",cta:["If you like, you can ","file a request"," to add your browser to our instructions."]}}};var qi=k("<br>");const Ii={common:{close:"Sluiten",offline:"U bent offline, controleer a.u.b. uw verbinding",refresh:"Pagina verniewen",share:"Deel Guessify",unhandledError:{title:"Er is iets mis gegaan.",details:"Foutgegevens",explainer:["Er heeft zich een niet afgehandelde fout voorgedaan, probeer a.u.b. opniew.","Als dit probleem aan blijft houden, verzoeken wij u vriendelijk een bug rapport in te schieten met de onderstaande gegevens.","Het sluiten van dit bericht zal de applicatie herstarten."]}},spotify:{title:"Spotify",explainer:[["Wilt u a.u.b met Spotify verbinden? ",qi(),"U moet ingelogd zijn bij Spotify om muziek in de browser te kunnen spelen."],"Spotify vereist een premuim account voor muziek in de browser."],signingIn:"Inloggen...",signIn:"Log in bij Spotify",signOut:"Uitloggen",errors:{access_denied:"Toegang geweigerd, probeer opnieuw!",unknown:"Er ging iets mis, probeer opnieuw!"},stats:{country:"Land",followers:"Volgers",premium:"Premium"},details:{hasPremium:"Spotify premium gebruiker.",noPremium:"Gebruiker heeft geen premium account!"}},camera:{title:"Video camera",inUse:"Uw camera wordt gebruikt door een ander process, sluit a.u.b. dit process en probeer opnieuw.",type:{desktop:`Desktop
camera`,user:`Selfie
camera`,environment:`Achterkant
camera`,unknown:"Camera",loading:""},openingCam:"Verbinden...",explainer:["Om de codes te kunnen scannen hebben wij toegang nodig tot uw camera.","Verleen uw browser a.u.b. toegang tot de camera."],noSupport:["Uw apparaat heeft mogelijk geen camera, of uw besturingssysteem staat het gebruik hiervan niet toe.","Helaas kunt u deze applicatie niet gebruiken."],noPermission:["Uw browser geeft geen toestemming tot het gebruik van de camera. Mogelijk heeft u de toestemming geweigerd.","Om gebruik te kunnen maken van de camera moet u "],selectedCamera:'U heeft "{{label}}" geselecteerd voor het scannen.',switchBanner:"U kunt dit later altijd nog veranderen.",requestPermission:"Vraag toestemming",requestingPermission:"Toestemming vragen...",permissions:{title:"Browser toestemming herstellen",deviceDetails:"Apparaat details",permissionLink:"uw browser toestemming herstellen",explainer:"Wij konden geen uitleg vinden voor jouw browser, probeer a.u.b. in uw instellingen te zoeken hoe u de camera toestemming kunt herstellen.",cta:["Wilt u a.u.b. ook ","een verzoek indienen"," om uw eigen browser toe te voegen aan onze instructies?"]}}},ot={en:Li,nl:Ii},Di=Object.getOwnPropertyNames(ot).sort((r,e)=>r.localeCompare(e,void 0,{sensitivity:"base"})),It=()=>localStorage.getItem("stored-locale"),Vn=r=>localStorage.setItem("stored-locale",r),Ui=r=>{const e=r&&Object.keys(ot).includes(r)?r:"en";return ot[e]},[Qt,zi]=q(It()??"en");function Yr(){const r=ri(),e=r.locale&&Object.keys(ot).includes(r.locale)?r.locale:void 0;zi(e??It()??"en"),e&&Vn(e)}const ee=()=>{try{Pe(Yr)}catch(e){console.error(console.trace(),e)}_e(Yr,ti);const r=M(()=>ot[Qt()],[Qt]);return{locale:Qt,locales:Di,dictionary:r,template:Bi}};class Y{api;constructor(e){this.api=e}async getRequest(e){return await this.api.makeRequest("GET",e)}async postRequest(e,t,n=void 0){return await this.api.makeRequest("POST",e,t,n)}async putRequest(e,t,n=void 0){return await this.api.makeRequest("PUT",e,t,n)}async deleteRequest(e,t){return await this.api.makeRequest("DELETE",e,t)}paramsFor(e){const t=new URLSearchParams;for(let n of Object.getOwnPropertyNames(e))(e[n]||e[n]===0||!e[n]&&typeof e[n]=="boolean")&&t.append(n,e[n].toString());return[...t].length>0?`?${t.toString()}`:""}}class ji extends Y{async get(e,t){if(typeof e=="string"){const i=this.paramsFor({market:t});return await this.getRequest(`albums/${e}${i}`)}const n=this.paramsFor({ids:e,market:t});return(await this.getRequest(`albums${n}`)).albums}tracks(e,t,n,s){const i=this.paramsFor({market:t,limit:n,offset:s});return this.getRequest(`albums/${e}/tracks${i}`)}}class Vi extends Y{async get(e){if(typeof e=="string")return this.getRequest(`artists/${e}`);const t=this.paramsFor({ids:e});return(await this.getRequest(`artists${t}`)).artists}albums(e,t,n,s,i){const a=this.paramsFor({include_groups:t,market:n,limit:s,offset:i});return this.getRequest(`artists/${e}/albums${a}`)}topTracks(e,t){const n=this.paramsFor({market:t});return this.getRequest(`artists/${e}/top-tracks${n}`)}relatedArtists(e){return this.getRequest(`artists/${e}/related-artists`)}}class Wi extends Y{async get(e,t){if(typeof e=="string"){const i=this.paramsFor({market:t});return this.getRequest(`audiobooks/${e}${i}`)}const n=this.paramsFor({ids:e,market:t});return(await this.getRequest(`audiobooks${n}`)).audiobooks}getAudiobookChapters(e,t,n,s){const i=this.paramsFor({market:t,limit:n,offset:s});return this.getRequest(`audiobooks/${e}/chapters${i}`)}}class Gi extends Y{getCategories(e,t,n,s){const i=this.paramsFor({country:e,locale:t,limit:n,offset:s});return this.getRequest(`browse/categories${i}`)}getCategory(e,t,n){const s=this.paramsFor({country:t,locale:n});return this.getRequest(`browse/categories/${e}${s}`)}getNewReleases(e,t,n){const s=this.paramsFor({country:e,limit:t,offset:n});return this.getRequest(`browse/new-releases${s}`)}getFeaturedPlaylists(e,t,n,s,i){const a=this.paramsFor({country:e,locale:t,timestamp:n,limit:s,offset:i});return this.getRequest(`browse/featured-playlists${a}`)}getPlaylistsForCategory(e,t,n,s){const i=this.paramsFor({country:t,limit:n,offset:s});return this.getRequest(`browse/categories/${e}/playlists${i}`)}}class Hi extends Y{async get(e,t){if(typeof e=="string"){const i=this.paramsFor({market:t});return this.getRequest(`chapters/${e}${i}`)}const n=this.paramsFor({ids:e,market:t});return(await this.getRequest(`chapters${n}`)).chapters}}class Yi extends Y{async get(e,t){if(typeof e=="string"){const i=this.paramsFor({market:t});return this.getRequest(`episodes/${e}${i}`)}const n=this.paramsFor({ids:e,market:t});return(await this.getRequest(`episodes${n}`)).episodes}}class Xi extends Y{get(e){const t=this.paramsFor(e);return this.getRequest(`recommendations${t}`)}genreSeeds(){return this.getRequest("recommendations/available-genre-seeds")}}class Ki extends Y{getAvailableMarkets(){return this.getRequest("markets")}}class Qi extends Y{getPlaybackState(e,t){const n=this.paramsFor({market:e,additional_types:t});return this.getRequest(`me/player${n}`)}getAvailableDevices(){return this.getRequest("me/player/devices")}getCurrentlyPlayingTrack(e,t){const n=this.paramsFor({market:e,additional_types:t});return this.getRequest(`me/player/currently-playing${n}`)}getRecentlyPlayedTracks(e,t){const n={limit:e};t&&(t.type==="before"?n.before=t.timestamp:t.type==="after"&&(n.after=t.timestamp));const s=this.paramsFor(n);return this.getRequest(`me/player/recently-played${s}`)}getUsersQueue(){return this.getRequest("me/player/queue")}async transferPlayback(e,t){if(e.length>1)throw new Error("Although an array is accepted, only a single device_id is currently supported. Supplying more than one will return 400 Bad Request");await this.putRequest("me/player",{device_ids:e,play:t})}async startResumePlayback(e,t,n,s,i){const a=this.paramsFor({device_id:e});await this.putRequest(`me/player/play${a}`,{context_uri:t,uris:n,offset:s,positionMs:i})}async pausePlayback(e){const t=this.paramsFor({device_id:e});await this.putRequest(`me/player/pause${t}`)}async skipToNext(e){const t=this.paramsFor({device_id:e});await this.postRequest(`me/player/next${t}`)}async skipToPrevious(e){const t=this.paramsFor({device_id:e});await this.postRequest(`me/player/previous${t}`)}async seekToPosition(e,t){const n=this.paramsFor({position_ms:e,device_id:t});await this.putRequest(`me/player/seek${n}`)}async setRepeatMode(e,t){const n=this.paramsFor({state:e,device_id:t});await this.putRequest(`me/player/repeat${n}`)}async setPlaybackVolume(e,t){const n=this.paramsFor({volume_percent:e,device_id:t});await this.putRequest(`me/player/volume${n}`)}async togglePlaybackShuffle(e,t){const n=this.paramsFor({state:e,device_id:t});await this.putRequest(`me/player/shuffle${n}`)}async addItemToPlaybackQueue(e,t){const n=this.paramsFor({uri:e,device_id:t});await this.postRequest(`me/player/queue${n}`)}}class Ji extends Y{getPlaylist(e,t,n,s){const i=this.paramsFor({market:t,fields:n,additional_types:s?.join(",")});return this.getRequest(`playlists/${e}${i}`)}getPlaylistItems(e,t,n,s,i,a){const o=this.paramsFor({market:t,fields:n,limit:s,offset:i,additional_types:a?.join(",")});return this.getRequest(`playlists/${e}/tracks${o}`)}async changePlaylistDetails(e,t){await this.putRequest(`playlists/${e}`,t)}movePlaylistItems(e,t,n,s){return this.updatePlaylistItems(e,{range_start:t,range_length:n,insert_before:s})}updatePlaylistItems(e,t){return this.putRequest(`playlists/${e}/tracks`,t)}async addItemsToPlaylist(e,t,n){await this.postRequest(`playlists/${e}/tracks`,{position:n,uris:t})}async removeItemsFromPlaylist(e,t){await this.deleteRequest(`playlists/${e}/tracks`,t)}getUsersPlaylists(e,t,n){const s=this.paramsFor({limit:t,offset:n});return this.getRequest(`users/${e}/playlists${s}`)}createPlaylist(e,t){return this.postRequest(`users/${e}/playlists`,t)}getPlaylistCoverImage(e){return this.getRequest(`playlists/${e}/images`)}async addCustomPlaylistCoverImage(e,t){let n="";if(t instanceof Buffer)n=t.toString("base64");else if(t instanceof HTMLCanvasElement)n=t.toDataURL("image/jpeg").split(";base64,")[1];else if(t instanceof HTMLImageElement){const s=document.createElement("canvas");s.width=t.width,s.height=t.height;const i=s.getContext("2d");if(!i)throw new Error("Could not get canvas context");i.drawImage(t,0,0),n=s.toDataURL("image/jpeg").split(";base64,")[1]}else if(typeof t=="string")n=t;else throw new Error("ImageData must be a Buffer, HTMLImageElement, HTMLCanvasElement, or string containing a base64 encoded jpeg");await this.addCustomPlaylistCoverImageFromBase64String(e,n)}async addCustomPlaylistCoverImageFromBase64String(e,t){await this.putRequest(`playlists/${e}/images`,t,"image/jpeg")}}class Zi extends Y{async execute(e,t,n,s,i,a){const o=this.paramsFor({q:e,type:t,market:n,limit:s,offset:i,include_external:a});return await this.getRequest(`search${o}`)}}class ea extends Y{async get(e,t){if(typeof e=="string"){const i=this.paramsFor({market:t});return this.getRequest(`shows/${e}${i}`)}const n=this.paramsFor({ids:e,market:t});return(await this.getRequest(`shows${n}`)).shows}episodes(e,t,n,s){const i=this.paramsFor({market:t,limit:n,offset:s});return this.getRequest(`shows/${e}/episodes${i}`)}}class ta extends Y{async get(e,t){if(typeof e=="string"){const i=this.paramsFor({market:t});return this.getRequest(`tracks/${e}${i}`)}const n=this.paramsFor({ids:e,market:t});return(await this.getRequest(`tracks${n}`)).tracks}async audioFeatures(e){if(typeof e=="string")return this.getRequest(`audio-features/${e}`);const t=this.paramsFor({ids:e});return(await this.getRequest(`audio-features${t}`)).audio_features}audioAnalysis(e){return this.getRequest(`audio-analysis/${e}`)}}const _r={access_token:"emptyAccessToken",token_type:"",expires_in:0,refresh_token:"",expires:-1};function Ze(r){return r===_r}class ra extends Y{profile(e){return this.getRequest(`users/${e}`)}}class na extends Y{albums;audiobooks;episodes;playlists;shows;tracks;constructor(e){super(e),this.albums=new sa(e),this.audiobooks=new ia(e),this.episodes=new aa(e),this.playlists=new oa(e),this.shows=new ca(e),this.tracks=new ua(e)}profile(){return this.getRequest("me")}topItems(e,t,n,s){const i=this.paramsFor({time_range:t,limit:n,offset:s});return this.getRequest(`me/top/${e}${i}`)}followedArtists(e,t){const n=this.paramsFor({type:"artist",after:e,limit:t});return this.getRequest(`me/following${n}`)}async followArtistsOrUsers(e,t){const n=this.paramsFor({type:t});await this.putRequest(`me/following${n}`,{ids:e})}async unfollowArtistsOrUsers(e,t){const n=this.paramsFor({type:t});await this.deleteRequest(`me/following${n}`,{ids:e})}followsArtistsOrUsers(e,t){const n=this.paramsFor({ids:e,type:t});return this.getRequest(`me/following/contains${n}`)}}class sa extends Y{savedAlbums(e,t,n){const s=this.paramsFor({limit:e,offset:t,market:n});return this.getRequest(`me/albums${s}`)}async saveAlbums(e){await this.putRequest("me/albums",e)}async removeSavedAlbums(e){await this.deleteRequest("me/albums",e)}hasSavedAlbums(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/albums/contains${t}`)}}class ia extends Y{savedAudiobooks(e,t){const n=this.paramsFor({limit:e,offset:t});return this.getRequest(`me/audiobooks${n}`)}async saveAudiobooks(e){await this.putRequest("me/audiobooks",e)}async removeSavedAudiobooks(e){await this.deleteRequest("me/audiobooks",e)}hasSavedAudiobooks(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/audiobooks/contains${t}`)}}class aa extends Y{savedEpisodes(e,t,n){const s=this.paramsFor({market:e,limit:t,offset:n});return this.getRequest(`me/episodes${s}`)}async saveEpisodes(e){await this.putRequest("me/episodes",e)}async removeSavedEpisodes(e){await this.deleteRequest("me/episodes",e)}hasSavedEpisodes(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/episodes/contains${t}`)}}class oa extends Y{playlists(e,t){const n=this.paramsFor({limit:e,offset:t});return this.getRequest(`me/playlists${n}`)}async follow(e){await this.putRequest(`playlists/${e}/followers`)}async unfollow(e){await this.deleteRequest(`playlists/${e}/followers`)}isFollowing(e,t){const n=this.paramsFor({ids:t});return this.getRequest(`playlists/${e}/followers/contains${n}`)}}class ca extends Y{savedShows(e,t){const n=this.paramsFor({limit:e,offset:t});return this.getRequest(`me/shows${n}`)}saveShows(e){const t=this.paramsFor({ids:e});return this.putRequest(`me/shows${t}`)}removeSavedShows(e,t){const n=this.paramsFor({ids:e,market:t});return this.deleteRequest(`me/shows${n}`)}hasSavedShow(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/shows/contains${t}`)}}class ua extends Y{savedTracks(e,t,n){const s=this.paramsFor({limit:e,offset:t,market:n});return this.getRequest(`me/tracks${s}`)}async saveTracks(e){await this.putRequest("me/tracks",e)}async removeSavedTracks(e){await this.deleteRequest("me/tracks",e)}hasSavedTracks(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/tracks/contains${t}`)}}class la{static get current(){return this.hasSubtleCrypto?window.crypto:this.tryLoadNodeWebCrypto()}static get hasSubtleCrypto(){return typeof window<"u"&&typeof window.crypto<"u"&&typeof window.crypto.subtle<"u"}static tryLoadNodeWebCrypto(){try{const{webcrypto:e}=require("crypto");return e}catch(e){throw e}}}class ge{static async refreshCachedAccessToken(e,t){const n=await ge.refreshToken(e,t.refresh_token);return ge.toCachable(n)}static toCachable(e){return e.expires&&e.expires===-1?e:{...e,expires:this.calculateExpiry(e)}}static calculateExpiry(e){return Date.now()+e.expires_in*1e3}static async refreshToken(e,t){const n=new URLSearchParams;n.append("client_id",e),n.append("grant_type","refresh_token"),n.append("refresh_token",t);const s=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n}),i=await s.text();if(!s.ok)throw new Error(`Failed to refresh token: ${s.statusText}, ${i}`);return JSON.parse(i)}static generateCodeVerifier(e){let t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let s=0;s<e;s++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}static async generateCodeChallenge(e){const t=new TextEncoder().encode(e),n=await la.current.subtle.digest("SHA-256",t),s=[...new Uint8Array(n)];return(typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(String.fromCharCode.apply(null,s))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}}class rt{clientId;clientSecret;scopes;static cacheKey="spotify-sdk:ClientCredentialsStrategy:token";configuration=null;get cache(){return this.configuration.cachingStrategy}constructor(e,t,n=[]){this.clientId=e,this.clientSecret=t,this.scopes=n}setConfiguration(e){this.configuration=e}async getOrCreateAccessToken(){return await this.cache.getOrCreate(rt.cacheKey,async()=>{const t=await this.getTokenFromApi();return ge.toCachable(t)},async t=>{const n=await this.getTokenFromApi();return ge.toCachable(n)})}async getAccessToken(){return await this.cache.get(rt.cacheKey)}removeAccessToken(){this.cache.remove(rt.cacheKey)}async getTokenFromApi(){const e={grant_type:"client_credentials",scope:this.scopes.join(" ")},t=Object.keys(e).map(l=>l+"="+e[l]).join("&"),n=typeof Buffer<"u",s=`${this.clientId}:${this.clientSecret}`,i=n?Buffer.from(s).toString("base64"):btoa(s),a=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Basic ${i}`},body:t});if(a.status!==200)throw new Error("Failed to get access token.");return await a.json()}}class nt{clientId;redirectUri;scopes;static cacheKey="spotify-sdk:ImplicitGrantStrategy:token";configuration=null;get cache(){return this.configuration.cachingStrategy}constructor(e,t,n){this.clientId=e,this.redirectUri=t,this.scopes=n}setConfiguration(e){this.configuration=e}async getOrCreateAccessToken(){return await this.cache.getOrCreate(nt.cacheKey,async()=>{const t=await this.redirectOrVerifyToken();return ge.toCachable(t)},async t=>ge.refreshCachedAccessToken(this.clientId,t))}async getAccessToken(){return await this.cache.get(nt.cacheKey)}removeAccessToken(){this.cache.remove(nt.cacheKey)}async redirectOrVerifyToken(){const e=new URLSearchParams(window.location.hash.substring(1)),t=e.get("access_token");if(t)return Promise.resolve({access_token:t,token_type:e.get("token_type")??"",expires_in:parseInt(e.get("expires_in")??"0"),refresh_token:e.get("refresh_token")??"",expires:Number(e.get("expires"))||0});var s=(this.scopes??[]).join(" ");const i=new URLSearchParams;i.append("client_id",this.clientId),i.append("response_type","token"),i.append("redirect_uri",this.redirectUri),i.append("scope",s);const a="https://accounts.spotify.com/authorize?"+i.toString();return this.configuration.redirectionStrategy.redirect(a),_r}}class Ve{clientId;redirectUri;scopes;static cacheKey="spotify-sdk:AuthorizationCodeWithPKCEStrategy:token";configuration=null;get cache(){return this.configuration.cachingStrategy}constructor(e,t,n){this.clientId=e,this.redirectUri=t,this.scopes=n}setConfiguration(e){this.configuration=e}async getOrCreateAccessToken(){return await this.cache.getOrCreate(Ve.cacheKey,async()=>{const t=await this.redirectOrVerifyToken();return ge.toCachable(t)},async t=>ge.refreshCachedAccessToken(this.clientId,t))}async getAccessToken(){return await this.cache.get(Ve.cacheKey)}removeAccessToken(){this.cache.remove(Ve.cacheKey)}async redirectOrVerifyToken(){const t=new URLSearchParams(window.location.search).get("code");if(t){const n=await this.verifyAndExchangeCode(t);return this.removeCodeFromUrl(),n}return this.redirectToSpotify(),_r}async redirectToSpotify(){const e=ge.generateCodeVerifier(128),t=await ge.generateCodeChallenge(e),n={verifier:e,expiresOnAccess:!0};this.cache.setCacheItem("spotify-sdk:verifier",n);const s=await this.generateRedirectUrlForUser(this.scopes,t);await this.configuration.redirectionStrategy.redirect(s)}async verifyAndExchangeCode(e){const n=(await this.cache.get("spotify-sdk:verifier"))?.verifier;if(!n)throw new Error("No verifier found in cache - can't validate query string callback parameters.");return await this.configuration.redirectionStrategy.onReturnFromRedirect(),await this.exchangeCodeForToken(e,n)}removeCodeFromUrl(){const e=new URL(window.location.href);e.searchParams.delete("code");const t=e.search?e.href:e.href.replace("?","");window.history.replaceState({},document.title,t)}async generateRedirectUrlForUser(e,t){const n=e.join(" "),s=new URLSearchParams;return s.append("client_id",this.clientId),s.append("response_type","code"),s.append("redirect_uri",this.redirectUri),s.append("scope",n),s.append("code_challenge_method","S256"),s.append("code_challenge",t),`https://accounts.spotify.com/authorize?${s.toString()}`}async exchangeCodeForToken(e,t){const n=new URLSearchParams;n.append("client_id",this.clientId),n.append("grant_type","authorization_code"),n.append("code",e),n.append("redirect_uri",this.redirectUri),n.append("code_verifier",t);const s=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n}),i=await s.text();if(!s.ok)throw new Error(`Failed to exchange code for token: ${s.statusText}, ${i}`);return JSON.parse(i)}}class da{async deserialize(e){const t=await e.text();return t.length>0?JSON.parse(t):null}}class fa{async validateResponse(e){switch(e.status){case 401:throw new Error("Bad or expired token. This can happen if the user revoked a token or the access token has expired. You should re-authenticate the user.");case 403:const t=await e.text();throw new Error(`Bad OAuth request (wrong consumer key, bad nonce, expired timestamp...). Unfortunately, re-authenticating the user won't help here. Body: ${t}`);case 429:throw new Error("The app has exceeded its rate limits.");default:if(!e.status.toString().startsWith("20")){const n=await e.text();throw new Error(`Unrecognised response code: ${e.status} - ${e.statusText}. Body: ${n}`)}}}}class ha{async handleErrors(e){return!1}}class ga{async redirect(e){document.location=e.toString()}async onReturnFromRedirect(){}}class Wn{storage;updateFunctions;autoRenewInterval;autoRenewWindow;constructor(e,t=new Map,n=0,s=2*60*1e3){this.storage=e,this.updateFunctions=t,this.autoRenewInterval=n,this.autoRenewWindow=s,this.autoRenewInterval>0&&setInterval(()=>this.autoRenewRenewableItems(),this.autoRenewInterval)}async getOrCreate(e,t,n){n&&this.updateFunctions.set(e,n);const s=await this.get(e);if(s)return s;const i=await t();if(!i)throw new Error("Could not create cache item");return Ze(i)||this.setCacheItem(e,i),i}async get(e){let t=this.storage.get(e),n=t?JSON.parse(t):null;if(this.itemDueToExpire(n)&&this.updateFunctions.has(e)){const s=this.updateFunctions.get(e);await this.tryUpdateItem(e,n,s),t=this.storage.get(e),n=t?JSON.parse(t):null}return n?n.expires&&(n.expires===-1||n.expires<=Date.now())?(this.remove(e),null):(n.expiresOnAccess&&n.expiresOnAccess===!0&&this.remove(e),n):null}set(e,t,n){const s=Date.now()+n,i={...t,expires:s};this.setCacheItem(e,i)}setCacheItem(e,t){const n=JSON.stringify(t);this.storage.set(e,n)}remove(e){this.storage.remove(e)}itemDueToExpire(e){return!e||!e.expires?!1:e.expires-Date.now()<this.autoRenewWindow}async autoRenewRenewableItems(){this.updateFunctions.forEach(async(e,t)=>{const n=await this.get(t);n&&e&&this.itemDueToExpire(n)&&await this.tryUpdateItem(t,n,e)})}async tryUpdateItem(e,t,n){try{const s=await n(t);s&&this.setCacheItem(e,s)}catch(s){console.error(s)}}}class ma extends Wn{constructor(){super(new pa)}}class pa{get(e){return localStorage.getItem(e)}set(e,t){localStorage.setItem(e,t)}remove(e){localStorage.removeItem(e)}}class va extends Wn{constructor(){super(new wa)}}class wa{cache=new Map;get(e){return this.cache.get(e)??null}set(e,t){this.cache.set(e,t)}remove(e){this.cache.delete(e)}}class ya{clientId;accessToken;refreshTokenAction;constructor(e,t,n){this.clientId=e,this.accessToken=t,this.refreshTokenAction=n||ge.refreshCachedAccessToken,this.accessToken.expires||(this.accessToken.expires=ge.calculateExpiry(this.accessToken))}setConfiguration(e){}async getOrCreateAccessToken(){if(this.accessToken.expires&&this.accessToken.expires<=Date.now()){const e=await this.refreshTokenAction(this.clientId,this.accessToken);this.accessToken=e}return this.accessToken}async getAccessToken(){return this.accessToken}removeAccessToken(){this.accessToken={access_token:"",token_type:"",expires_in:0,refresh_token:"",expires:0}}}class $e{sdkConfig;static rootUrl="https://api.spotify.com/v1/";authenticationStrategy;albums;artists;audiobooks;browse;chapters;episodes;recommendations;markets;player;playlists;shows;tracks;users;search;currentUser;constructor(e,t){this.sdkConfig=this.initializeSdk(t),this.albums=new ji(this),this.artists=new Vi(this),this.audiobooks=new Wi(this),this.browse=new Gi(this),this.chapters=new Hi(this),this.episodes=new Yi(this),this.recommendations=new Xi(this),this.markets=new Ki(this),this.player=new Qi(this),this.playlists=new Ji(this),this.shows=new ea(this),this.tracks=new ta(this),this.users=new ra(this),this.currentUser=new na(this);const n=new Zi(this);this.search=n.execute.bind(n),this.authenticationStrategy=e,this.authenticationStrategy.setConfiguration(this.sdkConfig)}async makeRequest(e,t,n=void 0,s=void 0){try{const i=await this.authenticationStrategy.getOrCreateAccessToken();if(Ze(i))return console.warn("No access token found, authenticating now."),null;const a=i?.access_token,o=$e.rootUrl+t,l={method:e,headers:{Authorization:`Bearer ${a}`,"Content-Type":s??"application/json"},body:n?typeof n=="string"?n:JSON.stringify(n):void 0};this.sdkConfig.beforeRequest(o,l);const c=await this.sdkConfig.fetch(o,l);return this.sdkConfig.afterRequest(o,l,c),c.status===204?null:(await this.sdkConfig.responseValidator.validateResponse(c),this.sdkConfig.deserializer.deserialize(c))}catch(i){if(!await this.sdkConfig.errorHandler.handleErrors(i))throw i;return null}}initializeSdk(e){const t=typeof window<"u";return{...{fetch:(s,i)=>fetch(s,i),beforeRequest:(s,i)=>{},afterRequest:(s,i,a)=>{},deserializer:new da,responseValidator:new fa,errorHandler:new ha,redirectionStrategy:new ga,cachingStrategy:t?new ma:new va},...e}}switchAuthenticationStrategy(e){this.authenticationStrategy=e,this.authenticationStrategy.setConfiguration(this.sdkConfig),this.authenticationStrategy.getOrCreateAccessToken()}async authenticate(){const e=await this.authenticationStrategy.getOrCreateAccessToken();return{authenticated:e.expires>Date.now()&&!Ze(e),accessToken:e}}async getAccessToken(){return this.authenticationStrategy.getAccessToken()}logOut(){this.authenticationStrategy.removeAccessToken()}static withUserAuthorization(e,t,n=[],s){const i=new Ve(e,t,n);return new $e(i,s)}static withClientCredentials(e,t,n=[],s){const i=new rt(e,t,n);return new $e(i,s)}static withImplicitGrant(e,t,n=[],s){const i=new nt(e,t,n);return new $e(i,s)}static withAccessToken(e,t,n){const s=new ya(e,t);return new $e(s,n)}static async performUserAuthorization(e,t,n,s,i){const a=new Ve(e,t,n),l=await new $e(a,i).authenticationStrategy.getOrCreateAccessToken();return Ze(l)||(typeof s=="string"?(console.log("Posting access token to postback URL."),await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})):await s(l)),{authenticated:l.expires>Date.now()&&!Ze(l),accessToken:l}}}const ba="fea5ab12dbbb422485f6621e2cf89e24",Sa="https://marvin-brouwer.github.io",ct=()=>$e.withUserAuthorization(ba,`${Sa}/guessify/spotify-auth`,["streaming","user-read-private","user-read-email"]),Ma=()=>ct().logOut(),xa=()=>{Ma(),je(void 0)};async function ka(){const r=`../${It()}/`,e=new URL(window.location.href);if(e.searchParams.has("code"))try{const t=await ct().authenticate();return je(t.authenticated?"success":"error.auth_failed"),r}catch(t){return je(`error.auth_failed.${t.message}`),r}return e.searchParams.has("error")?(je(`error.${e.searchParams.get("error")}`),r):(je("error.invalid_request"),r)}const[_a,je]=q(),or=Xe({api:Object.assign(ct(),{logOut:xa}),status:_a,handleAuthReturn:ka}),Dt=()=>Ke(or),Pa=r=>(Pe(async()=>{if(await xe(()=>ct().getAccessToken()).then(t=>!!t)){const t=await xe(()=>ct().authenticate());je(t.authenticated?"success":"error.auth_failed")}}),b(or.Provider,{get value(){return or.defaultValue},get children(){return pe(()=>r.children)()}})),Et=r=>r()==="success";function Aa(){const{api:r,status:e}=Dt();if(!Et(e)){We(!1);return}r.logOut(),We(!1)}async function Xr(r){const{api:e,status:t}=Dt();Et(t)&&We(!1),Vn(r),We(!0);try{if((await xe(()=>e.authenticate())).accessToken.access_token==="emptyAccessToken")return;const s=await xe(()=>e.currentUser.profile());Ca(s)}catch(n){const s=n;throw s.restore=()=>{s.message.includes("Unfortunately, re-authenticating the user won't help here")&&localStorage.removeItem("spotify-sdk:AuthorizationCodeWithPKCEStrategy:token")},s}finally{We(!1)}}const[Gn,We]=q(!1),[Mt,Ca]=q(),Hn=Xe({logIn:()=>Promise.resolve(),logOut:()=>Promise.resolve(),isAuthenticating:Gn,isAuthenticated:()=>!1,isValid:()=>!1,profile:Mt,errorMessage:()=>{}}),He=()=>Ke(Hn),Ea=r=>{const{api:e,status:t}=Dt(),{dictionary:n,locale:s}=ee();Pe(async()=>{await xe(()=>e.getAccessToken()).then(l=>!!l)&&(We(!0),await Xr(s()))});const i=()=>Et(t)&&Mt()?.product==="premium",a=()=>{if(t()&&t()!=="success")return t()==="error.access_denied"?n().spotify.errors.access_denied:n().spotify.errors.unknown};return b(Hn.Provider,{get value(){return{isValid:M(i,[t,Mt]),isAuthenticated:M(()=>Et(t),t),errorMessage:a,isAuthenticating:Gn,logIn:()=>Xr(s()),logOut:Aa,profile:Mt}},get children(){return pe(()=>r.children)()}})},$a="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20enable-background='new%200%200%2024%2024'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3cg%3e%3crect%20fill='none'%20height='24'%20width='24'/%3e%3c/g%3e%3cg%3e%3cpath%20d='M12%202C6.48%202%202%206.48%202%2012s4.48%2010%2010%2010%2010-4.48%2010-10S17.52%202%2012%202zm0%204c1.93%200%203.5%201.57%203.5%203.5S13.93%2013%2012%2013s-3.5-1.57-3.5-3.5S10.07%206%2012%206zm0%2014c-2.03%200-4.43-.82-6.14-2.88C7.55%2015.8%209.68%2015%2012%2015s4.45.8%206.14%202.12C16.43%2019.18%2014.03%2020%2012%2020z'/%3e%3c/g%3e%3c/svg%3e",Fa="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20enable-background='new%200%200%2024%2024'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%231ed760'%3e%3cg%3e%3crect%20fill='none'%20height='24'%20width='24'/%3e%3c/g%3e%3cg%3e%3cpath%20d='M23,12l-2.44-2.79l0.34-3.69l-3.61-0.82L15.4,1.5L12,2.96L8.6,1.5L6.71,4.69L3.1,5.5L3.44,9.2L1,12l2.44,2.79l-0.34,3.7%20l3.61,0.82L8.6,22.5l3.4-1.47l3.4,1.46l1.89-3.19l3.61-0.82l-0.34-3.69L23,12z%20M10.09,16.72l-3.8-3.81l1.48-1.48l2.32,2.33%20l5.85-5.87l1.48,1.48L10.09,16.72z'/%3e%3c/g%3e%3c/svg%3e",Ra="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23d71e1e'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M1%2021h22L12%202%201%2021zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z'/%3e%3c/svg%3e",Yn="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M17%207l-1.41%201.41L18.17%2011H8v2h10.17l-2.58%202.58L17%2017l5-5zM4%205h8V3H4c-1.1%200-2%20.9-2%202v14c0%201.1.9%202%202%202h8v-2H4V5z'/%3e%3c/svg%3e",Oa="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20enable-background='new%200%200%2024%2024'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3cg%3e%3crect%20fill='none'%20height='24'%20width='24'/%3e%3c/g%3e%3cg%3e%3cpath%20d='M11,7L9.6,8.4l2.6,2.6H2v2h10.2l-2.6,2.6L11,17l5-5L11,7z%20M20,19h-8v2h8c1.1,0,2-0.9,2-2V5c0-1.1-0.9-2-2-2h-8v2h8V19z'/%3e%3c/g%3e%3c/svg%3e";var Ta=k("<img>"),Ba=k("<button class=app-button><span>");const Fe=({text:r,imageUrl:e,...t})=>(()=>{var n=Ba(),s=n.firstChild;return qs(n,t,!1),w(s,r),w(n,b(Be,{when:e,get children(){var i=Ta();return J(i,"src",e),i}}),null),n})();var Na=k("<div class=spotify-card><h2>"),La=k('<div class="spotify-login-card card"><div class=details><p></p><p></p></div><div class=controls>'),qa=k("<p class=error>"),Ia=k("<img class=placeholder>"),Da=k('<div class="spotify-profile-card card"><div class=thumbnail></div><p class=stats><b></b><i></i></p><p class=stats><b></b><i></i></p><p class=stats><b></b><i><img></i></p><div class=details><h3></h3></div><div class=controls>'),Kr=k("<p>"),Ua=k("<p class=no-premium>");const za=()=>{const r=He(),{hasMediaSupport:e}=Ae();if(!e())return null;const{dictionary:t}=ee(),n=()=>!He().isAuthenticating()&&r.isAuthenticated()?b(Va,{}):b(ja,{});return(()=>{var s=Na(),i=s.firstChild;return w(i,()=>t().spotify.title),w(s,n,null),s})()},ja=()=>{const r=He(),{dictionary:e}=ee();return(()=>{var t=La(),n=t.firstChild,s=n.firstChild,i=s.nextSibling,a=n.nextSibling;return w(s,()=>e().spotify.explainer[0]),w(i,()=>e().spotify.explainer[1]),w(n,(()=>{var o=M(()=>!!r.errorMessage());return()=>o()&&(()=>{var l=qa();return w(l,()=>r.errorMessage()),l})()})(),null),w(a,b(Fe,{get disabled(){return r.isAuthenticating()},get imageUrl(){return!r.isAuthenticating()&&Oa},get text(){return M(()=>!!r.isAuthenticating())()?e().spotify.signingIn:e().spotify.signIn},onClick:()=>{r.logIn()}})),t})()},Va=()=>{const r=He(),{dictionary:e}=ee(),t=r.profile();if(!t)return null;const n=t.images?.find(o=>o.width===300)??void 0,[s,i]=q((()=>{var o=Ia();return J(o,"src",$a),o})());_e(()=>{if(!n||s().src===n.url)return;const o=s().cloneNode(!0);o.className="",o.addEventListener("load",()=>i(o),{once:!0}),o.src=n.url},n);const a=r.isValid();return(()=>{var o=Da(),l=o.firstChild,c=l.nextSibling,u=c.firstChild,d=u.nextSibling,f=c.nextSibling,g=f.firstChild,m=g.nextSibling,h=f.nextSibling,p=h.firstChild,y=p.nextSibling,S=y.firstChild,$=h.nextSibling,x=$.firstChild,B=$.nextSibling;return w(l,s),w(u,()=>e().spotify.stats.country),w(d,()=>t.country),w(g,()=>e().spotify.stats.followers),w(m,()=>t.followers.total),w(p,()=>e().spotify.stats.premium),J(S,"src",a?Fa:Ra),w(x,()=>t.display_name),w($,a?(()=>{var E=Kr();return w(E,()=>e().spotify.details.hasPremium),E})():[(()=>{var E=Ua();return w(E,()=>e().spotify.details.noPremium),E})(),(()=>{var E=Kr();return w(E,()=>e().spotify.explainer[1]),E})()],null),w(B,b(Fe,{get text(){return e().spotify.signOut},imageUrl:Yn,onClick:E=>{E.currentTarget.disabled==!0,r.logOut()}})),o})()},Jt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20enable-background='new%200%200%2024%2024'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3crect%20fill='none'%20height='24'%20width='24'/%3e%3cpath%20d='M3,4V1h2v3h3v2H5v3H3V6H0V4H3z%20M6,10V7h3V4h7l1.83,2H21c1.1,0,2,0.9,2,2v12c0,1.1-0.9,2-2,2H5c-1.1,0-2-0.9-2-2V10H6z%20M13,19c2.76,0,5-2.24,5-5s-2.24-5-5-5s-5,2.24-5,5S10.24,19,13,19z%20M9.8,14c0,1.77,1.43,3.2,3.2,3.2s3.2-1.43,3.2-3.2%20s-1.43-3.2-3.2-3.2S9.8,12.23,9.8,14z'/%3e%3c/svg%3e",Wa="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M19%206.41L17.59%205%2012%2010.59%206.41%205%205%206.41%2010.59%2012%205%2017.59%206.41%2019%2012%2013.41%2017.59%2019%2019%2017.59%2013.41%2012z'/%3e%3c/svg%3e";var Ga=k("<dialog class=app-dialog><div><div class=details></div><div class=controls>");const Qr=(r,e)=>t=>{if(r.hidden)return;const n=r.getBoundingClientRect();n.top<=t.clientY&&t.clientY<=n.top+n.height&&n.left<=t.clientX&&t.clientX<=n.left+n.width||e()},Pr=()=>{const{dictionary:r}=ee(),[e,t]=q(),[n,s]=q(!1),[i,a]=q(),o=()=>{if(!n())return!1;if(!i())return s(!1),e()?.close();i()()!==!1&&(s(!1),e()?.close())};return{Modal:c=>{const u=()=>n()?pe(()=>c.children)():pe(()=>{})();return t((()=>{var d=Ga(),f=d.firstChild,g=f.firstChild,m=g.nextSibling;return w(g,u),w(m,b(Fe,{get text(){return r().common.close},imageUrl:Wa,onClick:o})),le(h=>{var p=!n(),y=`modal ${c.class??""}`;return p!==h.e&&(d.inert=h.e=p),y!==h.t&&Lt(f,h.t=y),h},{e:void 0,t:void 0}),d})()),a(()=>c.beforeClose),Pe(()=>{e()?.addEventListener("click",Qr(e(),o))}),ye(()=>{o(),e()?.removeEventListener("click",Qr(e(),o))}),b(Ws,{get children(){return e()}})},showModal:()=>{if(n())return!1;e&&(s(!0),e()?.showModal())},closeModal:o}};var Ha=k("<a href=#instructions>"),Ya=k("<a target=_blank>"),Xa=k("<h2>"),Jr=k("<p>"),Ka=k("<p><a href=#todo target=_blank>"),Qa=k("<details><summary></summary><pre>");const Ja=Mr(),Za=()=>{const{locale:r,dictionary:e}=ee(),{Modal:t,showModal:n}=Pr(),s=M(()=>eo(Ja,r()),r),i=async o=>(o.preventDefault(),o.stopPropagation(),n(),!1),a=M(()=>s()?(()=>{var o=Ya();return w(o,()=>e().camera.permissions.permissionLink),le(()=>J(o,"href",s())),o})():(()=>{var o=Ha();return o.$$click=i,w(o,()=>e().camera.permissions.permissionLink),o})(),s);return[M(a),b(t,{class:"reset-permission-modal",get children(){return[(()=>{var o=Xa();return w(o,()=>e().camera.permissions.title),o})(),(()=>{var o=Jr();return w(o,()=>e().camera.permissions.explainer),o})(),(()=>{var o=Ka(),l=o.firstChild;return w(o,()=>e().camera.permissions.cta[0],l),w(l,()=>e().camera.permissions.cta[1]),w(o,()=>e().camera.permissions.cta[2],null),o})(),(()=>{var o=Qa(),l=o.firstChild,c=l.nextSibling;return w(l,()=>e().camera.permissions.deviceDetails),w(c,()=>JSON.stringify(Mr(),null,4)),o})(),Jr()]}})]};function eo(r,e){if(r.browser.name==="Chrome"){if(r.platform.type==="desktop")return`https://support.google.com/chrome/answer/114662?hl=${e}&co=GENIE.Platform%3DDesktop`;if(r.os.name==="Android")return`https://support.google.com/chrome/answer/114662?hl=${e}&co=GENIE.Platform%3DAndroid`;if(r.os.name==="IOS")return`https://support.google.com/chrome/answer/114662?hl=${e}&co=GENIE.Platform%3DiOS`}}Nt(["click"]);const to="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='rgb(32,%2032,%2032)'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M9.4%2010.5l4.77-8.26C13.47%202.09%2012.75%202%2012%202c-2.4%200-4.6.85-6.32%202.25l3.66%206.35.06-.1zM21.54%209c-.92-2.92-3.15-5.26-6-6.34L11.88%209h9.66zm.26%201h-7.49l.29.5%204.76%208.25C21%2016.97%2022%2014.61%2022%2012c0-.69-.07-1.35-.2-2zM8.54%2012l-3.9-6.75C3.01%207.03%202%209.39%202%2012c0%20.69.07%201.35.2%202h7.49l-1.15-2zm-6.08%203c.92%202.92%203.15%205.26%206%206.34L12.12%2015H2.46zm11.27%200l-3.9%206.76c.7.15%201.42.24%202.17.24%202.4%200%204.6-.85%206.32-2.25l-3.66-6.35-.93%201.6z'/%3e%3c/svg%3e",ro="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='rgb(32,%2032,%2032)'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3ccircle%20cx='12'%20cy='12'%20r='3.2'/%3e%3cpath%20d='M9%202L7.17%204H4c-1.1%200-2%20.9-2%202v12c0%201.1.9%202%202%202h16c1.1%200%202-.9%202-2V6c0-1.1-.9-2-2-2h-3.17L15%202H9zm3%2015c-2.76%200-5-2.24-5-5s2.24-5%205-5%205%202.24%205%205-2.24%205-5%205z'/%3e%3c/svg%3e",no="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='rgb(32,%2032,%2032)'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M12%2012c2.21%200%204-1.79%204-4s-1.79-4-4-4-4%201.79-4%204%201.79%204%204%204zm0%202c-2.67%200-8%201.34-8%204v2h16v-2c0-2.66-5.33-4-8-4z'/%3e%3c/svg%3e",so="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='rgb(32,%2032,%2032)'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M21%2019V5c0-1.1-.9-2-2-2H5c-1.1%200-2%20.9-2%202v14c0%201.1.9%202%202%202h14c1.1%200%202-.9%202-2zM8.5%2013.5l2.5%203.01L14.5%2012l4.5%206H5l3.5-4.5z'/%3e%3c/svg%3e";var wt=k("<img>");const io=r=>M(()=>{const e=r()?.facing;return e==="loading"?null:e==="desktop"?(()=>{var t=wt();return J(t,"src",ro),t})():e==="user"?(()=>{var t=wt();return J(t,"src",no),t})():e==="environment"?(()=>{var t=wt();return J(t,"src",so),t})():(()=>{var t=wt();return J(t,"src",to),t})()},r),ao="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20enable-background='new%200%200%2024%2024'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3cg%3e%3cpath%20d='M0,0h24v24H0V0z'%20fill='none'/%3e%3c/g%3e%3cg%3e%3cg%3e%3cpath%20d='M16,7h-1l-1-1h-4L9,7H8C6.9,7,6,7.9,6,9v6c0,1.1,0.9,2,2,2h8c1.1,0,2-0.9,2-2V9C18,7.9,17.1,7,16,7z%20M12,14%20c-1.1,0-2-0.9-2-2c0-1.1,0.9-2,2-2s2,0.9,2,2C14,13.1,13.1,14,12,14z'/%3e%3cpath%20d='M8.57,0.51l4.48,4.48V2.04c4.72,0.47,8.48,4.23,8.95,8.95c0,0,2,0,2,0C23.34,3.02,15.49-1.59,8.57,0.51z'/%3e%3cpath%20d='M10.95,21.96C6.23,21.49,2.47,17.73,2,13.01c0,0-2,0-2,0c0.66,7.97,8.51,12.58,15.43,10.48l-4.48-4.48V21.96z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",oo="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M12%205.83L15.17%209l1.41-1.41L12%203%207.41%207.59%208.83%209%2012%205.83zm0%2012.34L8.83%2015l-1.41%201.41L12%2021l4.59-4.59L15.17%2015%2012%2018.17z'/%3e%3c/svg%3e";var co=k("<option>"),uo=k("<select>"),lo=k("<img>"),fo=k("<div class=app-dropdown><div><span>");const Xn=({disabled:r,value:e,onChange:t,options:n,selectImageUrl:s,disabledLabel:i})=>{const a=M(()=>n().find(({id:f})=>f===e())?.text,[n,e]),o=M(()=>n().map(({id:f,text:g})=>(()=>{var m=co();return m.value=f,w(m,g),le(()=>m.selected=f===e()),m})()),[e,n]),l=M(()=>r?r():!1,r),c=M(()=>n().length>1,n),u=M(()=>s!==!1&&c(),[c,s]),d=M(()=>{if(u())return s||oo},[u,s]);return(()=>{var f=fo(),g=f.firstChild,m=g.firstChild;return w(f,b(Be,{get when(){return c()},fallback:void 0,get children(){var h=uo();return h.addEventListener("change",async p=>{if(p.target.value===e())return;const y=p.target.value,S=e();t(p,y,S)}),w(h,o),le(()=>h.disabled=l()),h}}),g),w(m,(()=>{var h=M(()=>!!(l()&&i));return()=>h()?i:a()})()),w(g,b(Be,{get when(){return u()},fallback:void 0,get children(){var h=lo();return le(()=>J(h,"src",d())),h}}),null),le(()=>Lt(g,l()?"fake-button disabled":"fake-button")),f})()};var ho=k("<div class=camera-select-button>");const Kn=({nameRef:r})=>{const{camera:e,devices:t,requestCamera:n,stopCameraStream:s}=Ae(),{dictionary:i}=ee(),a=M(()=>t().map(o=>({id:o.deviceId,text:o.label})),[t,e]);return(()=>{var o=ho();return w(o,b(Xn,{value:()=>e()?.id,options:a,disabled:()=>!e(),get disabledLabel(){return i().camera.openingCam},selectImageUrl:ao,onChange:async(l,c)=>{r?.(c),await s(),await n(c)}})),o})()};var go=k("<video loop>"),mo=k("<video>");const Qn=r=>{const{cameraStream:e,camera:t}=Ae(),s=go();r.ref?.(s),ye(()=>{r.ref?.(void 0);const a=s;a.pause();const o=a.srcObject,l=o?.getTracks()??[];for(const c of l)o?.removeTrack(c);a.src="",a.srcObject=null}),_e(()=>{const a=s,o=e();if(Zr(o)){if(po(o,a.srcObject))return;a.removeAttribute("src"),a.srcObject=o,a.onloadedmetadata=()=>{a.play()},a.srcObject.addEventListener("removetrack",()=>{a.pause()},{once:!0}),a.srcObject.getTracks()[0].addEventListener("ended",()=>{a.pause()},{once:!0})}else{a.pause();const l=a.srcObject,c=l?.getTracks()??[];for(const u of c)l?.removeTrack(u);a.src="",a.srcObject=null}},[e,t]);const i=M(()=>Zr(e())?s:mo());return M(i)},Zr=r=>!r||!r.active||r.getTracks().length===0?!1:r.getTracks()[0].enabled,po=(r,e)=>r?.getTracks()[0]?.getSettings().deviceId==e?.getTracks()[0]?.getSettings().deviceId;var vo=k("<div class=camera-card><h2>"),wo=k('<div class="camera-request-card card no-controls"><div class=details><p></p><p> </p><p> '),yo=k('<div class="camera-request-card card no-controls"><div class=details><p></p><p></p><p> <!>.'),bo=k("<p class=error>"),So=k('<div class="camera-request-card card"><div class=details><p></p><p></p></div><div class=controls>'),Mo=k('<div class="camera-request-card card"><div class=video-overlay></div><div class=details><p></p><p><i></i></p></div><div class=controls>'),xo=k("<div class=stats><span>");const ko=()=>{const r=Ae(),{dictionary:e}=ee(),t=M(()=>r.hasMediaSupport()?r.canPrompt()||r.permission()==="pending"?b(Ao,{}):r.hasPermission()?b(Co,{}):b(Po,{}):b(_o,{}),[r.hasMediaSupport,r.canPrompt,r.hasPermission]);return(()=>{var n=vo(),s=n.firstChild;return w(s,()=>e().camera.title),w(n,t,null),n})()},_o=()=>{const{dictionary:r}=ee();return(()=>{var e=wo(),t=e.firstChild,n=t.firstChild,s=n.nextSibling,i=s.firstChild,a=s.nextSibling,o=a.firstChild;return w(n,()=>r().camera.explainer[0]),w(s,()=>r().camera.noSupport[0],i),w(a,()=>r().camera.noSupport[1],o),e})()},Po=()=>{const{dictionary:r}=ee();return(()=>{var e=yo(),t=e.firstChild,n=t.firstChild,s=n.nextSibling,i=s.nextSibling,a=i.firstChild,o=a.nextSibling;return o.nextSibling,w(n,()=>r().camera.explainer[0]),w(s,()=>r().camera.noPermission[0]),w(i,()=>r().camera.noPermission[1],a),w(i,b(Za,{}),o),e})()},Ao=()=>{const r=Ae(),{dictionary:e}=ee(),t=M(()=>r.permission()==="pending"?b(Fe,{disabled:!0,get text(){return e().camera.requestingPermission},imageUrl:Jt}):r.permission()==="error:inuse"?b(Fe,{get text(){return e().common.refresh},imageUrl:Jt,onClick:n=>{n.target.disabled=!0,window.location.reload()}}):b(Fe,{get disabled(){return!r.canPrompt()},get text(){return e().camera.requestPermission},imageUrl:Jt,onClick:()=>{r.requestPermission()}}),[r.canPrompt,r.permission]);return(()=>{var n=So(),s=n.firstChild,i=s.firstChild,a=i.nextSibling,o=s.nextSibling;return w(i,()=>e().camera.explainer[0]),w(a,()=>e().camera.explainer[1]),w(s,b(Be,{get when(){return r.permission()==="error:inuse"},get children(){var l=bo();return w(l,()=>e().camera.inUse),l}}),null),w(o,t),n})()},Co=()=>{const{camera:r}=Ae(),{dictionary:e,template:t}=ee(),n=io(r);return(()=>{var s=Mo(),i=s.firstChild,a=i.nextSibling,o=a.firstChild,l=o.nextSibling,c=l.firstChild,u=a.nextSibling;return w(s,b(Qn,{}),i),w(i,(()=>{var d=M(()=>!!r());return()=>d()&&(()=>{var f=xo(),g=f.firstChild;return w(f,n,g),w(g,()=>e().camera.type[r()?.facing??"unknown"]),f})()})()),w(o,()=>t(e().camera.selectedCamera,{label:r()?.label??"..."})),w(c,()=>e().camera.switchBanner),w(u,b(Kn,{})),s})()},ut="/guessify/assets/guessify-logo-DT33HoF3.svg",[$t,en]=q(window.navigator.onLine?"online":"offline"),Eo=()=>$t()!=="offline",cr=Xe({status:$t,online:Eo}),$o=()=>Ke(cr),Fo=r=>{const e=()=>en("online"),t=()=>en("offline");return Pe(()=>{window.addEventListener("online",e),window.addEventListener("offline",t)}),ye(()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}),b(cr.Provider,{get value(){return{...cr.defaultValue,online:M(()=>$t()!=="offline",$t)}},get children(){return pe(()=>r.children)()}})};var Ro=k("<div class=dependency-gate><h1 class=logo><img> Guessify</h1><p>"),Oo=k("<div class=dependency-gate><h1 class=logo><img> Guessify");const To=r=>{const e=He(),t=Ae(),{online:n}=$o(),{dictionary:s}=ee(),i=pe(()=>r.children);if(!n())return(()=>{var l=Ro(),c=l.firstChild,u=c.firstChild,d=c.nextSibling;return J(u,"src",ut),w(d,()=>s().common.offline),l})();const a=M(()=>e.isValid()&&t.hasPermission(),[e.isValid,t.hasPermission,t.permission]),o=(()=>{var l=Oo(),c=l.firstChild,u=c.firstChild;return J(u,"src",ut),w(l,b(za,{}),null),w(l,b(ko,{}),null),l})();return b(Be,{get when(){return a()},get children(){return i()},fallback:o})},Q={canvasContextOptions:{willReadFrequently:!0,desynchronized:!0},clearBeforeDraw:!0,showScaleCanvas:!1,showGrayscaleImage:!1,showOrientationLines:!0,showEllipsoid:!0,sampleRate:200,blurAmount:1,debugEnabled(){return this.showScaleCanvas||this.showGrayscaleImage||this.showOrientationLines||this.showEllipsoid}},tn=Q.debugEnabled()?async(r,e)=>{const t=document.createElement("a");if(t.download=`camera-feed-${e}-${r.id}.png`,r instanceof HTMLCanvasElement)t.href=r.toDataURL();else{const s=await r.convertToBlob({type:"image/png"});var n=new FileReader;t.href=await new Promise(i=>{n.onload=a=>{i(a.target.result)},n.readAsDataURL(s)})}t.click()}:void 0,Qe=(r,e,t,n=!0)=>{const s=new OffscreenCanvas(e,t),i=()=>s.getContext("2d",{...Q.canvasContextOptions,alpha:n});return Object.assign(s,{id:r,writeOutput:tn&&(l=>tn(s,l)),getCanvasContext:i,getImageData:()=>i().getImageData(0,0,e,t),putImageData:l=>i().putImageData(l,0,0)})},Ar=r=>new Promise(e=>{requestAnimationFrame(()=>{e(r())})});function Bo(r,e){const t=r.getBoundingClientRect(),n=e.getSettings();let{width:s,height:i,aspectRatio:a}=n;s||(s=i*a),i||(i=s*a);const o=Math.min(i,s),l=Math.max(i,s),c=Math.max(t.width/o,t.height/l),u=o*c,d=l*c;var f=(t.width-o*c)/2,g=(t.height-l*c)/2;return{boxWidth:u,boxHeight:d,frameWidth:o,frameHeight:l,offsetX:f,offsetY:g}}function No(r,e){const t=Bo(r,e),{boxWidth:n,boxHeight:s,frameWidth:i,frameHeight:a,offsetX:o,offsetY:l}=t;if(!(n===0||Number.isNaN(n)))return Ar(()=>{const c=Qe("scale",n,s);return c.getCanvasContext().drawImage(r,0,0,i,a,o,l,n,s),c})}function rn(r,e,t){return Ar(()=>{const n=Qe(t?"grayscale-inverted":"grayscale",r.width*2,r.height*2);return n.getCanvasContext().filter=`grayscale() ${t?"invert(100%)":""} contrast(4.5)`,n.getCanvasContext().drawImage(e,r.x,r.y,r.width,r.height,0,0,n.width,n.height),n})}function nn(r){return Ar(()=>{const e=Qe(r.id.replace("grayscale","blur"),r.width,r.height);return e.getCanvasContext().filter=`blur(${Q.blurAmount}px)`,e.getCanvasContext().drawImage(r,0,0,r.width,r.height,0,0,e.width,e.height),e})}const V={notEdge:0,primaryEdge:1,secondaryEdge:2,compoundEdge:3};function Lo(r,e,t,n,s,i){const a=sn(r,e,t)?1:0,o=sn(n,s,i)?2:0;return a+o}function sn(r,e,t){return!(r>180||r<30||e>180||e<30||t>180||t<30)}function Zt(r,e,t,n){const i=r.width*4,a=t*4,o=n*i,l=a+o,[c,u,d,f]=r.data.slice(l,l+4),[g,m,h]=e.data.slice(l,l+4),p=Lo(c,u,d,g,m,h);return{r:c,g:u,b:d,a:f,x:t,y:n,abs:l,edgeScore:p,...{}}}function*qo(r){for(let e=0;e<r.width;e++){const t=r.column(e);for(let n=0;n<r.height;n++)yield t.pixel(n)}}function*Io(r){for(let e=0;e<r.height;e++)yield r.row(e)}function*Do(r,e){for(let t=0;t<e.width;t++)yield e.pixel(t,r)}function Uo(r,e){return zo(r.getImageData(),e.getImageData())}function zo(r,e){if(Number.isNaN(r.width)||r.width===0)return;const t={};return{width:r.width,height:r.height,size:r.data.length,pixel(n,s){return Zt(r,e,n,s)},row(n){const s=Math.min(n,r.height),i=Do(n,this);return{y:n,pixel:a=>Zt(r,e,a,s),[Symbol.iterator](){return i}}},rows(){return Io(this)},column(n){const s=Math.min(n,r.width);return{pixel:i=>Zt(r,e,s,i)}},[Symbol.iterator](){return qo(this)},toArray(){return Array.from(this)},...t}}const ue={NS:1,EW:2,NE:3,SE:4,NW:5,SW:6};function jo(r){const e=Q.blurAmount*4,t=Math.ceil(r.width/9),n=new Array;let s=0,i=0,a=0,o=0;for(let l=t+e;l<r.width/2;l++)for(let c=e;c<r.height-e;c++){if(r.pixel(l,c).edgeScore!==V.compoundEdge)continue;const d=y=>r.pixel(l-y,c),f=y=>r.pixel(l+y,c),g=y=>r.pixel(l-y,c-y),m=y=>r.pixel(l+y,c-y),h=y=>r.pixel(l-y,c+y),p=y=>r.pixel(l+y,c+y);if(p(3).edgeScore!==V.notEdge&&p(6).edgeScore!==V.notEdge&&h(3).edgeScore===V.notEdge&&h(3).r===255&&m(3).edgeScore===V.notEdge&&m(3).r===0&&f(6).edgeScore===V.notEdge&&f(6).r===0){a++,n.push({x:l,y:c,edgeDirection:ue.NE});continue}if(g(3).edgeScore!==V.notEdge&&g(6).edgeScore!==V.notEdge&&m(3).r===255&&m(3).edgeScore===V.notEdge&&h(3).edgeScore===V.notEdge&&h(3).r===0&&d(6).edgeScore===V.notEdge&&d(6).r===0){i++,n.push({x:l,y:c,edgeDirection:ue.SW});continue}if(h(3).edgeScore!==V.notEdge&&h(6).edgeScore!==V.notEdge&&g(3).r===255&&g(3).edgeScore===V.notEdge&&p(3).edgeScore===V.notEdge&&p(3).r===0&&f(6).edgeScore===V.notEdge&&f(6).r===0){o++,n.push({x:l,y:c,edgeDirection:ue.SE});continue}if(m(3).edgeScore!==V.notEdge&&m(6).edgeScore!==V.notEdge&&p(3).r===255&&p(3).edgeScore===V.notEdge&&g(3).edgeScore===V.notEdge&&g(3).r===0&&d(6).edgeScore===V.notEdge&&d(6).r===0){s++,n.push({x:l,y:c,edgeDirection:ue.NW});continue}}if(!(o<1)&&!(i<1)&&!(a<1)&&!(s<1)&&!(n.length>=r.width/2))return n}function Vo(r,e){if(!r)return;let t=0,n=0,s=0,i=0,a=0,o=0,l=0,c=0,u=0,d=0,f=0,g=0,m=0,h=0,p=0,y=1/0,S=1/0,$=0,x=0,B=1/0,E=1/0,N=0,C=1/0,P=0,I=1/0,j=0,D=1/0,ae=0,_=1/0,A=0,O=0,F=0;for(let Se=0;Se<r.length;Se++){const R=r[Se];R&&(R.edgeDirection===ue.SE&&(p=Math.max(p,R.x),y=Math.min(y,R.x),S=Math.min(S,R.y),$=Math.max($,R.y),u+=R.x,d+=R.y,f++),R.edgeDirection===ue.SW&&(C=Math.max(C,R.x),P=Math.min(P,R.x),I=Math.min(I,R.y),j=Math.max(j,R.y),s+=R.x,i+=R.y,a++),R.edgeDirection===ue.NW&&(D=Math.min(D,R.x),ae=Math.max(ae,R.x),_=Math.min(_,R.y),A=Math.max(A,R.y),o+=R.x,l+=R.y,c++),R.edgeDirection===ue.NE&&(x=Math.min(x,R.x),B=Math.max(B,R.x),E=Math.min(E,R.y),N=Math.max(N,R.y),g+=R.x,m+=R.y,h++),t+=R.x,n+=R.y)}const G=1/r.length*t,W=1/r.length*n,ve=1/f*u,X=1/a*s,oe=1/c*o,fe=1/h*g,ce=1/f*d,K=1/a*i,be=1/c*l,Ne=1/h*m,Le=(ve+X+fe+oe)/4,ht=(ce+K+Ne+be)/4;if(!(Number.isNaN(G)||Number.isNaN(W))&&!(G===1/0||W===1/0)&&!(G===0||W===0)){for(let Se=0;Se<r.length;Se++){const R=r[Se];R&&(O=Math.max(O,Math.abs(R.x-Le)),F=Math.max(F,Math.abs(R.y-ht)))}if(F=Math.max(fe-oe,ve-X)/Math.SQRT2,O=Math.max(ce-Ne,K-be)/Math.SQRT2,!(Number.isNaN(O)||Number.isNaN(F))&&!(O===1/0||F===1/0)&&!(O===0||F===0)&&!(F>e/4)&&!(W+F>e-3)&&!(W-F<3)&&!(G-O<3))return{ellipsoidX:G,ellipsoidY:W,radiusA:O,radiusB:F,averageX:Le,averageY:ht,xSouthEast:ve,xSouthWest:X,xNorthWest:oe,xNorthEast:fe,ySouthEast:ce,ySouthWest:K,yNorthWest:be,yNorthEast:Ne}}}function Jn(r){return r.getContext("2d",Q.canvasContextOptions)}function Wo(r,e){const t=Jn(r);if(t.clearRect(0,0,r.width,r.height),!e)return r;for(const n of e)if(n){if(t.strokeStyle="rgb(30, 0, 255)",t.lineWidth=3,n.edgeDirection===ue.NS){t.strokeStyle="red",t.beginPath(),t.moveTo(n.x-2,n.y),t.lineTo(n.x+2,n.y),t.stroke();continue}if(n.edgeDirection===ue.EW){t.strokeStyle="purple",t.beginPath(),t.moveTo(n.x,n.y-2),t.lineTo(n.x,n.y+2),t.stroke();continue}if(n.edgeDirection===ue.NE){t.lineWidth=1,t.beginPath(),t.moveTo(n.x-2,n.y+2),t.lineTo(n.x+2,n.y-2),t.stroke(),t.lineWidth=2,t.beginPath(),t.moveTo(n.x-1,n.y-3),t.lineTo(n.x+3,n.y+1),t.stroke();continue}if(n.edgeDirection===ue.SW){t.lineWidth=1,t.beginPath(),t.moveTo(n.x-2,n.y+2),t.lineTo(n.x+2,n.y-2),t.stroke(),t.lineWidth=2,t.beginPath(),t.moveTo(n.x+1,n.y+3),t.lineTo(n.x-3,n.y-1),t.stroke();continue}if(n.edgeDirection===ue.SE){t.lineWidth=1,t.beginPath(),t.moveTo(n.x+2,n.y+2),t.lineTo(n.x-2,n.y-2),t.stroke(),t.lineWidth=2,t.beginPath(),t.moveTo(n.x-1,n.y+3),t.lineTo(n.x+3,n.y-1),t.stroke();continue}if(n.edgeDirection===ue.NW){t.lineWidth=1,t.beginPath(),t.moveTo(n.x+2,n.y+2),t.lineTo(n.x-2,n.y-2),t.stroke(),t.lineWidth=2,t.beginPath(),t.moveTo(n.x+1,n.y-3),t.lineTo(n.x-3,n.y+1),t.stroke();continue}}return r}function Go(r){const e=new Uint8ClampedArray(r.size);for(let t of r)t={...t,...Ho(t)},e[t.abs+0]=t.r,e[t.abs+1]=t.g,e[t.abs+2]=t.b,e[t.abs+3]=t.a;return e}const Ho=({edgeScore:r})=>r===V.primaryEdge?{r:0,g:128,b:100,a:50}:r===V.secondaryEdge?{r:128,g:255,b:0,a:50}:r===V.compoundEdge?{r:0,g:255,b:0,a:255}:{r:0,g:0,b:0,a:0};function Yo(r,e){const t=Jn(r);if(t.clearRect(0,0,r.width,r.height),!e)return r;t.fillStyle="rgb(255, 149, 0)",t.lineWidth=1,t.strokeStyle="rgba(255, 149, 0, 0.8)",t.fillRect(e.xNorthEast,e.yNorthEast,2,2),t.fillRect(e.xSouthWest-2,e.ySouthWest-2,2,2),t.beginPath(),t.moveTo(e.xNorthEast,e.yNorthEast),t.lineTo(e.xSouthWest,e.ySouthWest),t.stroke(),t.fillRect(e.xNorthWest,e.yNorthWest,2,2),t.fillRect(e.xSouthEast-2,e.ySouthEast-2,2,2),t.beginPath(),t.moveTo(e.xNorthWest,e.yNorthWest),t.lineTo(e.xSouthEast,e.ySouthEast),t.stroke(),t.fillStyle="yellow",t.fillRect(e.averageX-2,e.averageY-2,4,4),t.lineWidth=3,t.strokeStyle="yellow",t.beginPath(),t.ellipse(e.averageX,e.averageY,e.radiusA-1,e.radiusB-1,-45,0,180),t.stroke(),t.lineWidth=1,t.strokeStyle="rgba(255, 0, 242, .3)";const s=Math.floor((e.radiusA+e.radiusB)/2)/8,i=s*14;return t.beginPath(),t.ellipse(e.averageX,e.averageY,i,i,5.2,0,2),t.stroke(),t.beginPath(),t.ellipse(e.averageX,e.averageY,i+s*2,i+s*2,5.2,0,2),t.stroke(),t.beginPath(),t.ellipse(e.averageX,e.averageY,i+s*4,i+s*4,5.2,0,2),t.stroke(),t.beginPath(),t.ellipse(e.averageX,e.averageY,i+s*6,i+s*6,5.2,0,2),t.stroke(),t.beginPath(),t.ellipse(e.averageX,e.averageY,i+s*8,i+s*8,5.2,0,2),t.stroke(),t.beginPath(),t.ellipse(e.averageX,e.averageY,i+s*10,i+s*10,5.2,0,2),t.stroke(),t.beginPath(),t.ellipse(e.averageX,e.averageY,i+s*12,i+s*12,5.2,0,2),t.stroke(),t.strokeStyle="rgba(255, 0, 242, .5)",t.beginPath(),t.ellipse(e.averageX,e.averageY,i+s*38,i+s*38,5.2,0,2),t.stroke(),t.beginPath(),t.ellipse(e.averageX,e.averageY,i+s*40,i+s*40,5.2,0,2),t.stroke(),t.beginPath(),t.ellipse(e.averageX,e.averageY,i+s*76,i+s*76,5.2,0,2),t.stroke(),t.beginPath(),t.ellipse(e.averageX,e.averageY,i+s*78,i+s*78,5.2,0,2),t.stroke(),t.beginPath(),t.lineWidth=1,t.setLineDash([10]),t.strokeStyle="rgba(255, 0, 242, .7)",t.moveTo(e.averageX,e.averageY-e.radiusA),t.lineTo(e.radiusB*18,e.averageY-e.radiusA),t.stroke(),t.moveTo(e.averageX,e.averageY+e.radiusA),t.lineTo(e.radiusB*18,e.averageY+e.radiusA),t.stroke(),r}var an={},Xo=function(r,e,t,n,s){var i=new Worker(an[e]||(an[e]=URL.createObjectURL(new Blob([r+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return i.onmessage=function(a){var o=a.data,l=o.$e$;if(l){var c=new Error(l[0]);c.code=l[1],c.stack=l[2],s(c,null)}else s(null,o)},i.postMessage(t,n),i},re=Uint8Array,de=Uint16Array,Ut=Int32Array,zt=new re([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),jt=new re([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ur=new re([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Zn=function(r,e){for(var t=new de(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var s=new Ut(t[30]),n=1;n<30;++n)for(var i=t[n];i<t[n+1];++i)s[i]=i-t[n]<<5|n;return{b:t,r:s}},es=Zn(zt,2),Ko=es.b,Ft=es.r;Ko[28]=258,Ft[258]=28;var Qo=Zn(jt,0),lr=Qo.r,Rt=new de(32768);for(var z=0;z<32768;++z){var Ce=(z&43690)>>1|(z&21845)<<1;Ce=(Ce&52428)>>2|(Ce&13107)<<2,Ce=(Ce&61680)>>4|(Ce&3855)<<4,Rt[z]=((Ce&65280)>>8|(Ce&255)<<8)>>1}var Ge=function(r,e,t){for(var n=r.length,s=0,i=new de(e);s<n;++s)r[s]&&++i[r[s]-1];var a=new de(e);for(s=1;s<e;++s)a[s]=a[s-1]+i[s-1]<<1;var o;if(t){o=new de(1<<e);var l=15-e;for(s=0;s<n;++s)if(r[s])for(var c=s<<4|r[s],u=e-r[s],d=a[r[s]-1]++<<u,f=d|(1<<u)-1;d<=f;++d)o[Rt[d]>>l]=c}else for(o=new de(n),s=0;s<n;++s)r[s]&&(o[s]=Rt[a[r[s]-1]++]>>15-r[s]);return o},Re=new re(288);for(var z=0;z<144;++z)Re[z]=8;for(var z=144;z<256;++z)Re[z]=9;for(var z=256;z<280;++z)Re[z]=7;for(var z=280;z<288;++z)Re[z]=8;var lt=new re(32);for(var z=0;z<32;++z)lt[z]=5;var ts=Ge(Re,9,0),rs=Ge(lt,5,0),Cr=function(r){return(r+7)/8|0},Er=function(r,e,t){return(e==null||e<0)&&(e=0),(t==null||t>r.length)&&(t=r.length),new re(r.subarray(e,t))},Jo=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ye=function(r,e,t){var n=new Error(e||Jo[r]);if(n.code=r,Error.captureStackTrace&&Error.captureStackTrace(n,Ye),!t)throw n;return n},Me=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8},Ie=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8,r[n+2]|=t>>16},xt=function(r,e){for(var t=[],n=0;n<r.length;++n)r[n]&&t.push({s:n,f:r[n]});var s=t.length,i=t.slice();if(!s)return{t:Fr,l:0};if(s==1){var a=new re(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(B,E){return B.f-E.f}),t.push({s:-1,f:25001});var o=t[0],l=t[1],c=0,u=1,d=2;for(t[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=s-1;)o=t[t[c].f<t[d].f?c++:d++],l=t[c!=u&&t[c].f<t[d].f?c++:d++],t[u++]={s:-1,f:o.f+l.f,l:o,r:l};for(var f=i[0].s,n=1;n<s;++n)i[n].s>f&&(f=i[n].s);var g=new de(f+1),m=Ot(t[u-1],g,0);if(m>e){var n=0,h=0,p=m-e,y=1<<p;for(i.sort(function(E,N){return g[N.s]-g[E.s]||E.f-N.f});n<s;++n){var S=i[n].s;if(g[S]>e)h+=y-(1<<m-g[S]),g[S]=e;else break}for(h>>=p;h>0;){var $=i[n].s;g[$]<e?h-=1<<e-g[$]++-1:++n}for(;n>=0&&h;--n){var x=i[n].s;g[x]==e&&(--g[x],++h)}m=e}return{t:new re(g),l:m}},Ot=function(r,e,t){return r.s==-1?Math.max(Ot(r.l,e,t+1),Ot(r.r,e,t+1)):e[r.s]=t},dr=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new de(++e),n=0,s=r[0],i=1,a=function(l){t[n++]=l},o=1;o<=e;++o)if(r[o]==s&&o!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(s),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(s);i=1,s=r[o]}return{c:t.subarray(0,n),n:e}},De=function(r,e){for(var t=0,n=0;n<e.length;++n)t+=r[n]*e[n];return t},$r=function(r,e,t){var n=t.length,s=Cr(e+2);r[s]=n&255,r[s+1]=n>>8,r[s+2]=r[s]^255,r[s+3]=r[s+1]^255;for(var i=0;i<n;++i)r[s+i+4]=t[i];return(s+4+n)*8},fr=function(r,e,t,n,s,i,a,o,l,c,u){Me(e,u++,t),++s[256];for(var d=xt(s,15),f=d.t,g=d.l,m=xt(i,15),h=m.t,p=m.l,y=dr(f),S=y.c,$=y.n,x=dr(h),B=x.c,E=x.n,N=new de(19),C=0;C<S.length;++C)++N[S[C]&31];for(var C=0;C<B.length;++C)++N[B[C]&31];for(var P=xt(N,7),I=P.t,j=P.l,D=19;D>4&&!I[ur[D-1]];--D);var ae=c+5<<3,_=De(s,Re)+De(i,lt)+a,A=De(s,f)+De(i,h)+a+14+3*D+De(N,I)+2*N[16]+3*N[17]+7*N[18];if(l>=0&&ae<=_&&ae<=A)return $r(e,u,r.subarray(l,l+c));var O,F,G,W;if(Me(e,u,1+(A<_)),u+=2,A<_){O=Ge(f,g,0),F=f,G=Ge(h,p,0),W=h;var ve=Ge(I,j,0);Me(e,u,$-257),Me(e,u+5,E-1),Me(e,u+10,D-4),u+=14;for(var C=0;C<D;++C)Me(e,u+3*C,I[ur[C]]);u+=3*D;for(var X=[S,B],oe=0;oe<2;++oe)for(var fe=X[oe],C=0;C<fe.length;++C){var ce=fe[C]&31;Me(e,u,ve[ce]),u+=I[ce],ce>15&&(Me(e,u,fe[C]>>5&127),u+=fe[C]>>12)}}else O=ts,F=Re,G=rs,W=lt;for(var C=0;C<o;++C){var K=n[C];if(K>255){var ce=K>>18&31;Ie(e,u,O[ce+257]),u+=F[ce+257],ce>7&&(Me(e,u,K>>23&31),u+=zt[ce]);var be=K&31;Ie(e,u,G[be]),u+=W[be],be>3&&(Ie(e,u,K>>5&8191),u+=jt[be])}else Ie(e,u,O[K]),u+=F[K]}return Ie(e,u,O[256]),u+F[256]},ns=new Ut([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Fr=new re(0),ss=function(r,e,t,n,s,i){var a=i.z||r.length,o=new re(n+a+5*(1+Math.ceil(a/7e3))+s),l=o.subarray(n,o.length-s),c=i.l,u=(i.r||0)&7;if(e){u&&(l[0]=i.r>>3);for(var d=ns[e-1],f=d>>13,g=d&8191,m=(1<<t)-1,h=i.p||new de(32768),p=i.h||new de(m+1),y=Math.ceil(t/3),S=2*y,$=function(Wt){return(r[Wt]^r[Wt+1]<<y^r[Wt+2]<<S)&m},x=new Ut(25e3),B=new de(288),E=new de(32),N=0,C=0,P=i.i||0,I=0,j=i.w||0,D=0;P+2<a;++P){var ae=$(P),_=P&32767,A=p[ae];if(h[_]=A,p[ae]=_,j<=P){var O=a-P;if((N>7e3||I>24576)&&(O>423||!c)){u=fr(r,l,0,x,B,E,C,I,D,P-D,u),I=N=C=0,D=P;for(var F=0;F<286;++F)B[F]=0;for(var F=0;F<30;++F)E[F]=0}var G=2,W=0,ve=g,X=_-A&32767;if(O>2&&ae==$(P-X))for(var oe=Math.min(f,O)-1,fe=Math.min(32767,P),ce=Math.min(258,O);X<=fe&&--ve&&_!=A;){if(r[P+G]==r[P+G-X]){for(var K=0;K<ce&&r[P+K]==r[P+K-X];++K);if(K>G){if(G=K,W=X,K>oe)break;for(var be=Math.min(X,K-2),Ne=0,F=0;F<be;++F){var Le=P-X+F&32767,ht=h[Le],Se=Le-ht&32767;Se>Ne&&(Ne=Se,A=Le)}}}_=A,A=h[_],X+=_-A&32767}if(W){x[I++]=268435456|Ft[G]<<18|lr[W];var R=Ft[G]&31,Br=lr[W]&31;C+=zt[R]+jt[Br],++B[257+R],++E[Br],j=P+G,++N}else x[I++]=r[P],++B[r[P]]}}for(P=Math.max(P,j);P<a;++P)x[I++]=r[P],++B[r[P]];u=fr(r,l,c,x,B,E,C,I,D,P-D,u),c||(i.r=u&7|l[u/8|0]<<3,u-=7,i.h=p,i.p=h,i.i=P,i.w=j)}else{for(var P=i.w||0;P<a+c;P+=65535){var Vt=P+65535;Vt>=a&&(l[u/8|0]=c,Vt=a),u=$r(l,u+1,r.subarray(P,Vt))}i.i=a}return Er(o,0,n+Cr(u)+s)},Zo=function(){for(var r=new Int32Array(256),e=0;e<256;++e){for(var t=e,n=9;--n;)t=(t&1&&-306674912)^t>>>1;r[e]=t}return r}(),ec=function(){var r=-1;return{p:function(e){for(var t=r,n=0;n<e.length;++n)t=Zo[t&255^e[n]]^t>>>8;r=t},d:function(){return~r}}},is=function(r,e,t,n,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),a=new re(i.length+r.length);a.set(i),a.set(r,i.length),r=a,s.w=i.length}return ss(r,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,n,s)},Rr=function(r,e){var t={};for(var n in r)t[n]=r[n];for(var n in e)t[n]=e[n];return t},on=function(r,e,t){for(var n=r(),s=r.toString(),i=s.slice(s.indexOf("[")+1,s.lastIndexOf("]")).replace(/\s+/g,"").split(","),a=0;a<n.length;++a){var o=n[a],l=i[a];if(typeof o=="function"){e+=";"+l+"=";var c=o.toString();if(o.prototype)if(c.indexOf("[native code]")!=-1){var u=c.indexOf(" ",8)+1;e+=c.slice(u,c.indexOf("(",u))}else{e+=c;for(var d in o.prototype)e+=";"+l+".prototype."+d+"="+o.prototype[d].toString()}else e+=c}else t[l]=o}return e},yt=[],tc=function(r){var e=[];for(var t in r)r[t].buffer&&e.push((r[t]=new r[t].constructor(r[t])).buffer);return e},rc=function(r,e,t,n){if(!yt[t]){for(var s="",i={},a=r.length-1,o=0;o<a;++o)s=on(r[o],s,i);yt[t]={c:on(r[a],s,i),e:i}}var l=Rr({},yt[t].e);return Xo(yt[t].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",t,l,tc(l),n)},nc=function(){return[re,de,Ut,zt,jt,ur,Ft,lr,ts,Re,rs,lt,Rt,ns,Fr,Ge,Me,Ie,xt,Ot,dr,De,$r,fr,Cr,Er,ss,is,Or,as]},as=function(r){return postMessage(r,[r.buffer])},sc=function(r,e,t,n,s,i){var a=rc(t,n,s,function(o,l){a.terminate(),i(o,l)});return a.postMessage([r,e],e.consume?[r.buffer]:[]),function(){a.terminate()}},te=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8};function ic(r,e,t){return t||(t=e,e={}),typeof t!="function"&&Ye(7),sc(r,e,[nc],function(n){return as(Or(n.data[0],n.data[1]))},0,t)}function Or(r,e){return is(r,e||{},0,0)}var os=function(r,e,t,n){for(var s in r){var i=r[s],a=e+s,o=n;Array.isArray(i)&&(o=Rr(n,i[1]),i=i[0]),i instanceof re?t[a]=[i,o]:(t[a+="/"]=[new re(0),o],os(i,a,t,n))}},cn=typeof TextEncoder<"u"&&new TextEncoder,ac=typeof TextDecoder<"u"&&new TextDecoder,oc=0;try{ac.decode(Fr,{stream:!0}),oc=1}catch{}function un(r,e){var t;if(cn)return cn.encode(r);for(var n=r.length,s=new re(r.length+(r.length>>1)),i=0,a=function(c){s[i++]=c},t=0;t<n;++t){if(i+5>s.length){var o=new re(i+8+(n-t<<1));o.set(s),s=o}var l=r.charCodeAt(t);l<128||e?a(l):l<2048?(a(192|l>>6),a(128|l&63)):l>55295&&l<57344?(l=65536+(l&1047552)|r.charCodeAt(++t)&1023,a(240|l>>18),a(128|l>>12&63),a(128|l>>6&63),a(128|l&63)):(a(224|l>>12),a(128|l>>6&63),a(128|l&63))}return Er(s,0,i)}var hr=function(r){var e=0;if(r)for(var t in r){var n=r[t].length;n>65535&&Ye(9),e+=n+4}return e},ln=function(r,e,t,n,s,i,a,o){var l=n.length,c=t.extra,u=o&&o.length,d=hr(c);te(r,e,a!=null?33639248:67324752),e+=4,a!=null&&(r[e++]=20,r[e++]=t.os),r[e]=20,e+=2,r[e++]=t.flag<<1|(i<0&&8),r[e++]=s&&8,r[e++]=t.compression&255,r[e++]=t.compression>>8;var f=new Date(t.mtime==null?Date.now():t.mtime),g=f.getFullYear()-1980;if((g<0||g>119)&&Ye(10),te(r,e,g<<25|f.getMonth()+1<<21|f.getDate()<<16|f.getHours()<<11|f.getMinutes()<<5|f.getSeconds()>>1),e+=4,i!=-1&&(te(r,e,t.crc),te(r,e+4,i<0?-i-2:i),te(r,e+8,t.size)),te(r,e+12,l),te(r,e+14,d),e+=16,a!=null&&(te(r,e,u),te(r,e+6,t.attrs),te(r,e+10,a),e+=14),r.set(n,e),e+=l,d)for(var m in c){var h=c[m],p=h.length;te(r,e,+m),te(r,e+2,p),r.set(h,e+4),e+=4+p}return u&&(r.set(o,e),e+=u),e},cc=function(r,e,t,n,s){te(r,e,101010256),te(r,e+8,t),te(r,e+10,t),te(r,e+12,n),te(r,e+16,s)};function uc(r,e,t){t||(t=e,e={}),typeof t!="function"&&Ye(7);var n={};os(r,"",n,e);var s=Object.keys(n),i=s.length,a=0,o=0,l=i,c=new Array(i),u=[],d=function(){for(var p=0;p<u.length;++p)u[p]()},f=function(p,y){dn(function(){t(p,y)})};dn(function(){f=t});var g=function(){var p=new re(o+22),y=a,S=o-a;o=0;for(var $=0;$<l;++$){var x=c[$];try{var B=x.c.length;ln(p,o,x,x.f,x.u,B);var E=30+x.f.length+hr(x.extra),N=o+E;p.set(x.c,N),ln(p,a,x,x.f,x.u,B,o,x.m),a+=16+E+(x.m?x.m.length:0),o=N+B}catch(C){return f(C,null)}}cc(p,a,c.length,S,y),f(null,p)};i||g();for(var m=function(p){var y=s[p],S=n[y],$=S[0],x=S[1],B=ec(),E=$.length;B.p($);var N=un(y),C=N.length,P=x.comment,I=P&&un(P),j=I&&I.length,D=hr(x.extra),ae=x.level==0?0:8,_=function(A,O){if(A)d(),f(A,null);else{var F=O.length;c[p]=Rr(x,{size:E,crc:B.d(),c:O,f:N,m:I,u:C!=y.length||I&&P.length!=j,compression:ae}),a+=30+C+D+F,o+=76+2*(C+D)+(j||0)+F,--i||g()}};if(C>65535&&_(Ye(11,0,1),null),!ae)_(null,$);else if(E<16e4)try{_(null,Or($,x))}catch(A){_(A,null)}else u.push(ic($,x,_))},h=0;h<l;++h)m(h);return d}var dn=typeof queueMicrotask=="function"?queueMicrotask:typeof setTimeout=="function"?setTimeout:function(r){r()};const lc=({canvas:r,show:e})=>{if(!e)return;const t=Object.assign(document.createElement("canvas"),{id:r.id,width:r.width,height:r.height}),n=t.getContext("2d",{willReadFrequently:!0,alpha:!0});return _e(()=>{const s=r.getImageData();n.putImageData(s,0,0)}),t},dc=({id:r,image:e,show:t})=>{if(!t)return;const n=Object.assign(document.createElement("canvas"),{id:r,width:e.width,height:e.height}),s=n.getContext("2d",{willReadFrequently:!0,alpha:!0});return _e(()=>{s.putImageData(e,0,0)}),n},[gr,fc]=q({}),Tr=(r,e)=>fc?.(t=>({...t,[e.id]:{canvas:e,show:r}})),hc=()=>{const r=M(()=>Object.entries(gr()).map(([e,{canvas:t,show:n}])=>b(lc,{canvas:t,show:n})),()=>Object.keys(gr()));return M(r)},[mr,gc]=q({}),cs=(r,e,t)=>gc?.(n=>({...n,[e]:{image:t,show:r}})),mc=(r,e,t)=>cs(r,e,new ImageData(Go(t),t.width,t.height)),[pc,vc]=q(),wc=(r,e,t)=>Tr(r,Wo(Qe("edge",e.width,e.height),t)),yc=(r,e,t)=>Tr(r,Yo(Qe("ellipsoid",e.width,e.height),t)),bc=()=>{let r,e=!1;const t=Object.assign(document.createElement("div"),{id:"download-all",ondblclick:fn,ontouchend:()=>{e===!0&&fn(),clearTimeout(r),e=!0,r=setTimeout(()=>e=!1,500)}}),n=M(()=>Object.entries(mr()).map(([s,{image:i,show:a}])=>b(dc,{id:s,image:i,show:a})),()=>Object.keys(mr()));return[M(n),t]},fn=async()=>{const r=Date.now(),e={},t=pc(),n=new Blob([JSON.stringify(t??"")],{type:"application/json"}),s=new Uint8Array(await n.arrayBuffer());e[`camera-feed-${r}-viewfinder.json`]=[s,{level:9}];for(const{canvas:l}of Object.values(gr())){const c=await l.convertToBlob({type:"image/png"}),u=new Uint8Array(await c.arrayBuffer());e[`camera-feed-${r}-${l.id}.png`]=[u,{level:0}]}for(const[l,{image:c}]of Object.entries(mr())){const u=Qe(l,c.width,c.height);u.putImageData(c);const d=await u.convertToBlob({type:"image/png"}),f=new Uint8Array(await d.arrayBuffer());e[`camera-feed-${r}-${l}.png`]=[f,{level:0}]}const i=await new Promise((l,c)=>uc(e,(u,d)=>u?c(u):l(d))),a=document.createElement("a");a.download=`camera-feed-${r}.zip`;const o=new FileReader;a.href=await new Promise(l=>{o.onload=c=>{l(c.target.result)},o.readAsDataURL(new Blob([i],{type:"application/octet-stream"}))}),a.click()},he=Q.debugEnabled()?{DebugCanvasDisplay:hc,debugCanvas:Tr,DebugGridDisplay:bc,debugImageData:cs,debugGridPixels:mc,debugEdgeMap:wc,debugEllipsoid:yc,setViewfinderRectForDownload:vc}:void 0;var Sc=k("<div>"),Mc=k("<div class=feedback>");const[xc,Zc]=q(""),[kc,eu]=q(!1),[hn,_c]=q(),gn=({videoElement:r})=>{const e=Ae();let t;async function n(){if(e.hasErrored())return;if(!e.hasPermission())return requestAnimationFrame(n);const s=await e.cameraStream();if(!s||!hn())return requestAnimationFrame(n);const i=hn().getBoundingClientRect();if(i.width===0||!r||r.getBoundingClientRect().width===0)return requestAnimationFrame(n);const a=s.getVideoTracks()[0];if(!a)return requestAnimationFrame(n);const o=await No(r,a);if(!o)return requestAnimationFrame(n);he?.debugCanvas(Q.showScaleCanvas,o),Q.debugEnabled()&&he?.setViewfinderRectForDownload(i);const l=await Promise.all([rn(i,o,!1),rn(i,o,!0)]);he?.debugCanvas(Q.showGrayscaleImage,l[0]),he?.debugCanvas(Q.showGrayscaleImage,l[1]);const c=await Promise.all([nn(l[0]),nn(l[1])]);he?.debugCanvas(!1,c[0]),he?.debugCanvas(!1,c[1]);const u=Uo(c[0],c[1]);if(!u)return requestAnimationFrame(n);he?.debugGridPixels(Q.showOrientationLines,"lines",u);const d=jo(u);if(he?.debugEdgeMap(Q.showOrientationLines,u,d),!Q.debugEnabled()&&!d){t=setTimeout(()=>requestAnimationFrame(n),Q.sampleRate);return}const f=Vo(d,u.height);if(he?.debugEllipsoid(Q.showEllipsoid,u,f),!Q.debugEnabled()&&!f){t=setTimeout(()=>requestAnimationFrame(n),Q.sampleRate);return}t=setTimeout(()=>requestAnimationFrame(n),Q.sampleRate)}return Pe(async()=>{!e.hasPermission()||!e.camera()&&!await e.requestCamera()||(t=setTimeout(()=>requestAnimationFrame(n),Q.sampleRate))}),ye(()=>{clearTimeout(t)}),[(()=>{var s=Sc();return kn(_c,s),w(s,he&&b(he.DebugCanvasDisplay,{}),null),w(s,he&&b(he.DebugGridDisplay,{}),null),le(()=>Lt(s,kc()?"viewfinder scanning":"viewfinder")),s})(),(()=>{var s=Mc();return w(s,xc),s})()]};var Pc=k("<div class=camera-canvas>"),mn=k("<div class=video-overlay>"),Ac=k('<div class="video-overlay debug">');const Cc=()=>{const[r,e]=q();return(()=>{var t=Pc();return w(t,b(Qn,{ref:e}),null),w(t,(()=>{var n=M(()=>!!Q.debugEnabled());return()=>n()?[mn(),(()=>{var s=Ac();return w(s,b(gn,{get videoElement(){return r()}})),s})()]:(()=>{var s=mn();return w(s,b(gn,{get videoElement(){return r()}})),s})()})(),null),t})()};var Ec=k("<h1>"),er=k("<p>"),$c=k("<p><i>"),Fc=k(`<details><summary></summary><pre class=version> 
</pre><pre>`);const Rc=r=>{const{dictionary:e}=ee(),[t,n]=q(),s="Application Version: 1.0.0-alpha.49",i=Array.from(s).fill("-").join(""),{Modal:a,showModal:o}=Pr(),l=()=>(t()?.restore?.(),window.location.reload(),!1),c=f=>{n(f instanceof Error?f:new Error(f)),console.error("Uncaught application error",f);debugger;o()},u=f=>{const g=f.reason instanceof Error?f.reason:Object.assign(new Error(f.reason),{stack:f.promise.__creationPoint});c(g)},d=f=>c(f.error);return Pe(()=>{addEventListener("unhandledrejection",u),addEventListener("error",d)}),ye(()=>{removeEventListener("unhandledrejection",u),removeEventListener("error",d)}),[b(_s,{fallback:(f,g)=>[],get children(){return pe(()=>r.children)()}}),b(a,{class:"uncaught-error-modal",beforeClose:l,get children(){return[(()=>{var f=Ec();return w(f,()=>e().common.unhandledError.title),f})(),(()=>{var f=er();return w(f,()=>e().common.unhandledError.explainer[0]),f})(),(()=>{var f=er();return w(f,()=>e().common.unhandledError.explainer[1]),f})(),M(()=>M(()=>!!t())()&&[(()=>{var f=Fc(),g=f.firstChild,m=g.nextSibling,h=m.firstChild,p=m.nextSibling;return w(g,()=>e().common.unhandledError.details),w(m,s,h),w(m,i,null),w(p,()=>t().stack?.toString()??t().toString()),f})(),er()]),(()=>{var f=$c(),g=f.firstChild;return w(g,()=>e().common.unhandledError.explainer[2]),f})()]}})]},Oc="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M3%2018h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z'/%3e%3c/svg%3e",Tc={en:"English (en)",nl:"Nederlands (nl)"};var Bc=k("<header><h1 class=logo><img><span>Guessify</span></h1><nav><button><img><span>Menu"),Nc=k("<div class=menu><div class=details><h2 class=logo><img> <span>Guessify</span> <sub></sub></h2><hr>"),Lc=k("<div class=camera-settings><p>"),qc=k("<div class=account-settings><p>Account: ");const Ic=()=>{const{Modal:r,showModal:e,closeModal:t}=Pr();return Pe(async()=>{}),(()=>{var n=Bc(),s=n.firstChild,i=s.firstChild,a=s.nextSibling,o=a.firstChild,l=o.firstChild;return J(i,"src",ut),xn(o,"click",e,!0),J(l,"src",Oc),w(n,b(r,{get children(){return b(Dc,{closeModal:t})}}),null),n})()},Dc=({closeModal:r})=>(()=>{var e=Nc(),t=e.firstChild,n=t.firstChild,s=n.firstChild,i=s.nextSibling,a=i.nextSibling,o=a.nextSibling,l=o.nextSibling,c=n.nextSibling;return J(s,"src",ut),w(l,()=>"1.0.0-alpha.49"),w(t,b(Uc,{}),c),w(t,b(zc,{}),c),w(t,b(jc,{closeModal:r}),null),w(t,b(Vc,{closeModal:r}),null),e})(),Uc=()=>{const{locale:r,locales:e}=ee(),t=e.map(s=>({id:s,text:Tc[s]})),n=On();return b(Xn,{value:r,options:()=>t,onChange:(s,i)=>{n("/"+i+"/")}})},zc=()=>{const{dictionary:r}=ee();return b(Fe,{disabled:!0,get text(){return r().common.share}})},jc=({closeModal:r})=>{const{camera:e,hasPermission:t,hasErrored:n}=Ae(),{dictionary:s,template:i}=ee();return _e(()=>{(!t()||n())&&r()},[t,n]),(()=>{var a=Lc(),o=a.firstChild;return w(o,()=>i(s().camera.selectedCamera,{label:e()?.label??"?"})),w(a,b(Kn,{}),null),a})()},Vc=({closeModal:r})=>{const{logOut:e,profile:t}=He(),{dictionary:n}=ee();return(()=>{var s=qc(),i=s.firstChild;return i.firstChild,w(i,()=>t()?.display_name,null),w(s,b(Fe,{get text(){return n().spotify.signOut},imageUrl:Yn,onClick:a=>{a.currentTarget.disabled=!0,r(),e()}}),null),s})()};Nt(["click"]);var Wc=k("<p>TODO, language selector <a href=/guessify/en/>English</a> / <a href=/guessify/nl/>Nederlands");const Gc=r=>b(Rc,{get children(){return b(Fo,{get children(){return b(Pa,{get children(){return pe(()=>r.children)()}})}})}}),Hc=()=>b(Ea,{get children(){return b(Ti,{get children(){return b(To,{get children(){return[b(Ic,{}),b(Cc,{})]}})}})}}),pn=()=>Wc(),Yc="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M16.24%207.76C15.07%206.59%2013.54%206%2012%206v6l-4.24%204.24c2.34%202.34%206.14%202.34%208.49%200%202.34-2.34%202.34-6.14-.01-8.48zM12%202C6.48%202%202%206.48%202%2012s4.48%2010%2010%2010%2010-4.48%2010-10S17.52%202%2012%202zm0%2018c-4.42%200-8-3.58-8-8s3.58-8%208-8%208%203.58%208%208-3.58%208-8%208z'/%3e%3c/svg%3e";var Xc=k("<div class=auth><h1 class=logo><img> Guessify</h1><div class=details><p><img>");const Kc=()=>{const r=On(),{handleAuthReturn:e}=Dt(),t=It(),n=t?Ui(t).spotify.signingIn:"...";return _e(()=>{e().then(s=>{r(s,{replace:!0})})}),(()=>{var s=Xc(),i=s.firstChild,a=i.firstChild,o=i.nextSibling,l=o.firstChild,c=l.firstChild;return J(a,"src",ut),J(c,"src",Yc),w(l,n,null),s})()},Qc=document.getElementById("root"),Jc=r=>r.replace("/guessify/?","/guessify");globalThis.Promise=class extends Promise{constructor(){super(...arguments),this.__creationPoint=new Error().stack}};Ts(()=>b(yi,{get base(){return"/guessify"},explicitLinks:!0,transformUrl:Jc,root:Gc,get children(){return[b(mt,{path:"/spotify-auth",component:Kc}),b(mt,{path:"/:locale/",component:Hc}),b(mt,{path:"/",component:pn}),b(mt,{path:"*404",component:pn})]}}),Qc);
