(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();const gs=(r,e)=>r===e,or=Symbol("solid-proxy"),ms=typeof Proxy=="function",Rt={equals:gs};let tt=null,Sn=_n;const _e=1,Et=2,Mn={owned:null,cleanups:null,context:null,owner:null};var z=null;let Kt=null,ps=null,G=null,le=null,be=null,Dt=0;function Sr(r,e){const t=G,n=z,s=r.length===0,i=e===void 0?n:e,o=s?Mn:{owned:null,cleanups:null,context:i?i.context:null,owner:i},a=s?r:()=>r(()=>ve(()=>it(o)));z=o,G=null;try{return Be(a,!0)}finally{G=t,z=n}}function j(r,e){e=e?Object.assign({},Rt,e):Rt;const t={value:r,observers:null,observerSlots:null,comparator:e.equals||void 0},n=s=>(typeof s=="function"&&(s=s(t.value)),kn(t,s));return[xn.bind(t),n]}function ge(r,e,t){const n=zt(r,e,!1,_e);ht(n)}function Ae(r,e,t){Sn=Ms;const n=zt(r,e,!1,_e);(!t||!t.render)&&(n.user=!0),be?be.push(n):ht(n)}function $(r,e,t){t=t?Object.assign({},Rt,t):Rt;const n=zt(r,e,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=t.equals||void 0,ht(n),xn.bind(n)}function vs(r){return Be(r,!1)}function ve(r){if(G===null)return r();const e=G;G=null;try{return r()}finally{G=e}}function Mr(r,e,t){const n=Array.isArray(r);let s,i=t&&t.defer;return o=>{let a;if(n){a=Array(r.length);for(let c=0;c<r.length;c++)a[c]=r[c]()}else a=r();if(i)return i=!1,o;const u=ve(()=>e(a,s,o));return s=a,u}}function Ce(r){Ae(()=>ve(r))}function Se(r){return z===null||(z.cleanups===null?z.cleanups=[r]:z.cleanups.push(r)),r}function ws(r,e){tt||(tt=Symbol("error")),z=zt(void 0,void 0,!0),z.context={...z.context,[tt]:[e]};try{return r()}catch(t){gt(t)}finally{z=z.owner}}function xr(){return z}function kr(r,e){const t=z,n=G;z=r,G=null;try{return Be(e,!0)}catch(s){gt(s)}finally{z=t,G=n}}function ys(r){const e=G,t=z;return Promise.resolve().then(()=>{G=e,z=t;let n;return Be(r,!1),G=z=null,n?n.done:void 0})}function He(r,e){const t=Symbol("context");return{id:t,Provider:ks(t),defaultValue:r}}function Ke(r){let e;return z&&z.context&&(e=z.context[r.id])!==void 0?e:r.defaultValue}function we(r){const e=$(r),t=$(()=>ar(e()));return t.toArray=()=>{const n=t();return Array.isArray(n)?n:n!=null?[n]:[]},t}function xn(){if(this.sources&&this.state)if(this.state===_e)ht(this);else{const r=le;le=null,Be(()=>Ft(this),!1),le=r}if(G){const r=this.observers?this.observers.length:0;G.sources?(G.sources.push(this),G.sourceSlots.push(r)):(G.sources=[this],G.sourceSlots=[r]),this.observers?(this.observers.push(G),this.observerSlots.push(G.sources.length-1)):(this.observers=[G],this.observerSlots=[G.sources.length-1])}return this.value}function kn(r,e,t){let n=r.value;return(!r.comparator||!r.comparator(n,e))&&(r.value=e,r.observers&&r.observers.length&&Be(()=>{for(let s=0;s<r.observers.length;s+=1){const i=r.observers[s],o=Kt&&Kt.running;o&&Kt.disposed.has(i),(o?!i.tState:!i.state)&&(i.pure?le.push(i):be.push(i),i.observers&&An(i)),o||(i.state=_e)}if(le.length>1e6)throw le=[],new Error},!1)),e}function ht(r){if(!r.fn)return;it(r);const e=Dt;bs(r,r.value,e)}function bs(r,e,t){let n;const s=z,i=G;G=z=r;try{n=r.fn(e)}catch(o){return r.pure&&(r.state=_e,r.owned&&r.owned.forEach(it),r.owned=null),r.updatedAt=t+1,gt(o)}finally{G=i,z=s}(!r.updatedAt||r.updatedAt<=t)&&(r.updatedAt!=null&&"observers"in r?kn(r,n):r.value=n,r.updatedAt=t)}function zt(r,e,t,n=_e,s){const i={fn:r,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:z,context:z?z.context:null,pure:t};return z===null||z!==Mn&&(z.owned?z.owned.push(i):z.owned=[i]),i}function $t(r){if(r.state===0)return;if(r.state===Et)return Ft(r);if(r.suspense&&ve(r.suspense.inFallback))return r.suspense.effects.push(r);const e=[r];for(;(r=r.owner)&&(!r.updatedAt||r.updatedAt<Dt);)r.state&&e.push(r);for(let t=e.length-1;t>=0;t--)if(r=e[t],r.state===_e)ht(r);else if(r.state===Et){const n=le;le=null,Be(()=>Ft(r,e[0]),!1),le=n}}function Be(r,e){if(le)return r();let t=!1;e||(le=[]),be?t=!0:be=[],Dt++;try{const n=r();return Ss(t),n}catch(n){t||(be=null),le=null,gt(n)}}function Ss(r){if(le&&(_n(le),le=null),r)return;const e=be;be=null,e.length&&Be(()=>Sn(e),!1)}function _n(r){for(let e=0;e<r.length;e++)$t(r[e])}function Ms(r){let e,t=0;for(e=0;e<r.length;e++){const n=r[e];n.user?r[t++]=n:$t(n)}for(e=0;e<t;e++)$t(r[e])}function Ft(r,e){r.state=0;for(let t=0;t<r.sources.length;t+=1){const n=r.sources[t];if(n.sources){const s=n.state;s===_e?n!==e&&(!n.updatedAt||n.updatedAt<Dt)&&$t(n):s===Et&&Ft(n,e)}}}function An(r){for(let e=0;e<r.observers.length;e+=1){const t=r.observers[e];t.state||(t.state=Et,t.pure?le.push(t):be.push(t),t.observers&&An(t))}}function it(r){let e;if(r.sources)for(;r.sources.length;){const t=r.sources.pop(),n=r.sourceSlots.pop(),s=t.observers;if(s&&s.length){const i=s.pop(),o=t.observerSlots.pop();n<s.length&&(i.sourceSlots[o]=n,s[n]=i,t.observerSlots[n]=o)}}if(r.tOwned){for(e=r.tOwned.length-1;e>=0;e--)it(r.tOwned[e]);delete r.tOwned}if(r.owned){for(e=r.owned.length-1;e>=0;e--)it(r.owned[e]);r.owned=null}if(r.cleanups){for(e=r.cleanups.length-1;e>=0;e--)r.cleanups[e]();r.cleanups=null}r.state=0}function xs(r){return r instanceof Error?r:new Error(typeof r=="string"?r:"Unknown error",{cause:r})}function Nr(r,e,t){try{for(const n of e)n(r)}catch(n){gt(n,t&&t.owner||null)}}function gt(r,e=z){const t=tt&&e&&e.context&&e.context[tt],n=xs(r);if(!t)throw n;be?be.push({fn(){Nr(n,t,e)},state:_e}):Nr(n,t,e)}function ar(r){if(typeof r=="function"&&!r.length)return ar(r());if(Array.isArray(r)){const e=[];for(let t=0;t<r.length;t++){const n=ar(r[t]);Array.isArray(n)?e.push.apply(e,n):e.push(n)}return e}return r}function ks(r,e){return function(n){let s;return ge(()=>s=ve(()=>(z.context={...z.context,[r]:n.value},we(()=>n.children))),void 0),s}}function C(r,e){return ve(()=>r(e||{}))}function wt(){return!0}const _s={get(r,e,t){return e===or?t:r.get(e)},has(r,e){return e===or?!0:r.has(e)},set:wt,deleteProperty:wt,getOwnPropertyDescriptor(r,e){return{configurable:!0,enumerable:!0,get(){return r.get(e)},set:wt,deleteProperty:wt}},ownKeys(r){return r.keys()}};function Qt(r){return(r=typeof r=="function"?r():r)?r:{}}function As(){for(let r=0,e=this.length;r<e;++r){const t=this[r]();if(t!==void 0)return t}}function Cs(...r){let e=!1;for(let o=0;o<r.length;o++){const a=r[o];e=e||!!a&&or in a,r[o]=typeof a=="function"?(e=!0,$(a)):a}if(ms&&e)return new Proxy({get(o){for(let a=r.length-1;a>=0;a--){const u=Qt(r[a])[o];if(u!==void 0)return u}},has(o){for(let a=r.length-1;a>=0;a--)if(o in Qt(r[a]))return!0;return!1},keys(){const o=[];for(let a=0;a<r.length;a++)o.push(...Object.keys(Qt(r[a])));return[...new Set(o)]}},_s);const t={},n=Object.create(null);for(let o=r.length-1;o>=0;o--){const a=r[o];if(!a)continue;const u=Object.getOwnPropertyNames(a);for(let c=u.length-1;c>=0;c--){const l=u[c];if(l==="__proto__"||l==="constructor")continue;const d=Object.getOwnPropertyDescriptor(a,l);if(!n[l])n[l]=d.get?{enumerable:!0,configurable:!0,get:As.bind(t[l]=[d.get.bind(a)])}:d.value!==void 0?d:void 0;else{const f=t[l];f&&(d.get?f.push(d.get.bind(a)):d.value!==void 0&&f.push(()=>d.value))}}}const s={},i=Object.keys(n);for(let o=i.length-1;o>=0;o--){const a=i[o],u=n[a];u&&u.get?Object.defineProperty(s,a,u):s[a]=u?u.value:void 0}return s}const Ps=r=>`Stale read from <${r}>.`;function Ne(r){const e=r.keyed,t=$(()=>r.when,void 0,{equals:(n,s)=>e?n===s:!n==!s});return $(()=>{const n=t();if(n){const s=r.children;return typeof s=="function"&&s.length>0?ve(()=>s(e?n:()=>{if(!ve(t))throw Ps("Show");return r.when})):s}return r.fallback},void 0,void 0)}let ze;function Rs(){ze&&[...ze].forEach(r=>r())}function Es(r){let e;const[t,n]=j(e,void 0);return ze||(ze=new Set),ze.add(n),Se(()=>ze.delete(n)),$(()=>{let s;if(s=t()){const i=r.fallback;return typeof i=="function"&&i.length?ve(()=>i(s,()=>n())):i}return ws(()=>r.children,n)},void 0,void 0)}const $s=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Fs=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...$s]),Os=new Set(["innerHTML","textContent","innerText","children"]),Ts=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Bs=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function Ls(r,e){const t=Bs[r];return typeof t=="object"?t[e]?t.$:void 0:t}const Ns=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]);function qs(r,e,t){let n=t.length,s=e.length,i=n,o=0,a=0,u=e[s-1].nextSibling,c=null;for(;o<s||a<i;){if(e[o]===t[a]){o++,a++;continue}for(;e[s-1]===t[i-1];)s--,i--;if(s===o){const l=i<n?a?t[a-1].nextSibling:t[i-a]:u;for(;a<i;)r.insertBefore(t[a++],l)}else if(i===a)for(;o<s;)(!c||!c.has(e[o]))&&e[o].remove(),o++;else if(e[o]===t[i-1]&&t[a]===e[s-1]){const l=e[--s].nextSibling;r.insertBefore(t[a++],e[o++].nextSibling),r.insertBefore(t[--i],l),e[s]=t[i]}else{if(!c){c=new Map;let d=a;for(;d<i;)c.set(t[d],d++)}const l=c.get(e[o]);if(l!=null)if(a<l&&l<i){let d=o,f=1,h;for(;++d<s&&d<i&&!((h=c.get(e[d]))==null||h!==l+f);)f++;if(f>l-a){const m=e[o];for(;a<l;)r.insertBefore(t[a++],m)}else r.replaceChild(t[a++],e[o++])}else o++;else e[o++].remove()}}}const qr="_$DX_DELEGATE";function Is(r,e,t,n={}){let s;return Sr(i=>{s=i,e===document?r():S(e,r(),e.firstChild?null:void 0,t)},n.owner),()=>{s(),e.textContent=""}}function F(r,e,t){let n;const s=()=>{const o=document.createElement("template");return o.innerHTML=r,o.content.firstChild},i=()=>(n||(n=s())).cloneNode(!0);return i.cloneNode=i,i}function Wt(r,e=window.document){const t=e[qr]||(e[qr]=new Set);for(let n=0,s=r.length;n<s;n++){const i=r[n];t.has(i)||(t.add(i),e.addEventListener(i,Ys))}}function ee(r,e,t){t==null?r.removeAttribute(e):r.setAttribute(e,t)}function Ds(r,e,t){t?r.setAttribute(e,""):r.removeAttribute(e)}function Ut(r,e){e==null?r.removeAttribute("class"):r.className=e}function Cn(r,e,t,n){if(n)Array.isArray(t)?(r[`$$${e}`]=t[0],r[`$$${e}Data`]=t[1]):r[`$$${e}`]=t;else if(Array.isArray(t)){const s=t[0];r.addEventListener(e,t[0]=i=>s.call(r,t[1],i))}else r.addEventListener(e,t,typeof t!="function"&&t)}function zs(r,e,t={}){const n=Object.keys(e||{}),s=Object.keys(t);let i,o;for(i=0,o=s.length;i<o;i++){const a=s[i];!a||a==="undefined"||e[a]||(Ir(r,a,!1),delete t[a])}for(i=0,o=n.length;i<o;i++){const a=n[i],u=!!e[a];!a||a==="undefined"||t[a]===u||!u||(Ir(r,a,!0),t[a]=u)}return t}function Ws(r,e,t){if(!e)return t?ee(r,"style"):e;const n=r.style;if(typeof e=="string")return n.cssText=e;typeof t=="string"&&(n.cssText=t=void 0),t||(t={}),e||(e={});let s,i;for(i in t)e[i]==null&&n.removeProperty(i),delete t[i];for(i in e)s=e[i],s!==t[i]&&(n.setProperty(i,s),t[i]=s);return t}function Us(r,e={},t,n){const s={};return ge(()=>typeof e.ref=="function"&&Pn(e.ref,r)),ge(()=>js(r,e,t,!0,s,!0)),s}function Pn(r,e,t){return ve(()=>r(e,t))}function S(r,e,t,n){if(t!==void 0&&!n&&(n=[]),typeof e!="function")return Ot(r,e,n,t);ge(s=>Ot(r,e(),s,t),n)}function js(r,e,t,n,s={},i=!1){e||(e={});for(const o in s)if(!(o in e)){if(o==="children")continue;s[o]=Dr(r,o,null,s[o],t,i,e)}for(const o in e){if(o==="children")continue;const a=e[o];s[o]=Dr(r,o,a,s[o],t,i,e)}}function Vs(r){return r.toLowerCase().replace(/-([a-z])/g,(e,t)=>t.toUpperCase())}function Ir(r,e,t){const n=e.trim().split(/\s+/);for(let s=0,i=n.length;s<i;s++)r.classList.toggle(n[s],t)}function Dr(r,e,t,n,s,i,o){let a,u,c,l,d;if(e==="style")return Ws(r,t,n);if(e==="classList")return zs(r,t,n);if(t===n)return n;if(e==="ref")i||t(r);else if(e.slice(0,3)==="on:"){const f=e.slice(3);n&&r.removeEventListener(f,n,typeof n!="function"&&n),t&&r.addEventListener(f,t,typeof t!="function"&&t)}else if(e.slice(0,10)==="oncapture:"){const f=e.slice(10);n&&r.removeEventListener(f,n,!0),t&&r.addEventListener(f,t,!0)}else if(e.slice(0,2)==="on"){const f=e.slice(2).toLowerCase(),h=Ns.has(f);if(!h&&n){const m=Array.isArray(n)?n[0]:n;r.removeEventListener(f,m)}(h||t)&&(Cn(r,f,t,h),h&&Wt([f]))}else e.slice(0,5)==="attr:"?ee(r,e.slice(5),t):e.slice(0,5)==="bool:"?Ds(r,e.slice(5),t):(d=e.slice(0,5)==="prop:")||(c=Os.has(e))||(l=Ls(e,r.tagName))||(u=Fs.has(e))||(a=r.nodeName.includes("-")||"is"in o)?(d&&(e=e.slice(5),u=!0),e==="class"||e==="className"?Ut(r,t):a&&!u&&!c?r[Vs(e)]=t:r[l||e]=t):ee(r,Ts[e]||e,t);return t}function Ys(r){let e=r.target;const t=`$$${r.type}`,n=r.target,s=r.currentTarget,i=u=>Object.defineProperty(r,"target",{configurable:!0,value:u}),o=()=>{const u=e[t];if(u&&!e.disabled){const c=e[`${t}Data`];if(c!==void 0?u.call(e,c,r):u.call(e,r),r.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(r.target)&&i(e.host),!0},a=()=>{for(;o()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(r,"currentTarget",{configurable:!0,get(){return e||document}}),r.composedPath){const u=r.composedPath();i(u[0]);for(let c=0;c<u.length-2&&(e=u[c],!!o());c++){if(e._$host){e=e._$host,a();break}if(e.parentNode===s)break}}else a();i(n)}function Ot(r,e,t,n,s){for(;typeof t=="function";)t=t();if(e===t)return t;const i=typeof e,o=n!==void 0;if(r=o&&t[0]&&t[0].parentNode||r,i==="string"||i==="number"){if(i==="number"&&(e=e.toString(),e===t))return t;if(o){let a=t[0];a&&a.nodeType===3?a.data!==e&&(a.data=e):a=document.createTextNode(e),t=qe(r,t,n,a)}else t!==""&&typeof t=="string"?t=r.firstChild.data=e:t=r.textContent=e}else if(e==null||i==="boolean")t=qe(r,t,n);else{if(i==="function")return ge(()=>{let a=e();for(;typeof a=="function";)a=a();t=Ot(r,a,t,n)}),()=>t;if(Array.isArray(e)){const a=[],u=t&&Array.isArray(t);if(cr(a,e,t,s))return ge(()=>t=Ot(r,a,t,n,!0)),()=>t;if(a.length===0){if(t=qe(r,t,n),o)return t}else u?t.length===0?zr(r,a,n):qs(r,t,a):(t&&qe(r),zr(r,a));t=a}else if(e.nodeType){if(Array.isArray(t)){if(o)return t=qe(r,t,n,e);qe(r,t,null,e)}else t==null||t===""||!r.firstChild?r.appendChild(e):r.replaceChild(e,r.firstChild);t=e}}return t}function cr(r,e,t,n){let s=!1;for(let i=0,o=e.length;i<o;i++){let a=e[i],u=t&&t[r.length],c;if(!(a==null||a===!0||a===!1))if((c=typeof a)=="object"&&a.nodeType)r.push(a);else if(Array.isArray(a))s=cr(r,a,u)||s;else if(c==="function")if(n){for(;typeof a=="function";)a=a();s=cr(r,Array.isArray(a)?a:[a],Array.isArray(u)?u:[u])||s}else r.push(a),s=!0;else{const l=String(a);u&&u.nodeType===3&&u.data===l?r.push(u):r.push(document.createTextNode(l))}}return s}function zr(r,e,t=null){for(let n=0,s=e.length;n<s;n++)r.insertBefore(e[n],t)}function qe(r,e,t,n){if(t===void 0)return r.textContent="";const s=n||document.createTextNode("");if(e.length){let i=!1;for(let o=e.length-1;o>=0;o--){const a=e[o];if(s!==a){const u=a.parentNode===r;!i&&!o?u?r.replaceChild(s,a):r.insertBefore(s,t):u&&a.remove()}else i=!0}}else r.insertBefore(s,t);return[s]}const Xs=()=>{},Rn=!1,Gs="http://www.w3.org/2000/svg";function Hs(r,e=!1){return e?document.createElementNS(Gs,r):document.createElement(r)}function Ks(r){const{useShadow:e}=r,t=document.createTextNode(""),n=()=>r.mount||document.body,s=xr();let i;return Ae(()=>{i||(i=kr(s,()=>$(()=>r.children)));const o=n();if(o instanceof HTMLHeadElement){const[a,u]=j(!1),c=()=>u(!0);Sr(l=>S(o,()=>a()?l():i(),null)),Se(c)}else{const a=Hs(r.isSVG?"g":"div",r.isSVG),u=e&&a.attachShadow?a.attachShadow({mode:"open"}):a;Object.defineProperty(a,"_$host",{get(){return t.parentNode},configurable:!0}),S(u,i),o.appendChild(a),r.ref&&r.ref(a),Se(()=>o.removeChild(a))}},void 0,{render:!0}),t}function En(){let r=new Set;function e(s){return r.add(s),()=>r.delete(s)}let t=!1;function n(s,i){if(t)return!(t=!1);const o={to:s,options:i,defaultPrevented:!1,preventDefault:()=>o.defaultPrevented=!0};for(const a of r)a.listener({...o,from:a.location,retry:u=>{u&&(t=!0),a.navigate(s,{...i,resolve:!1})}});return!o.defaultPrevented}return{subscribe:e,confirm:n}}let lr;function _r(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),lr=window.history.state._depth}_r();function Qs(r){return{...r,_depth:window.history.state&&window.history.state._depth}}function Js(r,e){let t=!1;return()=>{const n=lr;_r();const s=n==null?null:lr-n;if(t){t=!1;return}s&&e(s)?(t=!0,window.history.go(-s)):r()}}const Zs=/^(?:[a-z0-9]+:)?\/\//i,ei=/^\/+|(\/)\/+$/g,$n="http://sr";function rt(r,e=!1){const t=r.replace(ei,"$1");return t?e||/^[?#]/.test(t)?t:"/"+t:""}function _t(r,e,t){if(Zs.test(e))return;const n=rt(r),s=t&&rt(t);let i="";return!s||e.startsWith("/")?i=n:s.toLowerCase().indexOf(n.toLowerCase())!==0?i=n+s:i=s,(i||"/")+rt(e,!i)}function ti(r,e){if(r==null)throw new Error(e);return r}function ri(r,e){return rt(r).replace(/\/*(\*.*)?$/g,"")+rt(e)}function Fn(r){const e={};return r.searchParams.forEach((t,n)=>{n in e?Array.isArray(e[n])?e[n].push(t):e[n]=[e[n],t]:e[n]=t}),e}function ni(r,e,t){const[n,s]=r.split("/*",2),i=n.split("/").filter(Boolean),o=i.length;return a=>{const u=a.split("/").filter(Boolean),c=u.length-o;if(c<0||c>0&&s===void 0&&!e)return null;const l={path:o?"":"/",params:{}},d=f=>t===void 0?void 0:t[f];for(let f=0;f<o;f++){const h=i[f],m=h[0]===":",g=m?u[f]:u[f].toLowerCase(),p=m?h.slice(1):h.toLowerCase();if(m&&Jt(g,d(p)))l.params[p]=g;else if(m||!Jt(g,p))return null;l.path+=`/${g}`}if(s){const f=c?u.slice(-c).join("/"):"";if(Jt(f,d(s)))l.params[s]=f;else return null}return l}}function Jt(r,e){const t=n=>n===r;return e===void 0?!0:typeof e=="string"?t(e):typeof e=="function"?e(r):Array.isArray(e)?e.some(t):e instanceof RegExp?e.test(r):!1}function si(r){const[e,t]=r.pattern.split("/*",2),n=e.split("/").filter(Boolean);return n.reduce((s,i)=>s+(i.startsWith(":")?2:3),n.length-(t===void 0?0:1))}function On(r){const e=new Map,t=xr();return new Proxy({},{get(n,s){return e.has(s)||kr(t,()=>e.set(s,$(()=>r()[s]))),e.get(s)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(r())}})}function Tn(r){let e=/(\/?\:[^\/]+)\?/.exec(r);if(!e)return[r];let t=r.slice(0,e.index),n=r.slice(e.index+e[0].length);const s=[t,t+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(n);)s.push(t+=e[1]),n=n.slice(e[0].length);return Tn(n).reduce((i,o)=>[...i,...s.map(a=>a+o)],[])}const ii=100,Bn=He(),Ln=He(),Ar=()=>ti(Ke(Bn),"<A> and 'use' router primitives can be only used inside a Route."),oi=r=>{const e=Ar();return $(()=>{const t=r();return t!==void 0?e.renderPath(t):t})},Nn=()=>Ar().navigatorFactory(),ai=()=>Ar().params;function ci(r,e=""){const{component:t,preload:n,load:s,children:i,info:o}=r,a=!i||Array.isArray(i)&&!i.length,u={key:r,component:t,preload:n||s,info:o};return qn(r.path).reduce((c,l)=>{for(const d of Tn(l)){const f=ri(e,d);let h=a?f:f.split("/*",1)[0];h=h.split("/").map(m=>m.startsWith(":")||m.startsWith("*")?m:encodeURIComponent(m)).join("/"),c.push({...u,originalPath:l,pattern:h,matcher:ni(h,!a,r.matchFilters)})}return c},[])}function li(r,e=0){return{routes:r,score:si(r[r.length-1])*1e4-e,matcher(t){const n=[];for(let s=r.length-1;s>=0;s--){const i=r[s],o=i.matcher(t);if(!o)return null;n.unshift({...o,route:i})}return n}}}function qn(r){return Array.isArray(r)?r:[r]}function In(r,e="",t=[],n=[]){const s=qn(r);for(let i=0,o=s.length;i<o;i++){const a=s[i];if(a&&typeof a=="object"){a.hasOwnProperty("path")||(a.path="");const u=ci(a,e);for(const c of u){t.push(c);const l=Array.isArray(a.children)&&a.children.length===0;if(a.children&&!l)In(a.children,c.pattern,t,n);else{const d=li([...t],n.length);n.push(d)}t.pop()}}}return t.length?n:n.sort((i,o)=>o.score-i.score)}function Zt(r,e){for(let t=0,n=r.length;t<n;t++){const s=r[t].matcher(e);if(s)return s}return[]}function ui(r,e,t){const n=new URL($n),s=$(l=>{const d=r();try{return new URL(d,n)}catch{return console.error(`Invalid path ${d}`),l}},n,{equals:(l,d)=>l.href===d.href}),i=$(()=>s().pathname),o=$(()=>s().search,!0),a=$(()=>s().hash),u=()=>"",c=Mr(o,()=>Fn(s()));return{get pathname(){return i()},get search(){return o()},get hash(){return a()},get state(){return e()},get key(){return u()},query:t?t(c):On(c)}}let Le;function di(){return Le}function fi(r,e,t,n={}){const{signal:[s,i],utils:o={}}=r,a=o.parsePath||(w=>w),u=o.renderPath||(w=>w),c=o.beforeLeave||En(),l=_t("",n.base||"");if(l===void 0)throw new Error(`${l} is not a valid base path`);l&&!s().value&&i({value:l,replace:!0,scroll:!1});const[d,f]=j(!1);let h;const m=(w,M)=>{M.value===g()&&M.state===b()||(h===void 0&&f(!0),Le=w,h=M,ys(()=>{h===M&&(p(h.value),_(h.state),Rs(),N[1](x=>x.filter(A=>A.pending)))}).finally(()=>{h===M&&vs(()=>{Le=void 0,w==="navigate"&&W(h),f(!1),h=void 0})}))},[g,p]=j(s().value),[b,_]=j(s().state),B=ui(g,b,o.queryWrapper),P=[],N=j([]),O=$(()=>typeof n.transformUrl=="function"?Zt(e(),n.transformUrl(B.pathname)):Zt(e(),B.pathname)),T=()=>{const w=O(),M={};for(let x=0;x<w.length;x++)Object.assign(M,w[x].params);return M},E=o.paramsWrapper?o.paramsWrapper(T,e):On(T),k={pattern:l,path:()=>l,outlet:()=>null,resolvePath(w){return _t(l,w)}};return ge(Mr(s,w=>m("native",w),{defer:!0})),{base:k,location:B,params:E,isRouting:d,renderPath:u,parsePath:a,navigatorFactory:L,matches:O,beforeLeave:c,preloadRoute:v,singleFlight:n.singleFlight===void 0?!0:n.singleFlight,submissions:N};function R(w,M,x){ve(()=>{if(typeof M=="number"){M&&(o.go?o.go(M):console.warn("Router integration does not support relative routing"));return}const A=!M||M[0]==="?",{replace:q,resolve:U,scroll:Q,state:V}={replace:!1,resolve:!A,scroll:!0,...x},te=U?w.resolvePath(M):_t(A&&B.pathname||"",M);if(te===void 0)throw new Error(`Path '${M}' is not a routable path`);if(P.length>=ii)throw new Error("Too many redirects");const ce=g();(te!==ce||V!==b())&&(Rn||c.confirm(te,x)&&(P.push({value:ce,replace:q,scroll:Q,state:b()}),m("navigate",{value:te,state:V})))})}function L(w){return w=w||Ke(Ln)||k,(M,x)=>R(w,M,x)}function W(w){const M=P[0];M&&(i({...w,replace:M.replace,scroll:M.scroll}),P.length=0)}function v(w,M){const x=Zt(e(),w.pathname),A=Le;Le="preload";for(let q in x){const{route:U,params:Q}=x[q];U.component&&U.component.preload&&U.component.preload();const{preload:V}=U;M&&V&&kr(t(),()=>V({params:Q,location:{pathname:w.pathname,search:w.search,hash:w.hash,query:Fn(w),state:null,key:""},intent:"preload"}))}Le=A}}function hi(r,e,t,n){const{base:s,location:i,params:o}=r,{pattern:a,component:u,preload:c}=n().route,l=$(()=>n().path);u&&u.preload&&u.preload();const d=c?c({params:o,location:i,intent:Le||"initial"}):void 0;return{parent:e,pattern:a,path:l,outlet:()=>u?C(u,{params:o,location:i,data:d,get children(){return t()}}):t(),resolvePath(h){return _t(s.path(),h,l())}}}const Dn=r=>e=>{const{base:t}=e,n=we(()=>e.children),s=$(()=>In(n(),e.base||""));let i;const o=fi(r,s,()=>i,{base:t,singleFlight:e.singleFlight,transformUrl:e.transformUrl});return r.create&&r.create(o),C(Bn.Provider,{value:o,get children(){return C(gi,{routerState:o,get root(){return e.root},get preload(){return e.rootPreload||e.rootLoad},get children(){return[$(()=>(i=xr())&&null),C(mi,{routerState:o,get branches(){return s()}})]}})}})};function gi(r){const e=r.routerState.location,t=r.routerState.params,n=$(()=>r.preload&&ve(()=>{r.preload({params:t,location:e,intent:di()||"initial"})}));return C(Ne,{get when(){return r.root},keyed:!0,get fallback(){return r.children},children:s=>C(s,{params:t,location:e,get data(){return n()},get children(){return r.children}})})}function mi(r){const e=[];let t;const n=$(Mr(r.routerState.matches,(s,i,o)=>{let a=i&&s.length===i.length;const u=[];for(let c=0,l=s.length;c<l;c++){const d=i&&i[c],f=s[c];o&&d&&f.route.key===d.route.key?u[c]=o[c]:(a=!1,e[c]&&e[c](),Sr(h=>{e[c]=h,u[c]=hi(r.routerState,u[c-1]||r.routerState.base,Wr(()=>n()[c+1]),()=>r.routerState.matches()[c])}))}return e.splice(s.length).forEach(c=>c()),o&&a?o:(t=u[0],u)}));return Wr(()=>n()&&t)()}const Wr=r=>()=>C(Ne,{get when(){return r()},keyed:!0,children:e=>C(Ln.Provider,{value:e,get children(){return e.outlet()}})}),yt=r=>{const e=we(()=>r.children);return Cs(r,{get children(){return e()}})};function pi([r,e],t,n){return[r,s=>e(n(s))]}function vi(r){let e=!1;const t=s=>typeof s=="string"?{value:s}:s,n=pi(j(t(r.get()),{equals:(s,i)=>s.value===i.value&&s.state===i.state}),void 0,s=>(!e&&r.set(s),s));return r.init&&Se(r.init((s=r.get())=>{e=!0,n[1](t(s)),e=!1})),Dn({signal:n,create:r.create,utils:r.utils})}function wi(r,e,t){return r.addEventListener(e,t),()=>r.removeEventListener(e,t)}function yi(r,e){const t=r&&document.getElementById(r);t?t.scrollIntoView():e&&window.scrollTo(0,0)}function bi(r){const e=new URL(r);return e.pathname+e.search}function Si(r){let e;const t={value:r.url||(e=Xs())&&bi(e.request.url)||""};return Dn({signal:[()=>t,n=>Object.assign(t,n)]})(r)}const Mi=new Map;function xi(r=!0,e=!1,t="/_server",n){return s=>{const i=s.base.path(),o=s.navigatorFactory(s.base);let a,u;function c(g){return g.namespaceURI==="http://www.w3.org/2000/svg"}function l(g){if(g.defaultPrevented||g.button!==0||g.metaKey||g.altKey||g.ctrlKey||g.shiftKey)return;const p=g.composedPath().find(O=>O instanceof Node&&O.nodeName.toUpperCase()==="A");if(!p||e&&!p.hasAttribute("link"))return;const b=c(p),_=b?p.href.baseVal:p.href;if((b?p.target.baseVal:p.target)||!_&&!p.hasAttribute("state"))return;const P=(p.getAttribute("rel")||"").split(/\s+/);if(p.hasAttribute("download")||P&&P.includes("external"))return;const N=b?new URL(_,document.baseURI):new URL(_);if(!(N.origin!==window.location.origin||i&&N.pathname&&!N.pathname.toLowerCase().startsWith(i.toLowerCase())))return[p,N]}function d(g){const p=l(g);if(!p)return;const[b,_]=p,B=s.parsePath(_.pathname+_.search+_.hash),P=b.getAttribute("state");g.preventDefault(),o(B,{resolve:!1,replace:b.hasAttribute("replace"),scroll:!b.hasAttribute("noscroll"),state:P?JSON.parse(P):void 0})}function f(g){const p=l(g);if(!p)return;const[b,_]=p;n&&(_.pathname=n(_.pathname)),s.preloadRoute(_,b.getAttribute("preload")!=="false")}function h(g){clearTimeout(a);const p=l(g);if(!p)return u=null;const[b,_]=p;u!==b&&(n&&(_.pathname=n(_.pathname)),a=setTimeout(()=>{s.preloadRoute(_,b.getAttribute("preload")!=="false"),u=b},20))}function m(g){if(g.defaultPrevented)return;let p=g.submitter&&g.submitter.hasAttribute("formaction")?g.submitter.getAttribute("formaction"):g.target.getAttribute("action");if(!p)return;if(!p.startsWith("https://action/")){const _=new URL(p,$n);if(p=s.parsePath(_.pathname+_.search),!p.startsWith(t))return}if(g.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const b=Mi.get(p);if(b){g.preventDefault();const _=new FormData(g.target,g.submitter);b.call({r:s,f:g.target},g.target.enctype==="multipart/form-data"?_:new URLSearchParams(_))}}Wt(["click","submit"]),document.addEventListener("click",d),r&&(document.addEventListener("mousemove",h,{passive:!0}),document.addEventListener("focusin",f,{passive:!0}),document.addEventListener("touchstart",f,{passive:!0})),document.addEventListener("submit",m),Se(()=>{document.removeEventListener("click",d),r&&(document.removeEventListener("mousemove",h),document.removeEventListener("focusin",f),document.removeEventListener("touchstart",f)),document.removeEventListener("submit",m)})}}function ki(r){if(Rn)return Si(r);const e=()=>{const n=window.location.pathname.replace(/^\/+/,"/")+window.location.search,s=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:n+window.location.hash,state:s}},t=En();return vi({get:e,set({value:n,replace:s,scroll:i,state:o}){s?window.history.replaceState(Qs(o),"",n):window.history.pushState(o,"",n),yi(decodeURIComponent(window.location.hash.slice(1)),i),_r()},init:n=>wi(window,"popstate",Js(n,s=>{if(s&&s<0)return!t.confirm(s);{const i=e();return!t.confirm(i.value,{state:i.state})}})),create:xi(r.preload,r.explicitLinks,r.actionBase,r.transformUrl),utils:{go:n=>window.history.go(n),beforeLeave:t}})(r)}var _i=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},er={},bt={},At={exports:{}},Ai=At.exports,Ur;function Ci(){return Ur||(Ur=1,function(r,e){(function(t,n){r.exports=n()})(Ai,function(){return function(t){var n={};function s(i){if(n[i])return n[i].exports;var o=n[i]={i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=t,s.c=n,s.d=function(i,o,a){s.o(i,o)||Object.defineProperty(i,o,{enumerable:!0,get:a})},s.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},s.t=function(i,o){if(1&o&&(i=s(i)),8&o||4&o&&typeof i=="object"&&i&&i.__esModule)return i;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:i}),2&o&&typeof i!="string")for(var u in i)s.d(a,u,function(c){return i[c]}.bind(null,u));return a},s.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return s.d(o,"a",o),o},s.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},s.p="",s(s.s=90)}({17:function(t,n,s){n.__esModule=!0,n.default=void 0;var i=s(18),o=function(){function a(){}return a.getFirstMatch=function(u,c){var l=c.match(u);return l&&l.length>0&&l[1]||""},a.getSecondMatch=function(u,c){var l=c.match(u);return l&&l.length>1&&l[2]||""},a.matchAndReturnConst=function(u,c,l){if(u.test(c))return l},a.getWindowsVersionName=function(u){switch(u){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},a.getMacOSVersionName=function(u){var c=u.split(".").splice(0,2).map(function(l){return parseInt(l,10)||0});if(c.push(0),c[0]===10)switch(c[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},a.getAndroidVersionName=function(u){var c=u.split(".").splice(0,2).map(function(l){return parseInt(l,10)||0});if(c.push(0),!(c[0]===1&&c[1]<5))return c[0]===1&&c[1]<6?"Cupcake":c[0]===1&&c[1]>=6?"Donut":c[0]===2&&c[1]<2?"Eclair":c[0]===2&&c[1]===2?"Froyo":c[0]===2&&c[1]>2?"Gingerbread":c[0]===3?"Honeycomb":c[0]===4&&c[1]<1?"Ice Cream Sandwich":c[0]===4&&c[1]<4?"Jelly Bean":c[0]===4&&c[1]>=4?"KitKat":c[0]===5?"Lollipop":c[0]===6?"Marshmallow":c[0]===7?"Nougat":c[0]===8?"Oreo":c[0]===9?"Pie":void 0},a.getVersionPrecision=function(u){return u.split(".").length},a.compareVersions=function(u,c,l){l===void 0&&(l=!1);var d=a.getVersionPrecision(u),f=a.getVersionPrecision(c),h=Math.max(d,f),m=0,g=a.map([u,c],function(p){var b=h-a.getVersionPrecision(p),_=p+new Array(b+1).join(".0");return a.map(_.split("."),function(B){return new Array(20-B.length).join("0")+B}).reverse()});for(l&&(m=h-Math.min(d,f)),h-=1;h>=m;){if(g[0][h]>g[1][h])return 1;if(g[0][h]===g[1][h]){if(h===m)return 0;h-=1}else if(g[0][h]<g[1][h])return-1}},a.map=function(u,c){var l,d=[];if(Array.prototype.map)return Array.prototype.map.call(u,c);for(l=0;l<u.length;l+=1)d.push(c(u[l]));return d},a.find=function(u,c){var l,d;if(Array.prototype.find)return Array.prototype.find.call(u,c);for(l=0,d=u.length;l<d;l+=1){var f=u[l];if(c(f,l))return f}},a.assign=function(u){for(var c,l,d=u,f=arguments.length,h=new Array(f>1?f-1:0),m=1;m<f;m++)h[m-1]=arguments[m];if(Object.assign)return Object.assign.apply(Object,[u].concat(h));var g=function(){var p=h[c];typeof p=="object"&&p!==null&&Object.keys(p).forEach(function(b){d[b]=p[b]})};for(c=0,l=h.length;c<l;c+=1)g();return u},a.getBrowserAlias=function(u){return i.BROWSER_ALIASES_MAP[u]},a.getBrowserTypeByAlias=function(u){return i.BROWSER_MAP[u]||""},a}();n.default=o,t.exports=n.default},18:function(t,n,s){n.__esModule=!0,n.ENGINE_MAP=n.OS_MAP=n.PLATFORMS_MAP=n.BROWSER_MAP=n.BROWSER_ALIASES_MAP=void 0,n.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},n.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},n.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},n.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},n.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(t,n,s){n.__esModule=!0,n.default=void 0;var i,o=(i=s(91))&&i.__esModule?i:{default:i},a=s(18);function u(l,d){for(var f=0;f<d.length;f++){var h=d[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}var c=function(){function l(){}var d,f,h;return l.getParser=function(m,g){if(g===void 0&&(g=!1),typeof m!="string")throw new Error("UserAgent should be a string");return new o.default(m,g)},l.parse=function(m){return new o.default(m).getResult()},d=l,h=[{key:"BROWSER_MAP",get:function(){return a.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return a.ENGINE_MAP}},{key:"OS_MAP",get:function(){return a.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return a.PLATFORMS_MAP}}],(f=null)&&u(d.prototype,f),h&&u(d,h),l}();n.default=c,t.exports=n.default},91:function(t,n,s){n.__esModule=!0,n.default=void 0;var i=l(s(92)),o=l(s(93)),a=l(s(94)),u=l(s(95)),c=l(s(17));function l(f){return f&&f.__esModule?f:{default:f}}var d=function(){function f(m,g){if(g===void 0&&(g=!1),m==null||m==="")throw new Error("UserAgent parameter can't be empty");this._ua=m,this.parsedResult={},g!==!0&&this.parse()}var h=f.prototype;return h.getUA=function(){return this._ua},h.test=function(m){return m.test(this._ua)},h.parseBrowser=function(){var m=this;this.parsedResult.browser={};var g=c.default.find(i.default,function(p){if(typeof p.test=="function")return p.test(m);if(p.test instanceof Array)return p.test.some(function(b){return m.test(b)});throw new Error("Browser's test function is not valid")});return g&&(this.parsedResult.browser=g.describe(this.getUA())),this.parsedResult.browser},h.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},h.getBrowserName=function(m){return m?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},h.getBrowserVersion=function(){return this.getBrowser().version},h.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},h.parseOS=function(){var m=this;this.parsedResult.os={};var g=c.default.find(o.default,function(p){if(typeof p.test=="function")return p.test(m);if(p.test instanceof Array)return p.test.some(function(b){return m.test(b)});throw new Error("Browser's test function is not valid")});return g&&(this.parsedResult.os=g.describe(this.getUA())),this.parsedResult.os},h.getOSName=function(m){var g=this.getOS().name;return m?String(g).toLowerCase()||"":g||""},h.getOSVersion=function(){return this.getOS().version},h.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},h.getPlatformType=function(m){m===void 0&&(m=!1);var g=this.getPlatform().type;return m?String(g).toLowerCase()||"":g||""},h.parsePlatform=function(){var m=this;this.parsedResult.platform={};var g=c.default.find(a.default,function(p){if(typeof p.test=="function")return p.test(m);if(p.test instanceof Array)return p.test.some(function(b){return m.test(b)});throw new Error("Browser's test function is not valid")});return g&&(this.parsedResult.platform=g.describe(this.getUA())),this.parsedResult.platform},h.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},h.getEngineName=function(m){return m?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},h.parseEngine=function(){var m=this;this.parsedResult.engine={};var g=c.default.find(u.default,function(p){if(typeof p.test=="function")return p.test(m);if(p.test instanceof Array)return p.test.some(function(b){return m.test(b)});throw new Error("Browser's test function is not valid")});return g&&(this.parsedResult.engine=g.describe(this.getUA())),this.parsedResult.engine},h.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},h.getResult=function(){return c.default.assign({},this.parsedResult)},h.satisfies=function(m){var g=this,p={},b=0,_={},B=0;if(Object.keys(m).forEach(function(L){var W=m[L];typeof W=="string"?(_[L]=W,B+=1):typeof W=="object"&&(p[L]=W,b+=1)}),b>0){var P=Object.keys(p),N=c.default.find(P,function(L){return g.isOS(L)});if(N){var O=this.satisfies(p[N]);if(O!==void 0)return O}var T=c.default.find(P,function(L){return g.isPlatform(L)});if(T){var E=this.satisfies(p[T]);if(E!==void 0)return E}}if(B>0){var k=Object.keys(_),R=c.default.find(k,function(L){return g.isBrowser(L,!0)});if(R!==void 0)return this.compareVersion(_[R])}},h.isBrowser=function(m,g){g===void 0&&(g=!1);var p=this.getBrowserName().toLowerCase(),b=m.toLowerCase(),_=c.default.getBrowserTypeByAlias(b);return g&&_&&(b=_.toLowerCase()),b===p},h.compareVersion=function(m){var g=[0],p=m,b=!1,_=this.getBrowserVersion();if(typeof _=="string")return m[0]===">"||m[0]==="<"?(p=m.substr(1),m[1]==="="?(b=!0,p=m.substr(2)):g=[],m[0]===">"?g.push(1):g.push(-1)):m[0]==="="?p=m.substr(1):m[0]==="~"&&(b=!0,p=m.substr(1)),g.indexOf(c.default.compareVersions(_,p,b))>-1},h.isOS=function(m){return this.getOSName(!0)===String(m).toLowerCase()},h.isPlatform=function(m){return this.getPlatformType(!0)===String(m).toLowerCase()},h.isEngine=function(m){return this.getEngineName(!0)===String(m).toLowerCase()},h.is=function(m,g){return g===void 0&&(g=!1),this.isBrowser(m,g)||this.isOS(m)||this.isPlatform(m)},h.some=function(m){var g=this;return m===void 0&&(m=[]),m.some(function(p){return g.is(p)})},f}();n.default=d,t.exports=n.default},92:function(t,n,s){n.__esModule=!0,n.default=void 0;var i,o=(i=s(17))&&i.__esModule?i:{default:i},a=/version\/(\d+(\.?_?\d+)+)/i,u=[{test:[/googlebot/i],describe:function(c){var l={name:"Googlebot"},d=o.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,c)||o.default.getFirstMatch(a,c);return d&&(l.version=d),l}},{test:[/opera/i],describe:function(c){var l={name:"Opera"},d=o.default.getFirstMatch(a,c)||o.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:[/opr\/|opios/i],describe:function(c){var l={name:"Opera"},d=o.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,c)||o.default.getFirstMatch(a,c);return d&&(l.version=d),l}},{test:[/SamsungBrowser/i],describe:function(c){var l={name:"Samsung Internet for Android"},d=o.default.getFirstMatch(a,c)||o.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:[/Whale/i],describe:function(c){var l={name:"NAVER Whale Browser"},d=o.default.getFirstMatch(a,c)||o.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,c);return d&&(l.version=d),l}},{test:[/MZBrowser/i],describe:function(c){var l={name:"MZ Browser"},d=o.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,c)||o.default.getFirstMatch(a,c);return d&&(l.version=d),l}},{test:[/focus/i],describe:function(c){var l={name:"Focus"},d=o.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,c)||o.default.getFirstMatch(a,c);return d&&(l.version=d),l}},{test:[/swing/i],describe:function(c){var l={name:"Swing"},d=o.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,c)||o.default.getFirstMatch(a,c);return d&&(l.version=d),l}},{test:[/coast/i],describe:function(c){var l={name:"Opera Coast"},d=o.default.getFirstMatch(a,c)||o.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(c){var l={name:"Opera Touch"},d=o.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,c)||o.default.getFirstMatch(a,c);return d&&(l.version=d),l}},{test:[/yabrowser/i],describe:function(c){var l={name:"Yandex Browser"},d=o.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,c)||o.default.getFirstMatch(a,c);return d&&(l.version=d),l}},{test:[/ucbrowser/i],describe:function(c){var l={name:"UC Browser"},d=o.default.getFirstMatch(a,c)||o.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:[/Maxthon|mxios/i],describe:function(c){var l={name:"Maxthon"},d=o.default.getFirstMatch(a,c)||o.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:[/epiphany/i],describe:function(c){var l={name:"Epiphany"},d=o.default.getFirstMatch(a,c)||o.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:[/puffin/i],describe:function(c){var l={name:"Puffin"},d=o.default.getFirstMatch(a,c)||o.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:[/sleipnir/i],describe:function(c){var l={name:"Sleipnir"},d=o.default.getFirstMatch(a,c)||o.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:[/k-meleon/i],describe:function(c){var l={name:"K-Meleon"},d=o.default.getFirstMatch(a,c)||o.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:[/micromessenger/i],describe:function(c){var l={name:"WeChat"},d=o.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,c)||o.default.getFirstMatch(a,c);return d&&(l.version=d),l}},{test:[/qqbrowser/i],describe:function(c){var l={name:/qqbrowserlite/i.test(c)?"QQ Browser Lite":"QQ Browser"},d=o.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,c)||o.default.getFirstMatch(a,c);return d&&(l.version=d),l}},{test:[/msie|trident/i],describe:function(c){var l={name:"Internet Explorer"},d=o.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:[/\sedg\//i],describe:function(c){var l={name:"Microsoft Edge"},d=o.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:[/edg([ea]|ios)/i],describe:function(c){var l={name:"Microsoft Edge"},d=o.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:[/vivaldi/i],describe:function(c){var l={name:"Vivaldi"},d=o.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:[/seamonkey/i],describe:function(c){var l={name:"SeaMonkey"},d=o.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:[/sailfish/i],describe:function(c){var l={name:"Sailfish"},d=o.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,c);return d&&(l.version=d),l}},{test:[/silk/i],describe:function(c){var l={name:"Amazon Silk"},d=o.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:[/phantom/i],describe:function(c){var l={name:"PhantomJS"},d=o.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:[/slimerjs/i],describe:function(c){var l={name:"SlimerJS"},d=o.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(c){var l={name:"BlackBerry"},d=o.default.getFirstMatch(a,c)||o.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:[/(web|hpw)[o0]s/i],describe:function(c){var l={name:"WebOS Browser"},d=o.default.getFirstMatch(a,c)||o.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:[/bada/i],describe:function(c){var l={name:"Bada"},d=o.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:[/tizen/i],describe:function(c){var l={name:"Tizen"},d=o.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,c)||o.default.getFirstMatch(a,c);return d&&(l.version=d),l}},{test:[/qupzilla/i],describe:function(c){var l={name:"QupZilla"},d=o.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,c)||o.default.getFirstMatch(a,c);return d&&(l.version=d),l}},{test:[/firefox|iceweasel|fxios/i],describe:function(c){var l={name:"Firefox"},d=o.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:[/electron/i],describe:function(c){var l={name:"Electron"},d=o.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:[/MiuiBrowser/i],describe:function(c){var l={name:"Miui"},d=o.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:[/chromium/i],describe:function(c){var l={name:"Chromium"},d=o.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,c)||o.default.getFirstMatch(a,c);return d&&(l.version=d),l}},{test:[/chrome|crios|crmo/i],describe:function(c){var l={name:"Chrome"},d=o.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:[/GSA/i],describe:function(c){var l={name:"Google Search"},d=o.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:function(c){var l=!c.test(/like android/i),d=c.test(/android/i);return l&&d},describe:function(c){var l={name:"Android Browser"},d=o.default.getFirstMatch(a,c);return d&&(l.version=d),l}},{test:[/playstation 4/i],describe:function(c){var l={name:"PlayStation 4"},d=o.default.getFirstMatch(a,c);return d&&(l.version=d),l}},{test:[/safari|applewebkit/i],describe:function(c){var l={name:"Safari"},d=o.default.getFirstMatch(a,c);return d&&(l.version=d),l}},{test:[/.*/i],describe:function(c){var l=c.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:o.default.getFirstMatch(l,c),version:o.default.getSecondMatch(l,c)}}}];n.default=u,t.exports=n.default},93:function(t,n,s){n.__esModule=!0,n.default=void 0;var i,o=(i=s(17))&&i.__esModule?i:{default:i},a=s(18),u=[{test:[/Roku\/DVP/],describe:function(c){var l=o.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,c);return{name:a.OS_MAP.Roku,version:l}}},{test:[/windows phone/i],describe:function(c){var l=o.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,c);return{name:a.OS_MAP.WindowsPhone,version:l}}},{test:[/windows /i],describe:function(c){var l=o.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,c),d=o.default.getWindowsVersionName(l);return{name:a.OS_MAP.Windows,version:l,versionName:d}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(c){var l={name:a.OS_MAP.iOS},d=o.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,c);return d&&(l.version=d),l}},{test:[/macintosh/i],describe:function(c){var l=o.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,c).replace(/[_\s]/g,"."),d=o.default.getMacOSVersionName(l),f={name:a.OS_MAP.MacOS,version:l};return d&&(f.versionName=d),f}},{test:[/(ipod|iphone|ipad)/i],describe:function(c){var l=o.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,c).replace(/[_\s]/g,".");return{name:a.OS_MAP.iOS,version:l}}},{test:function(c){var l=!c.test(/like android/i),d=c.test(/android/i);return l&&d},describe:function(c){var l=o.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,c),d=o.default.getAndroidVersionName(l),f={name:a.OS_MAP.Android,version:l};return d&&(f.versionName=d),f}},{test:[/(web|hpw)[o0]s/i],describe:function(c){var l=o.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,c),d={name:a.OS_MAP.WebOS};return l&&l.length&&(d.version=l),d}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(c){var l=o.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,c)||o.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,c)||o.default.getFirstMatch(/\bbb(\d+)/i,c);return{name:a.OS_MAP.BlackBerry,version:l}}},{test:[/bada/i],describe:function(c){var l=o.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,c);return{name:a.OS_MAP.Bada,version:l}}},{test:[/tizen/i],describe:function(c){var l=o.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,c);return{name:a.OS_MAP.Tizen,version:l}}},{test:[/linux/i],describe:function(){return{name:a.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:a.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(c){var l=o.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,c);return{name:a.OS_MAP.PlayStation4,version:l}}}];n.default=u,t.exports=n.default},94:function(t,n,s){n.__esModule=!0,n.default=void 0;var i,o=(i=s(17))&&i.__esModule?i:{default:i},a=s(18),u=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(c){var l=o.default.getFirstMatch(/(can-l01)/i,c)&&"Nova",d={type:a.PLATFORMS_MAP.mobile,vendor:"Huawei"};return l&&(d.model=l),d}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet}}},{test:function(c){var l=c.test(/ipod|iphone/i),d=c.test(/like (ipod|iphone)/i);return l&&!d},describe:function(c){var l=o.default.getFirstMatch(/(ipod|iphone)/i,c);return{type:a.PLATFORMS_MAP.mobile,vendor:"Apple",model:l}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(c){return c.getBrowserName(!0)==="blackberry"},describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(c){return c.getBrowserName(!0)==="bada"},describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(c){return c.getBrowserName()==="windows phone"},describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(c){var l=Number(String(c.getOSVersion()).split(".")[0]);return c.getOSName(!0)==="android"&&l>=3},describe:function(){return{type:a.PLATFORMS_MAP.tablet}}},{test:function(c){return c.getOSName(!0)==="android"},describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(c){return c.getOSName(!0)==="macos"},describe:function(){return{type:a.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(c){return c.getOSName(!0)==="windows"},describe:function(){return{type:a.PLATFORMS_MAP.desktop}}},{test:function(c){return c.getOSName(!0)==="linux"},describe:function(){return{type:a.PLATFORMS_MAP.desktop}}},{test:function(c){return c.getOSName(!0)==="playstation 4"},describe:function(){return{type:a.PLATFORMS_MAP.tv}}},{test:function(c){return c.getOSName(!0)==="roku"},describe:function(){return{type:a.PLATFORMS_MAP.tv}}}];n.default=u,t.exports=n.default},95:function(t,n,s){n.__esModule=!0,n.default=void 0;var i,o=(i=s(17))&&i.__esModule?i:{default:i},a=s(18),u=[{test:function(c){return c.getBrowserName(!0)==="microsoft edge"},describe:function(c){if(/\sedg\//i.test(c))return{name:a.ENGINE_MAP.Blink};var l=o.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,c);return{name:a.ENGINE_MAP.EdgeHTML,version:l}}},{test:[/trident/i],describe:function(c){var l={name:a.ENGINE_MAP.Trident},d=o.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:function(c){return c.test(/presto/i)},describe:function(c){var l={name:a.ENGINE_MAP.Presto},d=o.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:function(c){var l=c.test(/gecko/i),d=c.test(/like gecko/i);return l&&!d},describe:function(c){var l={name:a.ENGINE_MAP.Gecko},d=o.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:a.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(c){var l={name:a.ENGINE_MAP.WebKit},d=o.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,c);return d&&(l.version=d),l}}];n.default=u,t.exports=n.default}})})}(At)),At.exports}var jr;function Pi(){return jr||(jr=1,function(r){var e=bt.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(r,"__esModule",{value:!0}),r.requestVideoPermissions=r.requestAudioPermissions=r.requestMediaPermissions=r.MediaPermissionsErrorType=void 0;const t=e(Ci());var n;(function(a){a.SystemPermissionDenied="SystemPermissionDenied",a.UserPermissionDenied="UserPermissionDenied",a.CouldNotStartVideoSource="CouldNotStartVideoSource",a.Generic="Generic"})(n=r.MediaPermissionsErrorType||(r.MediaPermissionsErrorType={}));const s=a=>new Promise((u,c)=>{navigator.mediaDevices.getUserMedia(a??{audio:!0,video:!0}).then(l=>{l.getTracks().forEach(d=>{d.stop()}),u(!0)}).catch(l=>{const f=t.default.getParser(window.navigator.userAgent).getBrowserName(),h=l.name,m=l.message;let g=n.Generic;f==="Chrome"?h==="NotAllowedError"?m==="Permission denied by system"?g=n.SystemPermissionDenied:m==="Permission denied"&&(g=n.UserPermissionDenied):h==="NotReadableError"&&(g=n.CouldNotStartVideoSource):f==="Safari"?h==="NotAllowedError"&&(g=n.UserPermissionDenied):f==="Microsoft Edge"?h==="NotAllowedError"?g=n.UserPermissionDenied:h==="NotReadableError"&&(g=n.CouldNotStartVideoSource):f==="Firefox"&&(h==="NotFoundError"||h==="NotReadableError"?g=n.SystemPermissionDenied:h==="NotAllowedError"?g=n.UserPermissionDenied:h==="AbortError"&&(g=n.CouldNotStartVideoSource)),c({type:g,name:l.name,message:l.message})})});r.requestMediaPermissions=s;const i=()=>(0,r.requestMediaPermissions)({audio:!0,video:!1});r.requestAudioPermissions=i;const o=()=>(0,r.requestMediaPermissions)({audio:!1,video:!0});r.requestVideoPermissions=o}(bt)),bt}var Vr;function Ri(){return Vr||(Vr=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.requestMediaPermissions=r.MediaPermissionsErrorType=void 0;var e=Pi();Object.defineProperty(r,"MediaPermissionsErrorType",{enumerable:!0,get:function(){return e.MediaPermissionsErrorType}}),Object.defineProperty(r,"requestMediaPermissions",{enumerable:!0,get:function(){return e.requestMediaPermissions}})}(er)),er}var Ze=Ri();const Ei={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},zn={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},J={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},de={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},$e={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class y{static getFirstMatch(e,t){const n=t.match(e);return n&&n.length>0&&n[1]||""}static getSecondMatch(e,t){const n=t.match(e);return n&&n.length>1&&n[2]||""}static matchAndReturnConst(e,t,n){if(e.test(t))return n}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const t=e.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(t.push(0),t[0]===10)switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const t=e.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(t.push(0),!(t[0]===1&&t[1]<5)){if(t[0]===1&&t[1]<6)return"Cupcake";if(t[0]===1&&t[1]>=6)return"Donut";if(t[0]===2&&t[1]<2)return"Eclair";if(t[0]===2&&t[1]===2)return"Froyo";if(t[0]===2&&t[1]>2)return"Gingerbread";if(t[0]===3)return"Honeycomb";if(t[0]===4&&t[1]<1)return"Ice Cream Sandwich";if(t[0]===4&&t[1]<4)return"Jelly Bean";if(t[0]===4&&t[1]>=4)return"KitKat";if(t[0]===5)return"Lollipop";if(t[0]===6)return"Marshmallow";if(t[0]===7)return"Nougat";if(t[0]===8)return"Oreo";if(t[0]===9)return"Pie"}}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,t,n=!1){const s=y.getVersionPrecision(e),i=y.getVersionPrecision(t);let o=Math.max(s,i),a=0;const u=y.map([e,t],c=>{const l=o-y.getVersionPrecision(c),d=c+new Array(l+1).join(".0");return y.map(d.split("."),f=>new Array(20-f.length).join("0")+f).reverse()});for(n&&(a=o-Math.min(s,i)),o-=1;o>=a;){if(u[0][o]>u[1][o])return 1;if(u[0][o]===u[1][o]){if(o===a)return 0;o-=1}else if(u[0][o]<u[1][o])return-1}}static map(e,t){const n=[];let s;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(s=0;s<e.length;s+=1)n.push(t(e[s]));return n}static find(e,t){let n,s;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,s=e.length;n<s;n+=1){const i=e[n];if(t(i,n))return i}}static assign(e,...t){const n=e;let s,i;if(Object.assign)return Object.assign(e,...t);for(s=0,i=t.length;s<i;s+=1){const o=t[s];typeof o=="object"&&o!==null&&Object.keys(o).forEach(u=>{n[u]=o[u]})}return e}static getBrowserAlias(e){return Ei[e]}static getBrowserTypeByAlias(e){return zn[e]||""}}const Y=/version\/(\d+(\.?_?\d+)+)/i,$i=[{test:[/googlebot/i],describe(r){const e={name:"Googlebot"},t=y.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,r)||y.getFirstMatch(Y,r);return t&&(e.version=t),e}},{test:[/opera/i],describe(r){const e={name:"Opera"},t=y.getFirstMatch(Y,r)||y.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/opr\/|opios/i],describe(r){const e={name:"Opera"},t=y.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,r)||y.getFirstMatch(Y,r);return t&&(e.version=t),e}},{test:[/SamsungBrowser/i],describe(r){const e={name:"Samsung Internet for Android"},t=y.getFirstMatch(Y,r)||y.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/Whale/i],describe(r){const e={name:"NAVER Whale Browser"},t=y.getFirstMatch(Y,r)||y.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/MZBrowser/i],describe(r){const e={name:"MZ Browser"},t=y.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,r)||y.getFirstMatch(Y,r);return t&&(e.version=t),e}},{test:[/focus/i],describe(r){const e={name:"Focus"},t=y.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,r)||y.getFirstMatch(Y,r);return t&&(e.version=t),e}},{test:[/swing/i],describe(r){const e={name:"Swing"},t=y.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,r)||y.getFirstMatch(Y,r);return t&&(e.version=t),e}},{test:[/coast/i],describe(r){const e={name:"Opera Coast"},t=y.getFirstMatch(Y,r)||y.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(r){const e={name:"Opera Touch"},t=y.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,r)||y.getFirstMatch(Y,r);return t&&(e.version=t),e}},{test:[/yabrowser/i],describe(r){const e={name:"Yandex Browser"},t=y.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,r)||y.getFirstMatch(Y,r);return t&&(e.version=t),e}},{test:[/ucbrowser/i],describe(r){const e={name:"UC Browser"},t=y.getFirstMatch(Y,r)||y.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/Maxthon|mxios/i],describe(r){const e={name:"Maxthon"},t=y.getFirstMatch(Y,r)||y.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/epiphany/i],describe(r){const e={name:"Epiphany"},t=y.getFirstMatch(Y,r)||y.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/puffin/i],describe(r){const e={name:"Puffin"},t=y.getFirstMatch(Y,r)||y.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/sleipnir/i],describe(r){const e={name:"Sleipnir"},t=y.getFirstMatch(Y,r)||y.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/k-meleon/i],describe(r){const e={name:"K-Meleon"},t=y.getFirstMatch(Y,r)||y.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/micromessenger/i],describe(r){const e={name:"WeChat"},t=y.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,r)||y.getFirstMatch(Y,r);return t&&(e.version=t),e}},{test:[/qqbrowser/i],describe(r){const e={name:/qqbrowserlite/i.test(r)?"QQ Browser Lite":"QQ Browser"},t=y.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,r)||y.getFirstMatch(Y,r);return t&&(e.version=t),e}},{test:[/msie|trident/i],describe(r){const e={name:"Internet Explorer"},t=y.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/\sedg\//i],describe(r){const e={name:"Microsoft Edge"},t=y.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/edg([ea]|ios)/i],describe(r){const e={name:"Microsoft Edge"},t=y.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/vivaldi/i],describe(r){const e={name:"Vivaldi"},t=y.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/seamonkey/i],describe(r){const e={name:"SeaMonkey"},t=y.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/sailfish/i],describe(r){const e={name:"Sailfish"},t=y.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,r);return t&&(e.version=t),e}},{test:[/silk/i],describe(r){const e={name:"Amazon Silk"},t=y.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/phantom/i],describe(r){const e={name:"PhantomJS"},t=y.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/slimerjs/i],describe(r){const e={name:"SlimerJS"},t=y.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(r){const e={name:"BlackBerry"},t=y.getFirstMatch(Y,r)||y.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/(web|hpw)[o0]s/i],describe(r){const e={name:"WebOS Browser"},t=y.getFirstMatch(Y,r)||y.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/bada/i],describe(r){const e={name:"Bada"},t=y.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/tizen/i],describe(r){const e={name:"Tizen"},t=y.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,r)||y.getFirstMatch(Y,r);return t&&(e.version=t),e}},{test:[/qupzilla/i],describe(r){const e={name:"QupZilla"},t=y.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,r)||y.getFirstMatch(Y,r);return t&&(e.version=t),e}},{test:[/firefox|iceweasel|fxios/i],describe(r){const e={name:"Firefox"},t=y.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/electron/i],describe(r){const e={name:"Electron"},t=y.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/MiuiBrowser/i],describe(r){const e={name:"Miui"},t=y.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/chromium/i],describe(r){const e={name:"Chromium"},t=y.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,r)||y.getFirstMatch(Y,r);return t&&(e.version=t),e}},{test:[/chrome|crios|crmo/i],describe(r){const e={name:"Chrome"},t=y.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/GSA/i],describe(r){const e={name:"Google Search"},t=y.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test(r){const e=!r.test(/like android/i),t=r.test(/android/i);return e&&t},describe(r){const e={name:"Android Browser"},t=y.getFirstMatch(Y,r);return t&&(e.version=t),e}},{test:[/playstation 4/i],describe(r){const e={name:"PlayStation 4"},t=y.getFirstMatch(Y,r);return t&&(e.version=t),e}},{test:[/safari|applewebkit/i],describe(r){const e={name:"Safari"},t=y.getFirstMatch(Y,r);return t&&(e.version=t),e}},{test:[/.*/i],describe(r){const e=/^(.*)\/(.*) /,t=/^(.*)\/(.*)[ \t]\((.*)/,s=r.search("\\(")!==-1?t:e;return{name:y.getFirstMatch(s,r),version:y.getSecondMatch(s,r)}}}],Fi=[{test:[/Roku\/DVP/],describe(r){const e=y.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,r);return{name:de.Roku,version:e}}},{test:[/windows phone/i],describe(r){const e=y.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,r);return{name:de.WindowsPhone,version:e}}},{test:[/windows /i],describe(r){const e=y.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,r),t=y.getWindowsVersionName(e);return{name:de.Windows,version:e,versionName:t}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(r){const e={name:de.iOS},t=y.getSecondMatch(/(Version\/)(\d[\d.]+)/,r);return t&&(e.version=t),e}},{test:[/macintosh/i],describe(r){const e=y.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,r).replace(/[_\s]/g,"."),t=y.getMacOSVersionName(e),n={name:de.MacOS,version:e};return t&&(n.versionName=t),n}},{test:[/(ipod|iphone|ipad)/i],describe(r){const e=y.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,r).replace(/[_\s]/g,".");return{name:de.iOS,version:e}}},{test(r){const e=!r.test(/like android/i),t=r.test(/android/i);return e&&t},describe(r){const e=y.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,r),t=y.getAndroidVersionName(e),n={name:de.Android,version:e};return t&&(n.versionName=t),n}},{test:[/(web|hpw)[o0]s/i],describe(r){const e=y.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,r),t={name:de.WebOS};return e&&e.length&&(t.version=e),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(r){const e=y.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,r)||y.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,r)||y.getFirstMatch(/\bbb(\d+)/i,r);return{name:de.BlackBerry,version:e}}},{test:[/bada/i],describe(r){const e=y.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,r);return{name:de.Bada,version:e}}},{test:[/tizen/i],describe(r){const e=y.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,r);return{name:de.Tizen,version:e}}},{test:[/linux/i],describe(){return{name:de.Linux}}},{test:[/CrOS/],describe(){return{name:de.ChromeOS}}},{test:[/PlayStation 4/],describe(r){const e=y.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,r);return{name:de.PlayStation4,version:e}}}],Oi=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(r){const e=y.getFirstMatch(/(can-l01)/i,r)&&"Nova",t={type:J.mobile,vendor:"Huawei"};return e&&(t.model=e),t}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:J.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:J.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:J.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:J.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:J.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:J.tablet}}},{test(r){const e=r.test(/ipod|iphone/i),t=r.test(/like (ipod|iphone)/i);return e&&!t},describe(r){const e=y.getFirstMatch(/(ipod|iphone)/i,r);return{type:J.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:J.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:J.mobile}}},{test(r){return r.getBrowserName(!0)==="blackberry"},describe(){return{type:J.mobile,vendor:"BlackBerry"}}},{test(r){return r.getBrowserName(!0)==="bada"},describe(){return{type:J.mobile}}},{test(r){return r.getBrowserName()==="windows phone"},describe(){return{type:J.mobile,vendor:"Microsoft"}}},{test(r){const e=Number(String(r.getOSVersion()).split(".")[0]);return r.getOSName(!0)==="android"&&e>=3},describe(){return{type:J.tablet}}},{test(r){return r.getOSName(!0)==="android"},describe(){return{type:J.mobile}}},{test(r){return r.getOSName(!0)==="macos"},describe(){return{type:J.desktop,vendor:"Apple"}}},{test(r){return r.getOSName(!0)==="windows"},describe(){return{type:J.desktop}}},{test(r){return r.getOSName(!0)==="linux"},describe(){return{type:J.desktop}}},{test(r){return r.getOSName(!0)==="playstation 4"},describe(){return{type:J.tv}}},{test(r){return r.getOSName(!0)==="roku"},describe(){return{type:J.tv}}}],Ti=[{test(r){return r.getBrowserName(!0)==="microsoft edge"},describe(r){if(/\sedg\//i.test(r))return{name:$e.Blink};const t=y.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,r);return{name:$e.EdgeHTML,version:t}}},{test:[/trident/i],describe(r){const e={name:$e.Trident},t=y.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test(r){return r.test(/presto/i)},describe(r){const e={name:$e.Presto},t=y.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test(r){const e=r.test(/gecko/i),t=r.test(/like gecko/i);return e&&!t},describe(r){const e={name:$e.Gecko},t=y.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:$e.Blink}}},{test:[/(apple)?webkit/i],describe(r){const e={name:$e.WebKit},t=y.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}}];class Yr{constructor(e,t=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},t!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=y.find($i,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=y.find(Fi,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:t}=this.getOS();return e?String(t).toLowerCase()||"":t||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:t}=this.getPlatform();return e?String(t).toLowerCase()||"":t||""}parsePlatform(){this.parsedResult.platform={};const e=y.find(Oi,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=y.find(Ti,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return y.assign({},this.parsedResult)}satisfies(e){const t={};let n=0;const s={};let i=0;if(Object.keys(e).forEach(a=>{const u=e[a];typeof u=="string"?(s[a]=u,i+=1):typeof u=="object"&&(t[a]=u,n+=1)}),n>0){const a=Object.keys(t),u=y.find(a,l=>this.isOS(l));if(u){const l=this.satisfies(t[u]);if(l!==void 0)return l}const c=y.find(a,l=>this.isPlatform(l));if(c){const l=this.satisfies(t[c]);if(l!==void 0)return l}}if(i>0){const a=Object.keys(s),u=y.find(a,c=>this.isBrowser(c,!0));if(u!==void 0)return this.compareVersion(s[u])}}isBrowser(e,t=!1){const n=this.getBrowserName().toLowerCase();let s=e.toLowerCase();const i=y.getBrowserTypeByAlias(s);return t&&i&&(s=i.toLowerCase()),s===n}compareVersion(e){let t=[0],n=e,s=!1;const i=this.getBrowserVersion();if(typeof i=="string")return e[0]===">"||e[0]==="<"?(n=e.substr(1),e[1]==="="?(s=!0,n=e.substr(2)):t=[],e[0]===">"?t.push(1):t.push(-1)):e[0]==="="?n=e.substr(1):e[0]==="~"&&(s=!0,n=e.substr(1)),t.indexOf(y.compareVersions(i,n,s))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,t=!1){return this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(t=>this.is(t))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Bi{static getParser(e,t=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new Yr(e,t)}static parse(e){return new Yr(e).getResult()}static get BROWSER_MAP(){return zn}static get ENGINE_MAP(){return $e}static get OS_MAP(){return de}static get PLATFORMS_MAP(){return J}}let St;const ot=()=>St||(St=Bi.parse(window.navigator.userAgent),St),Li=r=>(r.stack??=new Error().stack,r),ke=async r=>{try{return await r()}catch(e){throw Li(e instanceof Error?e:new Error(e?.toString()))}};function Wn(r){return{...Xr,video:{...Xr.video,deviceId:{exact:r}}}}const Xr={audio:!1,video:{facingMode:{ideal:"environment"},frameRate:{ideal:60,min:30},sampleRate:{ideal:60,min:30}}},[Un,Ni]=j([]);async function jt(){if(navigator.mediaDevices?.enumerateDevices)try{const e=(await ke(()=>navigator.mediaDevices?.enumerateDevices())).filter(t=>t.kind==="videoinput");Un().length!==e.length&&Ni(e)}catch(r){if(r.message.includes("Illegal invocation"))return;throw r}}function qi(){if(!("mediaDevices"in navigator&&"getUserMedia"in navigator.mediaDevices)){oe("error:nosupport");return}navigator.permissions.query({name:"camera"}).then(e=>{e.state==="granted"&&oe("granted"),e.state==="denied"&&oe("denied")}).catch(e=>{console.error(e)}).finally(jt)}const[ne,oe]=j("unknown");qi();const[at,ur]=j(),ct=new Map,Gr=()=>at()?ct.get(at().id):void 0;async function Tt(){for(const[r,e]of ct){const t=e;if(!t){ct.delete(r);continue}if(t.active){t.getTracks().forEach(n=>{n.readyState!=="ended"&&(n.stop(),n.enabled=!1)});try{t.stop&&t.stop()}catch{}ur(void 0)}}await new Promise(r=>setTimeout(r,200))}const We=()=>ne().startsWith("error"),jn=()=>ne()==="unknown"||ne()==="error:inuse",Vn=()=>ne()==="granted",dr=He({permission:ne,hasPermission:Vn,hasErrored:We,canPrompt:jn,hasMediaSupport:()=>ne()!=="error:nosupport",requestCamera:Xn,stopCameraStream:Tt,requestPermission:Ii,devices:Un,camera:at,cameraStream:()=>{}}),Pe=()=>Ke(dr);async function Ii(){if(!jn())return ne();oe("pending");const r=localStorage.getItem("camera")??void 0;return await Ze.requestMediaPermissions(Wn(r)).then(async()=>(await jt(),await Cr(),oe("granted"))).catch(e=>Yn(e,r))}function Yn(r,e){const{type:t,message:n,name:s}=r;return t===Ze.MediaPermissionsErrorType.SystemPermissionDenied?oe("denied:system"):t===Ze.MediaPermissionsErrorType.UserPermissionDenied?oe("denied"):t===Ze.MediaPermissionsErrorType.CouldNotStartVideoSource||s==="AbortError"&&n==="Starting videoinput failed"||s==="NotReadableError"?oe("error:inuse"):t===Ze.MediaPermissionsErrorType.Generic&&n==="Permission dismissed"?oe("unknown"):s==="OverconstrainedError"&&(r.constraint==="deviceId"||n==="")&&e?(localStorage.removeItem("camera"),oe("error:inuse")):(console.error(r),oe("error"))}function Xn(r){if(ne()!=="granted")throw new Error("Call 'requestPermission' before 'getStream'");return Cr(r)}async function Cr(r){if(We())return{id:"",label:"X",facing:"loading",name:"X"};const e=localStorage.getItem("camera")??void 0,t=r??e??void 0;at()?.id!==t&&await Tt();const n=await ke(()=>navigator.mediaDevices.getUserMedia(Wn(t))).catch(i=>{if(i.name==="NotReadableError"){localStorage.setItem("camera",t),window.location.reload();return}if(Yn(i,e)==="error")throw i});if(!n)return{id:t,label:"?",facing:"loading",name:""};if(await jt(),r&&ct.set(r,n),!n.active||!n.getTracks())return localStorage.setItem("camera",t),ne()==="error:inuse"?(ur(void 0),{id:t,label:"X",facing:"loading",name:"X"}):{id:t,label:"?",facing:"loading",name:""};const s=n.getTracks()[0].getSettings().deviceId;return ct.set(s,n),localStorage.setItem("camera",s),ur({id:s,name:n.getTracks()[0].label,label:n.getTracks()[0].label.split("(")[0].split(",")[0].trim(),facing:ot().platform.type==="desktop"?"desktop":n.getTracks()[0].getSettings().facingMode})}const Di=r=>{const e=t=>async n=>{We()||(await jt(),t.state==="granted"&&ne()!=="granted"&&!We()&&await Cr().then(()=>oe("granted")),t.state==="denied"&&oe("denied"),t.state==="prompt"&&oe("unknown"))};return Ce(async()=>{const t=()=>{ne()!=="pending"&&(We()||ke(()=>navigator.permissions.query({name:"camera"})).then(n=>{e(n)()}).catch(()=>{}).finally(()=>window.setTimeout(()=>requestAnimationFrame(t),10)))};await ke(()=>navigator.permissions.query({name:"camera"})).then(n=>{n.onchange=e(n),requestAnimationFrame(t)}).catch(()=>{}),Vn()&&!We()&&!Gr()&&await Xn(),window.addEventListener("unload",async()=>{oe("denied:system"),await Tt()},{once:!0})}),Se(async()=>{await Tt()}),C(dr.Provider,{get value(){return{...dr.defaultValue,hasPermission:$(()=>ne()==="granted",ne),canPrompt:$(()=>ne()==="unknown"||ne()==="error:inuse",ne),hasMediaSupport:$(()=>ne()!=="error:nosupport",ne),cameraStream:$(Gr,[at])}},get children(){return we(()=>r.children)()}})};var zi=(r,e)=>{if(e)for(const[t,n]of Object.entries(e))r=r.replace(new RegExp(`{{\\s*${t}\\s*}}`,"g"),n);return r},Wi=F("<br>");const Ui={common:{close:"Close",offline:"You appear to be offline, please check your network connection",refresh:"Refresh page",share:"Share Guessify",unhandledError:{title:"Something went wrong.",details:"Details",explainer:["The application has encountered an unhandled error, please try again.","If this problem persists, please file a bug report, using the details below.","Closing this message will restart the application."]}},spotify:{title:"Spotify",explainer:[["Please connect to Spotify. ",Wi(),"We need you to log into Spotify to be able to play music in the browser."],"For Spotify to allow this app to play music, your account needs to be a premium subscription."],signingIn:"Signing in...",signIn:"Sign in to Spotify",signOut:"Sign out",errors:{access_denied:"Access denied, please try again!",unknown:"Something went wrong, please try again!"},stats:{country:"Country",followers:"Followers",premium:"Premium"},details:{hasPremium:"Spotify premium user.",noPremium:"User doesn't have premium account!"}},camera:{title:"Camera",inUse:"Your camera is being used by another process, please close and try again.",type:{desktop:`Desktop
camera`,user:`Selfie
camera`,environment:`Environment
camera`,unknown:"Camera",loading:""},openingCam:"Connecting...",explainer:["To be able to scan the codes, we need access to your device's camera.","Please, give your browser permission to access the camera."],noSupport:["Your device likely doesn't have a camera, or your system doesn't allow your browser to access the camera.","Sadly, you cannot use the app."],noPermission:["Your browser doesn't have the correct permissions, possibly you denied the use of the camera.","To use this application, you need to "],selectedCamera:'You selected "{{label}}" to scan the codes.',switchBanner:"When using the app, you can change the camera at any time.",requestPermission:"Request permission",requestingPermission:"Requesting permission...",permissions:{title:"Reset browser permissions",permissionLink:"reset your browser permissions",deviceDetails:"Device details",explainer:"We couldn't find a page for your browser, please look in your settings to reset the browser permissions.",cta:["If you like, you can ","file a request"," to add your browser to our instructions."]}}};var ji=F("<br>");const Vi={common:{close:"Sluiten",offline:"U bent offline, controleer a.u.b. uw verbinding",refresh:"Pagina verniewen",share:"Deel Guessify",unhandledError:{title:"Er is iets mis gegaan.",details:"Foutgegevens",explainer:["Er heeft zich een niet afgehandelde fout voorgedaan, probeer a.u.b. opniew.","Als dit probleem aan blijft houden, verzoeken wij u vriendelijk een bug rapport in te schieten met de onderstaande gegevens.","Het sluiten van dit bericht zal de applicatie herstarten."]}},spotify:{title:"Spotify",explainer:[["Wilt u a.u.b met Spotify verbinden? ",ji(),"U moet ingelogd zijn bij Spotify om muziek in de browser te kunnen spelen."],"Spotify vereist een premuim account voor muziek in de browser."],signingIn:"Inloggen...",signIn:"Log in bij Spotify",signOut:"Uitloggen",errors:{access_denied:"Toegang geweigerd, probeer opnieuw!",unknown:"Er ging iets mis, probeer opnieuw!"},stats:{country:"Land",followers:"Volgers",premium:"Premium"},details:{hasPremium:"Spotify premium gebruiker.",noPremium:"Gebruiker heeft geen premium account!"}},camera:{title:"Video camera",inUse:"Uw camera wordt gebruikt door een ander process, sluit a.u.b. dit process en probeer opnieuw.",type:{desktop:`Desktop
camera`,user:`Selfie
camera`,environment:`Achterkant
camera`,unknown:"Camera",loading:""},openingCam:"Verbinden...",explainer:["Om de codes te kunnen scannen hebben wij toegang nodig tot uw camera.","Verleen uw browser a.u.b. toegang tot de camera."],noSupport:["Uw apparaat heeft mogelijk geen camera, of uw besturingssysteem staat het gebruik hiervan niet toe.","Helaas kunt u deze applicatie niet gebruiken."],noPermission:["Uw browser geeft geen toestemming tot het gebruik van de camera. Mogelijk heeft u de toestemming geweigerd.","Om gebruik te kunnen maken van de camera moet u "],selectedCamera:'U heeft "{{label}}" geselecteerd voor het scannen.',switchBanner:"U kunt dit later altijd nog veranderen.",requestPermission:"Vraag toestemming",requestingPermission:"Toestemming vragen...",permissions:{title:"Browser toestemming herstellen",deviceDetails:"Apparaat details",permissionLink:"uw browser toestemming herstellen",explainer:"Wij konden geen uitleg vinden voor jouw browser, probeer a.u.b. in uw instellingen te zoeken hoe u de camera toestemming kunt herstellen.",cta:["Wilt u a.u.b. ook ","een verzoek indienen"," om uw eigen browser toe te voegen aan onze instructies?"]}}},lt={en:Ui,nl:Vi},Yi=Object.getOwnPropertyNames(lt).sort((r,e)=>r.localeCompare(e,void 0,{sensitivity:"base"})),Vt=()=>localStorage.getItem("stored-locale"),Gn=r=>localStorage.setItem("stored-locale",r),Xi=r=>{const e=r&&Object.keys(lt).includes(r)?r:"en";return lt[e]},[tr,Gi]=j(Vt()??"en");function Hr(){const r=ai(),e=r.locale&&Object.keys(lt).includes(r.locale)?r.locale:void 0;Gi(e??Vt()??"en"),e&&Gn(e)}const se=()=>{try{Ce(Hr)}catch(e){console.error(console.trace(),e)}Ae(Hr,oi);const r=$(()=>lt[tr()],[tr]);return{locale:tr,locales:Yi,dictionary:r,template:zi}};class Z{api;constructor(e){this.api=e}async getRequest(e){return await this.api.makeRequest("GET",e)}async postRequest(e,t,n=void 0){return await this.api.makeRequest("POST",e,t,n)}async putRequest(e,t,n=void 0){return await this.api.makeRequest("PUT",e,t,n)}async deleteRequest(e,t){return await this.api.makeRequest("DELETE",e,t)}paramsFor(e){const t=new URLSearchParams;for(let n of Object.getOwnPropertyNames(e))(e[n]||e[n]===0||!e[n]&&typeof e[n]=="boolean")&&t.append(n,e[n].toString());return[...t].length>0?`?${t.toString()}`:""}}class Hi extends Z{async get(e,t){if(typeof e=="string"){const i=this.paramsFor({market:t});return await this.getRequest(`albums/${e}${i}`)}const n=this.paramsFor({ids:e,market:t});return(await this.getRequest(`albums${n}`)).albums}tracks(e,t,n,s){const i=this.paramsFor({market:t,limit:n,offset:s});return this.getRequest(`albums/${e}/tracks${i}`)}}class Ki extends Z{async get(e){if(typeof e=="string")return this.getRequest(`artists/${e}`);const t=this.paramsFor({ids:e});return(await this.getRequest(`artists${t}`)).artists}albums(e,t,n,s,i){const o=this.paramsFor({include_groups:t,market:n,limit:s,offset:i});return this.getRequest(`artists/${e}/albums${o}`)}topTracks(e,t){const n=this.paramsFor({market:t});return this.getRequest(`artists/${e}/top-tracks${n}`)}relatedArtists(e){return this.getRequest(`artists/${e}/related-artists`)}}class Qi extends Z{async get(e,t){if(typeof e=="string"){const i=this.paramsFor({market:t});return this.getRequest(`audiobooks/${e}${i}`)}const n=this.paramsFor({ids:e,market:t});return(await this.getRequest(`audiobooks${n}`)).audiobooks}getAudiobookChapters(e,t,n,s){const i=this.paramsFor({market:t,limit:n,offset:s});return this.getRequest(`audiobooks/${e}/chapters${i}`)}}class Ji extends Z{getCategories(e,t,n,s){const i=this.paramsFor({country:e,locale:t,limit:n,offset:s});return this.getRequest(`browse/categories${i}`)}getCategory(e,t,n){const s=this.paramsFor({country:t,locale:n});return this.getRequest(`browse/categories/${e}${s}`)}getNewReleases(e,t,n){const s=this.paramsFor({country:e,limit:t,offset:n});return this.getRequest(`browse/new-releases${s}`)}getFeaturedPlaylists(e,t,n,s,i){const o=this.paramsFor({country:e,locale:t,timestamp:n,limit:s,offset:i});return this.getRequest(`browse/featured-playlists${o}`)}getPlaylistsForCategory(e,t,n,s){const i=this.paramsFor({country:t,limit:n,offset:s});return this.getRequest(`browse/categories/${e}/playlists${i}`)}}class Zi extends Z{async get(e,t){if(typeof e=="string"){const i=this.paramsFor({market:t});return this.getRequest(`chapters/${e}${i}`)}const n=this.paramsFor({ids:e,market:t});return(await this.getRequest(`chapters${n}`)).chapters}}class eo extends Z{async get(e,t){if(typeof e=="string"){const i=this.paramsFor({market:t});return this.getRequest(`episodes/${e}${i}`)}const n=this.paramsFor({ids:e,market:t});return(await this.getRequest(`episodes${n}`)).episodes}}class to extends Z{get(e){const t=this.paramsFor(e);return this.getRequest(`recommendations${t}`)}genreSeeds(){return this.getRequest("recommendations/available-genre-seeds")}}class ro extends Z{getAvailableMarkets(){return this.getRequest("markets")}}class no extends Z{getPlaybackState(e,t){const n=this.paramsFor({market:e,additional_types:t});return this.getRequest(`me/player${n}`)}getAvailableDevices(){return this.getRequest("me/player/devices")}getCurrentlyPlayingTrack(e,t){const n=this.paramsFor({market:e,additional_types:t});return this.getRequest(`me/player/currently-playing${n}`)}getRecentlyPlayedTracks(e,t){const n={limit:e};t&&(t.type==="before"?n.before=t.timestamp:t.type==="after"&&(n.after=t.timestamp));const s=this.paramsFor(n);return this.getRequest(`me/player/recently-played${s}`)}getUsersQueue(){return this.getRequest("me/player/queue")}async transferPlayback(e,t){if(e.length>1)throw new Error("Although an array is accepted, only a single device_id is currently supported. Supplying more than one will return 400 Bad Request");await this.putRequest("me/player",{device_ids:e,play:t})}async startResumePlayback(e,t,n,s,i){const o=this.paramsFor({device_id:e});await this.putRequest(`me/player/play${o}`,{context_uri:t,uris:n,offset:s,positionMs:i})}async pausePlayback(e){const t=this.paramsFor({device_id:e});await this.putRequest(`me/player/pause${t}`)}async skipToNext(e){const t=this.paramsFor({device_id:e});await this.postRequest(`me/player/next${t}`)}async skipToPrevious(e){const t=this.paramsFor({device_id:e});await this.postRequest(`me/player/previous${t}`)}async seekToPosition(e,t){const n=this.paramsFor({position_ms:e,device_id:t});await this.putRequest(`me/player/seek${n}`)}async setRepeatMode(e,t){const n=this.paramsFor({state:e,device_id:t});await this.putRequest(`me/player/repeat${n}`)}async setPlaybackVolume(e,t){const n=this.paramsFor({volume_percent:e,device_id:t});await this.putRequest(`me/player/volume${n}`)}async togglePlaybackShuffle(e,t){const n=this.paramsFor({state:e,device_id:t});await this.putRequest(`me/player/shuffle${n}`)}async addItemToPlaybackQueue(e,t){const n=this.paramsFor({uri:e,device_id:t});await this.postRequest(`me/player/queue${n}`)}}class so extends Z{getPlaylist(e,t,n,s){const i=this.paramsFor({market:t,fields:n,additional_types:s?.join(",")});return this.getRequest(`playlists/${e}${i}`)}getPlaylistItems(e,t,n,s,i,o){const a=this.paramsFor({market:t,fields:n,limit:s,offset:i,additional_types:o?.join(",")});return this.getRequest(`playlists/${e}/tracks${a}`)}async changePlaylistDetails(e,t){await this.putRequest(`playlists/${e}`,t)}movePlaylistItems(e,t,n,s){return this.updatePlaylistItems(e,{range_start:t,range_length:n,insert_before:s})}updatePlaylistItems(e,t){return this.putRequest(`playlists/${e}/tracks`,t)}async addItemsToPlaylist(e,t,n){await this.postRequest(`playlists/${e}/tracks`,{position:n,uris:t})}async removeItemsFromPlaylist(e,t){await this.deleteRequest(`playlists/${e}/tracks`,t)}getUsersPlaylists(e,t,n){const s=this.paramsFor({limit:t,offset:n});return this.getRequest(`users/${e}/playlists${s}`)}createPlaylist(e,t){return this.postRequest(`users/${e}/playlists`,t)}getPlaylistCoverImage(e){return this.getRequest(`playlists/${e}/images`)}async addCustomPlaylistCoverImage(e,t){let n="";if(t instanceof Buffer)n=t.toString("base64");else if(t instanceof HTMLCanvasElement)n=t.toDataURL("image/jpeg").split(";base64,")[1];else if(t instanceof HTMLImageElement){const s=document.createElement("canvas");s.width=t.width,s.height=t.height;const i=s.getContext("2d");if(!i)throw new Error("Could not get canvas context");i.drawImage(t,0,0),n=s.toDataURL("image/jpeg").split(";base64,")[1]}else if(typeof t=="string")n=t;else throw new Error("ImageData must be a Buffer, HTMLImageElement, HTMLCanvasElement, or string containing a base64 encoded jpeg");await this.addCustomPlaylistCoverImageFromBase64String(e,n)}async addCustomPlaylistCoverImageFromBase64String(e,t){await this.putRequest(`playlists/${e}/images`,t,"image/jpeg")}}class io extends Z{async execute(e,t,n,s,i,o){const a=this.paramsFor({q:e,type:t,market:n,limit:s,offset:i,include_external:o});return await this.getRequest(`search${a}`)}}class oo extends Z{async get(e,t){if(typeof e=="string"){const i=this.paramsFor({market:t});return this.getRequest(`shows/${e}${i}`)}const n=this.paramsFor({ids:e,market:t});return(await this.getRequest(`shows${n}`)).shows}episodes(e,t,n,s){const i=this.paramsFor({market:t,limit:n,offset:s});return this.getRequest(`shows/${e}/episodes${i}`)}}class ao extends Z{async get(e,t){if(typeof e=="string"){const i=this.paramsFor({market:t});return this.getRequest(`tracks/${e}${i}`)}const n=this.paramsFor({ids:e,market:t});return(await this.getRequest(`tracks${n}`)).tracks}async audioFeatures(e){if(typeof e=="string")return this.getRequest(`audio-features/${e}`);const t=this.paramsFor({ids:e});return(await this.getRequest(`audio-features${t}`)).audio_features}audioAnalysis(e){return this.getRequest(`audio-analysis/${e}`)}}const Pr={access_token:"emptyAccessToken",token_type:"",expires_in:0,refresh_token:"",expires:-1};function et(r){return r===Pr}class co extends Z{profile(e){return this.getRequest(`users/${e}`)}}class lo extends Z{albums;audiobooks;episodes;playlists;shows;tracks;constructor(e){super(e),this.albums=new uo(e),this.audiobooks=new fo(e),this.episodes=new ho(e),this.playlists=new go(e),this.shows=new mo(e),this.tracks=new po(e)}profile(){return this.getRequest("me")}topItems(e,t,n,s){const i=this.paramsFor({time_range:t,limit:n,offset:s});return this.getRequest(`me/top/${e}${i}`)}followedArtists(e,t){const n=this.paramsFor({type:"artist",after:e,limit:t});return this.getRequest(`me/following${n}`)}async followArtistsOrUsers(e,t){const n=this.paramsFor({type:t});await this.putRequest(`me/following${n}`,{ids:e})}async unfollowArtistsOrUsers(e,t){const n=this.paramsFor({type:t});await this.deleteRequest(`me/following${n}`,{ids:e})}followsArtistsOrUsers(e,t){const n=this.paramsFor({ids:e,type:t});return this.getRequest(`me/following/contains${n}`)}}class uo extends Z{savedAlbums(e,t,n){const s=this.paramsFor({limit:e,offset:t,market:n});return this.getRequest(`me/albums${s}`)}async saveAlbums(e){await this.putRequest("me/albums",e)}async removeSavedAlbums(e){await this.deleteRequest("me/albums",e)}hasSavedAlbums(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/albums/contains${t}`)}}class fo extends Z{savedAudiobooks(e,t){const n=this.paramsFor({limit:e,offset:t});return this.getRequest(`me/audiobooks${n}`)}async saveAudiobooks(e){await this.putRequest("me/audiobooks",e)}async removeSavedAudiobooks(e){await this.deleteRequest("me/audiobooks",e)}hasSavedAudiobooks(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/audiobooks/contains${t}`)}}class ho extends Z{savedEpisodes(e,t,n){const s=this.paramsFor({market:e,limit:t,offset:n});return this.getRequest(`me/episodes${s}`)}async saveEpisodes(e){await this.putRequest("me/episodes",e)}async removeSavedEpisodes(e){await this.deleteRequest("me/episodes",e)}hasSavedEpisodes(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/episodes/contains${t}`)}}class go extends Z{playlists(e,t){const n=this.paramsFor({limit:e,offset:t});return this.getRequest(`me/playlists${n}`)}async follow(e){await this.putRequest(`playlists/${e}/followers`)}async unfollow(e){await this.deleteRequest(`playlists/${e}/followers`)}isFollowing(e,t){const n=this.paramsFor({ids:t});return this.getRequest(`playlists/${e}/followers/contains${n}`)}}class mo extends Z{savedShows(e,t){const n=this.paramsFor({limit:e,offset:t});return this.getRequest(`me/shows${n}`)}saveShows(e){const t=this.paramsFor({ids:e});return this.putRequest(`me/shows${t}`)}removeSavedShows(e,t){const n=this.paramsFor({ids:e,market:t});return this.deleteRequest(`me/shows${n}`)}hasSavedShow(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/shows/contains${t}`)}}class po extends Z{savedTracks(e,t,n){const s=this.paramsFor({limit:e,offset:t,market:n});return this.getRequest(`me/tracks${s}`)}async saveTracks(e){await this.putRequest("me/tracks",e)}async removeSavedTracks(e){await this.deleteRequest("me/tracks",e)}hasSavedTracks(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/tracks/contains${t}`)}}class vo{static get current(){return this.hasSubtleCrypto?window.crypto:this.tryLoadNodeWebCrypto()}static get hasSubtleCrypto(){return typeof window<"u"&&typeof window.crypto<"u"&&typeof window.crypto.subtle<"u"}static tryLoadNodeWebCrypto(){try{const{webcrypto:e}=require("crypto");return e}catch(e){throw e}}}class pe{static async refreshCachedAccessToken(e,t){const n=await pe.refreshToken(e,t.refresh_token);return pe.toCachable(n)}static toCachable(e){return e.expires&&e.expires===-1?e:{...e,expires:this.calculateExpiry(e)}}static calculateExpiry(e){return Date.now()+e.expires_in*1e3}static async refreshToken(e,t){const n=new URLSearchParams;n.append("client_id",e),n.append("grant_type","refresh_token"),n.append("refresh_token",t);const s=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n}),i=await s.text();if(!s.ok)throw new Error(`Failed to refresh token: ${s.statusText}, ${i}`);return JSON.parse(i)}static generateCodeVerifier(e){let t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let s=0;s<e;s++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}static async generateCodeChallenge(e){const t=new TextEncoder().encode(e),n=await vo.current.subtle.digest("SHA-256",t),s=[...new Uint8Array(n)];return(typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(String.fromCharCode.apply(null,s))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}}class nt{clientId;clientSecret;scopes;static cacheKey="spotify-sdk:ClientCredentialsStrategy:token";configuration=null;get cache(){return this.configuration.cachingStrategy}constructor(e,t,n=[]){this.clientId=e,this.clientSecret=t,this.scopes=n}setConfiguration(e){this.configuration=e}async getOrCreateAccessToken(){return await this.cache.getOrCreate(nt.cacheKey,async()=>{const t=await this.getTokenFromApi();return pe.toCachable(t)},async t=>{const n=await this.getTokenFromApi();return pe.toCachable(n)})}async getAccessToken(){return await this.cache.get(nt.cacheKey)}removeAccessToken(){this.cache.remove(nt.cacheKey)}async getTokenFromApi(){const e={grant_type:"client_credentials",scope:this.scopes.join(" ")},t=Object.keys(e).map(u=>u+"="+e[u]).join("&"),n=typeof Buffer<"u",s=`${this.clientId}:${this.clientSecret}`,i=n?Buffer.from(s).toString("base64"):btoa(s),o=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Basic ${i}`},body:t});if(o.status!==200)throw new Error("Failed to get access token.");return await o.json()}}class st{clientId;redirectUri;scopes;static cacheKey="spotify-sdk:ImplicitGrantStrategy:token";configuration=null;get cache(){return this.configuration.cachingStrategy}constructor(e,t,n){this.clientId=e,this.redirectUri=t,this.scopes=n}setConfiguration(e){this.configuration=e}async getOrCreateAccessToken(){return await this.cache.getOrCreate(st.cacheKey,async()=>{const t=await this.redirectOrVerifyToken();return pe.toCachable(t)},async t=>pe.refreshCachedAccessToken(this.clientId,t))}async getAccessToken(){return await this.cache.get(st.cacheKey)}removeAccessToken(){this.cache.remove(st.cacheKey)}async redirectOrVerifyToken(){const e=new URLSearchParams(window.location.hash.substring(1)),t=e.get("access_token");if(t)return Promise.resolve({access_token:t,token_type:e.get("token_type")??"",expires_in:parseInt(e.get("expires_in")??"0"),refresh_token:e.get("refresh_token")??"",expires:Number(e.get("expires"))||0});var s=(this.scopes??[]).join(" ");const i=new URLSearchParams;i.append("client_id",this.clientId),i.append("response_type","token"),i.append("redirect_uri",this.redirectUri),i.append("scope",s);const o="https://accounts.spotify.com/authorize?"+i.toString();return this.configuration.redirectionStrategy.redirect(o),Pr}}class je{clientId;redirectUri;scopes;static cacheKey="spotify-sdk:AuthorizationCodeWithPKCEStrategy:token";configuration=null;get cache(){return this.configuration.cachingStrategy}constructor(e,t,n){this.clientId=e,this.redirectUri=t,this.scopes=n}setConfiguration(e){this.configuration=e}async getOrCreateAccessToken(){return await this.cache.getOrCreate(je.cacheKey,async()=>{const t=await this.redirectOrVerifyToken();return pe.toCachable(t)},async t=>pe.refreshCachedAccessToken(this.clientId,t))}async getAccessToken(){return await this.cache.get(je.cacheKey)}removeAccessToken(){this.cache.remove(je.cacheKey)}async redirectOrVerifyToken(){const t=new URLSearchParams(window.location.search).get("code");if(t){const n=await this.verifyAndExchangeCode(t);return this.removeCodeFromUrl(),n}return this.redirectToSpotify(),Pr}async redirectToSpotify(){const e=pe.generateCodeVerifier(128),t=await pe.generateCodeChallenge(e),n={verifier:e,expiresOnAccess:!0};this.cache.setCacheItem("spotify-sdk:verifier",n);const s=await this.generateRedirectUrlForUser(this.scopes,t);await this.configuration.redirectionStrategy.redirect(s)}async verifyAndExchangeCode(e){const n=(await this.cache.get("spotify-sdk:verifier"))?.verifier;if(!n)throw new Error("No verifier found in cache - can't validate query string callback parameters.");return await this.configuration.redirectionStrategy.onReturnFromRedirect(),await this.exchangeCodeForToken(e,n)}removeCodeFromUrl(){const e=new URL(window.location.href);e.searchParams.delete("code");const t=e.search?e.href:e.href.replace("?","");window.history.replaceState({},document.title,t)}async generateRedirectUrlForUser(e,t){const n=e.join(" "),s=new URLSearchParams;return s.append("client_id",this.clientId),s.append("response_type","code"),s.append("redirect_uri",this.redirectUri),s.append("scope",n),s.append("code_challenge_method","S256"),s.append("code_challenge",t),`https://accounts.spotify.com/authorize?${s.toString()}`}async exchangeCodeForToken(e,t){const n=new URLSearchParams;n.append("client_id",this.clientId),n.append("grant_type","authorization_code"),n.append("code",e),n.append("redirect_uri",this.redirectUri),n.append("code_verifier",t);const s=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n}),i=await s.text();if(!s.ok)throw new Error(`Failed to exchange code for token: ${s.statusText}, ${i}`);return JSON.parse(i)}}class wo{async deserialize(e){const t=await e.text();return t.length>0?JSON.parse(t):null}}class yo{async validateResponse(e){switch(e.status){case 401:throw new Error("Bad or expired token. This can happen if the user revoked a token or the access token has expired. You should re-authenticate the user.");case 403:const t=await e.text();throw new Error(`Bad OAuth request (wrong consumer key, bad nonce, expired timestamp...). Unfortunately, re-authenticating the user won't help here. Body: ${t}`);case 429:throw new Error("The app has exceeded its rate limits.");default:if(!e.status.toString().startsWith("20")){const n=await e.text();throw new Error(`Unrecognised response code: ${e.status} - ${e.statusText}. Body: ${n}`)}}}}class bo{async handleErrors(e){return!1}}class So{async redirect(e){document.location=e.toString()}async onReturnFromRedirect(){}}class Hn{storage;updateFunctions;autoRenewInterval;autoRenewWindow;constructor(e,t=new Map,n=0,s=2*60*1e3){this.storage=e,this.updateFunctions=t,this.autoRenewInterval=n,this.autoRenewWindow=s,this.autoRenewInterval>0&&setInterval(()=>this.autoRenewRenewableItems(),this.autoRenewInterval)}async getOrCreate(e,t,n){n&&this.updateFunctions.set(e,n);const s=await this.get(e);if(s)return s;const i=await t();if(!i)throw new Error("Could not create cache item");return et(i)||this.setCacheItem(e,i),i}async get(e){let t=this.storage.get(e),n=t?JSON.parse(t):null;if(this.itemDueToExpire(n)&&this.updateFunctions.has(e)){const s=this.updateFunctions.get(e);await this.tryUpdateItem(e,n,s),t=this.storage.get(e),n=t?JSON.parse(t):null}return n?n.expires&&(n.expires===-1||n.expires<=Date.now())?(this.remove(e),null):(n.expiresOnAccess&&n.expiresOnAccess===!0&&this.remove(e),n):null}set(e,t,n){const s=Date.now()+n,i={...t,expires:s};this.setCacheItem(e,i)}setCacheItem(e,t){const n=JSON.stringify(t);this.storage.set(e,n)}remove(e){this.storage.remove(e)}itemDueToExpire(e){return!e||!e.expires?!1:e.expires-Date.now()<this.autoRenewWindow}async autoRenewRenewableItems(){this.updateFunctions.forEach(async(e,t)=>{const n=await this.get(t);n&&e&&this.itemDueToExpire(n)&&await this.tryUpdateItem(t,n,e)})}async tryUpdateItem(e,t,n){try{const s=await n(t);s&&this.setCacheItem(e,s)}catch(s){console.error(s)}}}class Mo extends Hn{constructor(){super(new xo)}}class xo{get(e){return localStorage.getItem(e)}set(e,t){localStorage.setItem(e,t)}remove(e){localStorage.removeItem(e)}}class ko extends Hn{constructor(){super(new _o)}}class _o{cache=new Map;get(e){return this.cache.get(e)??null}set(e,t){this.cache.set(e,t)}remove(e){this.cache.delete(e)}}class Ao{clientId;accessToken;refreshTokenAction;constructor(e,t,n){this.clientId=e,this.accessToken=t,this.refreshTokenAction=n||pe.refreshCachedAccessToken,this.accessToken.expires||(this.accessToken.expires=pe.calculateExpiry(this.accessToken))}setConfiguration(e){}async getOrCreateAccessToken(){if(this.accessToken.expires&&this.accessToken.expires<=Date.now()){const e=await this.refreshTokenAction(this.clientId,this.accessToken);this.accessToken=e}return this.accessToken}async getAccessToken(){return this.accessToken}removeAccessToken(){this.accessToken={access_token:"",token_type:"",expires_in:0,refresh_token:"",expires:0}}}class Fe{sdkConfig;static rootUrl="https://api.spotify.com/v1/";authenticationStrategy;albums;artists;audiobooks;browse;chapters;episodes;recommendations;markets;player;playlists;shows;tracks;users;search;currentUser;constructor(e,t){this.sdkConfig=this.initializeSdk(t),this.albums=new Hi(this),this.artists=new Ki(this),this.audiobooks=new Qi(this),this.browse=new Ji(this),this.chapters=new Zi(this),this.episodes=new eo(this),this.recommendations=new to(this),this.markets=new ro(this),this.player=new no(this),this.playlists=new so(this),this.shows=new oo(this),this.tracks=new ao(this),this.users=new co(this),this.currentUser=new lo(this);const n=new io(this);this.search=n.execute.bind(n),this.authenticationStrategy=e,this.authenticationStrategy.setConfiguration(this.sdkConfig)}async makeRequest(e,t,n=void 0,s=void 0){try{const i=await this.authenticationStrategy.getOrCreateAccessToken();if(et(i))return console.warn("No access token found, authenticating now."),null;const o=i?.access_token,a=Fe.rootUrl+t,u={method:e,headers:{Authorization:`Bearer ${o}`,"Content-Type":s??"application/json"},body:n?typeof n=="string"?n:JSON.stringify(n):void 0};this.sdkConfig.beforeRequest(a,u);const c=await this.sdkConfig.fetch(a,u);return this.sdkConfig.afterRequest(a,u,c),c.status===204?null:(await this.sdkConfig.responseValidator.validateResponse(c),this.sdkConfig.deserializer.deserialize(c))}catch(i){if(!await this.sdkConfig.errorHandler.handleErrors(i))throw i;return null}}initializeSdk(e){const t=typeof window<"u";return{...{fetch:(s,i)=>fetch(s,i),beforeRequest:(s,i)=>{},afterRequest:(s,i,o)=>{},deserializer:new wo,responseValidator:new yo,errorHandler:new bo,redirectionStrategy:new So,cachingStrategy:t?new Mo:new ko},...e}}switchAuthenticationStrategy(e){this.authenticationStrategy=e,this.authenticationStrategy.setConfiguration(this.sdkConfig),this.authenticationStrategy.getOrCreateAccessToken()}async authenticate(){const e=await this.authenticationStrategy.getOrCreateAccessToken();return{authenticated:e.expires>Date.now()&&!et(e),accessToken:e}}async getAccessToken(){return this.authenticationStrategy.getAccessToken()}logOut(){this.authenticationStrategy.removeAccessToken()}static withUserAuthorization(e,t,n=[],s){const i=new je(e,t,n);return new Fe(i,s)}static withClientCredentials(e,t,n=[],s){const i=new nt(e,t,n);return new Fe(i,s)}static withImplicitGrant(e,t,n=[],s){const i=new st(e,t,n);return new Fe(i,s)}static withAccessToken(e,t,n){const s=new Ao(e,t);return new Fe(s,n)}static async performUserAuthorization(e,t,n,s,i){const o=new je(e,t,n),u=await new Fe(o,i).authenticationStrategy.getOrCreateAccessToken();return et(u)||(typeof s=="string"?(console.log("Posting access token to postback URL."),await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})):await s(u)),{authenticated:u.expires>Date.now()&&!et(u),accessToken:u}}}const Co="fea5ab12dbbb422485f6621e2cf89e24",Po="https://marvin-brouwer.github.io",ut=()=>Fe.withUserAuthorization(Co,`${Po}/guessify/spotify-auth`,["streaming","user-read-private","user-read-email"]),Ro=()=>ut().logOut(),Eo=()=>{Ro(),Ue(void 0)};async function $o(){const r=`../${Vt()}/`,e=new URL(window.location.href);if(e.searchParams.has("code"))try{const t=await ut().authenticate();return Ue(t.authenticated?"success":"error.auth_failed"),r}catch(t){return Ue(`error.auth_failed.${t.message}`),r}return e.searchParams.has("error")?(Ue(`error.${e.searchParams.get("error")}`),r):(Ue("error.invalid_request"),r)}const[Fo,Ue]=j(),fr=He({api:Object.assign(ut(),{logOut:Eo}),status:Fo,handleAuthReturn:$o}),Yt=()=>Ke(fr),Oo=r=>(Ce(async()=>{if(await ke(()=>ut().getAccessToken()).then(t=>!!t)){const t=await ke(()=>ut().authenticate());Ue(t.authenticated?"success":"error.auth_failed")}}),C(fr.Provider,{get value(){return fr.defaultValue},get children(){return we(()=>r.children)()}}));var rr={exports:{}};/**
 * [js-crc]{@link https://github.com/emn178/js-crc}
 *
 * @namespace crc
 * @version 0.3.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2024
 * @license MIT
 */var Kr;function To(){return Kr||(Kr=1,function(r){(function(){var e="input is invalid type",t="finalize already called",n=typeof window=="object",s=n?window:{};s.JS_CRC_NO_WINDOW&&(n=!1);var i=!n&&typeof self=="object",o=!s.JS_CRC_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?s=_i:i&&(s=self);var a=!s.JS_CRC_NO_COMMON_JS&&!0&&r.exports,u=!s.JS_CRC_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",c="0123456789abcdef".split(""),l=["hex","array"],d=[{width:32,poly:79764919,init:4294967295,refin:!0,refout:!0,xorout:4294967295,name:"crc32"},{width:16,poly:32773,init:0,refin:!0,refout:!0,xorout:0,name:"crc16"}],f=Array.isArray;(s.JS_CRC_NO_NODE_JS||!f)&&(f=function(v){return Object.prototype.toString.call(v)==="[object Array]"});var h=ArrayBuffer.isView;u&&(s.JS_CRC_NO_ARRAY_BUFFER_IS_VIEW||!h)&&(h=function(v){return typeof v=="object"&&v.buffer&&v.buffer.constructor===ArrayBuffer});function m(v){var w=typeof v;if(w==="string")return[v,!0];if(w!=="object"||v===null)throw new Error(e);if(u&&v.constructor===ArrayBuffer)return[new Uint8Array(v),!1];if(!f(v)&&!h(v))throw new Error(e);return[v,!1]}function g(v,w){return function(M){return new R(w).update(M)[v]()}}function p(v){var w=8-(v.width%8||8),M=Math.ceil(v.width/8)%4||4,x=M<<3,A=1<<x-1>>>0,q=x-8,U=v.width%32||32,Q,V,te,ce=v.width>32;ce?(Q=v.init.slice(),V=v.poly.slice(),b(Q,w),b(V,w),te=[V.join("-"),q,A].join("_")):(Q=v.init<<w,V=v.poly<<w,te=[V,q,A].join("_"));var re={refin:v.refin,refout:v.refout,xorout:v.xorout,width:v.width,multiWords:ce,bitOffset:w,msb:A,msbOffset:q,maskBits:U,mask:2**U-1,crc:Q,poly:V,tableId:te},X=g("hex",re);X.create=function(){return new R(re)},X.update=function(Re){return X.create().update(Re)};for(var fe=0;fe<l.length;++fe){var xe=l[fe];X[xe]=g(xe,re)}return X}function b(v,w){if(w){for(var M=0;M<v.length-1;++M)v[M]=v[M]<<w|v[M+1]>>>32-w;v[M]=v[M]<<w}}function _(v,w){if(w){for(var M=v.length-1;M>0;--M)v[M]=v[M-1]<<32-w|v[M]>>>w;v[M]=v[M]>>>w}}function B(v,w){for(var M=0;M<v.length;++M)v[M]^=w[M]}var P={};function N(v,w,M,x){return P[v]||(P[v]=O(w,M,x)),P[v]}function O(v,w,M){var x=[],A=f(v);for(A||(v=[v]),k=0;k<256;++k){for(var q=[k<<w],U=1;U<v.length;++U)q[U]=0;for(var U=0;U<8;++U)if(q[0]&M){b(q,1);for(var Q=0;Q<v.length;++Q)q[Q]=q[Q]^v[Q]}else b(q,1);x[k]=A?q:q[0]}return x}function T(v,w){for(var M=0,x=0;v;++x)v&1&&(M|=1<<w-1-x),v=v>>>1;return M}for(var E=[],k=0;k<256;++k)E[k]=T(k,8);function R(v){this.options=v,this.refin=v.refin,this.multiWords=v.multiWords,this.bitOffset=v.bitOffset,this.msbOffset=v.msbOffset,this.maskBits=v.maskBits,this.mask=v.mask,this.table=N(v.tableId,v.poly,this.msbOffset,v.msb),this.multiWords?this.crc=v.crc.slice():this.crc=v.crc}R.prototype.update=function(v){if(this.finalized)throw new Error(t);var w=m(v);v=w[0];var M=w[1],x,A,q=v.length;if(M)for(A=0;A<q;++A)x=v.charCodeAt(A),x<128?this.updateByte(x):x<2048?(this.updateByte(192|x>>6),this.updateByte(128|x&63)):x<55296||x>=57344?(this.updateByte(224|x>>12),this.updateByte(128|x>>6&63),this.updateByte(128|x&63)):(x=65536+((x&1023)<<10|v.charCodeAt(++A)&1023),this.updateByte(240|x>>18),this.updateByte(128|x>>12&63),this.updateByte(128|x>>6&63),this.updateByte(128|x&63));else for(A=0;A<q;++A)this.updateByte(v[A]);return this},R.prototype.updateByte=function(v){var w=this.crc;if(this.refin&&(v=E[v]),this.multiWords){w[0]=w[0]^v<<this.msbOffset;var M=this.table[w[0]>>this.msbOffset&255];b(w,8),B(w,M)}else w=w^v<<this.msbOffset,w=w<<8^this.table[w>>this.msbOffset&255];this.crc=w},R.prototype.finalize=function(){if(!this.finalized)if(this.finalized=!0,this.multiWords){if(_(this.crc,this.bitOffset),this.crc[0]=this.crc[0]&this.mask,this.options.refout){b(this.crc,32-this.maskBits);for(var v=[],w=0;w<this.crc.length;++w)v[this.crc.length-w-1]=T(this.crc[w],32);this.crc=v}B(this.crc,this.options.xorout)}else this.crc=this.crc>>>this.bitOffset&this.mask,this.options.refout&&(this.crc=T(this.crc,this.options.width)),this.crc^=this.options.xorout},R.prototype.hex=function(){this.finalize();var v="",w=this.crc,M=this.options.width;this.multiWords&&(w=w[0],M=M%32||32);for(var x=(Math.ceil(M/4)<<2)-4;x>=0;x-=4)v+=c[w>>x&15];if(this.multiWords)for(var A=1;A<this.crc.length;++A)for(w=this.crc[A],x=28;x>=0;x-=4)v+=c[w>>x&15];return v},R.prototype.toString=R.prototype.hex,R.prototype.array=function(){this.finalize();var v=new Array(Math.ceil(this.options.width/8)),w=this.crc,M=this.options.width;this.multiWords&&(w=w[0],M=M%32||32);for(var x=0,A=(Math.ceil(M/8)<<3)-8;A>=0;A-=8)v[x++]=w>>A&255;if(this.multiWords)for(var q=1;q<this.crc.length;++q)for(w=this.crc[q],A=24;A>=0;A-=8)v[x++]=w>>A&255;return v};for(var L={},k=0;k<d.length;++k){var W=d[k];L[W.name]=p(W)}if(L.createModel=p,a)r.exports=L;else{for(k=0;k<d.length;++k){var W=d[k];s[W.name]=L[W.name]}s.createModel=p}})()}(rr)),rr.exports}var Bo=To();function Lo(r,e){return parseInt(r.slice(0,e).reverse().join(""),2)}function Qr(r,e){let t=r.slice(0,e).concat(new Array((8-e%8)%8).fill(0));return Array.from({length:t.length/8},(n,s)=>t[s*8]<<7|t[s*8+1]<<6|t[s*8+2]<<5|t[s*8+3]<<4|t[s*8+4]<<3|t[s*8+5]<<2|t[s*8+6]<<1|t[s*8+7])}const No=Bo.createModel({width:8,poly:7,init:0,refin:!0,refout:!0,xorout:255});function qo(r){const e=Qr(r,37),t=Qr(r.slice(37),8)[0];return parseInt(No(e),16)===t}function Io(r,e){return!r||r.length===0?[]:(e=e%r.length,r.slice(-e).concat(r.slice(0,-e)))}const Do=[[0,1,0,1,1,1,1,0,1,1,0,0,0,1,...Array(31).fill(0)],[1,0,1,0,1,0,1,0,0,0,1,1,1,...Array(32).fill(0)],[0,0,1,0,1,1,1,1,1,1,0,0,1,...Array(32).fill(0)]],zo=Array.from({length:45},(r,e)=>{const t=e%3;return Io(Do.at(t)??[],e+27)}),Wo=[[0,0,0],[0,0,1],[0,1,1],[0,1,0],[1,1,0],[1,1,1],[1,0,1],[1,0,0]];function Uo(r){if(r.length!==20){console.error("Invalid levels length; expected 20.");return}const e=r.flatMap(o=>Wo[o]??[]),t=e.map((o,a)=>e[43*a%60]),s=Array.from({length:60},(o,a)=>a).filter(o=>o%4!==2).map(o=>t[o]),i=Array.from({length:45},(o,a)=>s.reduce((u,c,l)=>u^c&zo[l][a],0));if(qo(i))return Lo(i,37)}function Kn(r){const e=[...r.slice(1,11),...r.slice(12,22)];return Uo(e)}const Bt=r=>r()==="success";function jo(){const{api:r,status:e}=Yt();if(!Bt(e)){Ve(!1);return}r.logOut(),Ve(!1)}async function Jr(r){const{api:e,status:t}=Yt();Bt(t)&&Ve(!1),Gn(r),Ve(!0);try{if((await ke(()=>e.authenticate())).accessToken.access_token==="emptyAccessToken")return;const s=await ke(()=>e.currentUser.profile());Vo(s)}catch(n){const s=n;throw s.restore=()=>{s.message.includes("Unfortunately, re-authenticating the user won't help here")&&localStorage.removeItem("spotify-sdk:AuthorizationCodeWithPKCEStrategy:token")},s}finally{Ve(!1)}}const[Qn,Ve]=j(!1),[Ct,Vo]=j(),Jn=He({logIn:()=>Promise.resolve(),logOut:()=>Promise.resolve(),getMediaReference:r=>Promise.resolve(void 0),isAuthenticating:Qn,isAuthenticated:()=>!1,isValid:()=>!1,profile:Ct,errorMessage:()=>{}}),Xe=()=>Ke(Jn),Yo=r=>{const{api:e,status:t}=Yt(),{dictionary:n,locale:s}=se();Ce(async()=>{await ke(()=>e.getAccessToken()).then(c=>!!c)&&(Ve(!0),await Jr(s()))});const i=()=>Bt(t)&&Ct()?.product==="premium",o=()=>{if(t()&&t()!=="success")return t()==="error.access_denied"?n().spotify.errors.access_denied:n().spotify.errors.unknown},a=async u=>{const c=await Kn(u);if(!c)return;const d={"X-Client-Id":"fea5ab12dbbb422485f6621e2cf89e24",Accept:"*/*","Content-Type":"application/json"},f="https://spclient.wg.spotify.com:443/scannable-id/id";try{return(await fetch(`${f}/${75845227563}?format=json`,{method:"GET",headers:{...d,Authorization:`Bearer ${(await e.getAccessToken())?.access_token}`},mode:"cors",credentials:"include"}).then(m=>m.json())).target}catch{return c.toString()}};return C(Jn.Provider,{get value(){return{isValid:$(i,[t,Ct]),isAuthenticated:$(()=>Bt(t),t),getMediaReference:a,errorMessage:o,isAuthenticating:Qn,logIn:()=>Jr(s()),logOut:jo,profile:Ct}},get children(){return we(()=>r.children)()}})},Xo="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20enable-background='new%200%200%2024%2024'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3cg%3e%3crect%20fill='none'%20height='24'%20width='24'/%3e%3c/g%3e%3cg%3e%3cpath%20d='M12%202C6.48%202%202%206.48%202%2012s4.48%2010%2010%2010%2010-4.48%2010-10S17.52%202%2012%202zm0%204c1.93%200%203.5%201.57%203.5%203.5S13.93%2013%2012%2013s-3.5-1.57-3.5-3.5S10.07%206%2012%206zm0%2014c-2.03%200-4.43-.82-6.14-2.88C7.55%2015.8%209.68%2015%2012%2015s4.45.8%206.14%202.12C16.43%2019.18%2014.03%2020%2012%2020z'/%3e%3c/g%3e%3c/svg%3e",Go="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20enable-background='new%200%200%2024%2024'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%231ed760'%3e%3cg%3e%3crect%20fill='none'%20height='24'%20width='24'/%3e%3c/g%3e%3cg%3e%3cpath%20d='M23,12l-2.44-2.79l0.34-3.69l-3.61-0.82L15.4,1.5L12,2.96L8.6,1.5L6.71,4.69L3.1,5.5L3.44,9.2L1,12l2.44,2.79l-0.34,3.7%20l3.61,0.82L8.6,22.5l3.4-1.47l3.4,1.46l1.89-3.19l3.61-0.82l-0.34-3.69L23,12z%20M10.09,16.72l-3.8-3.81l1.48-1.48l2.32,2.33%20l5.85-5.87l1.48,1.48L10.09,16.72z'/%3e%3c/g%3e%3c/svg%3e",Ho="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23d71e1e'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M1%2021h22L12%202%201%2021zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z'/%3e%3c/svg%3e",Zn="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M17%207l-1.41%201.41L18.17%2011H8v2h10.17l-2.58%202.58L17%2017l5-5zM4%205h8V3H4c-1.1%200-2%20.9-2%202v14c0%201.1.9%202%202%202h8v-2H4V5z'/%3e%3c/svg%3e",Ko="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20enable-background='new%200%200%2024%2024'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3cg%3e%3crect%20fill='none'%20height='24'%20width='24'/%3e%3c/g%3e%3cg%3e%3cpath%20d='M11,7L9.6,8.4l2.6,2.6H2v2h10.2l-2.6,2.6L11,17l5-5L11,7z%20M20,19h-8v2h8c1.1,0,2-0.9,2-2V5c0-1.1-0.9-2-2-2h-8v2h8V19z'/%3e%3c/g%3e%3c/svg%3e";var Qo=F("<img>"),Jo=F("<button class=app-button><span>");const Oe=({text:r,imageUrl:e,...t})=>(()=>{var n=Jo(),s=n.firstChild;return Us(n,t,!1),S(s,r),S(n,C(Ne,{when:e,get children(){var i=Qo();return ee(i,"src",e),i}}),null),n})();var Zo=F("<div class=spotify-card><h2>"),ea=F('<div class="spotify-login-card card"><div class=details><p></p><p></p></div><div class=controls>'),ta=F("<p class=error>"),ra=F("<img class=placeholder>"),na=F('<div class="spotify-profile-card card"><div class=thumbnail></div><p class=stats><b></b><i></i></p><p class=stats><b></b><i></i></p><p class=stats><b></b><i><img></i></p><div class=details><h3></h3></div><div class=controls>'),Zr=F("<p>"),sa=F("<p class=no-premium>");const ia=()=>{const r=Xe(),{hasMediaSupport:e}=Pe();if(!e())return null;const{dictionary:t}=se(),n=()=>!Xe().isAuthenticating()&&r.isAuthenticated()?C(aa,{}):C(oa,{});return(()=>{var s=Zo(),i=s.firstChild;return S(i,()=>t().spotify.title),S(s,n,null),s})()},oa=()=>{const r=Xe(),{dictionary:e}=se();return(()=>{var t=ea(),n=t.firstChild,s=n.firstChild,i=s.nextSibling,o=n.nextSibling;return S(s,()=>e().spotify.explainer[0]),S(i,()=>e().spotify.explainer[1]),S(n,(()=>{var a=$(()=>!!r.errorMessage());return()=>a()&&(()=>{var u=ta();return S(u,()=>r.errorMessage()),u})()})(),null),S(o,C(Oe,{get disabled(){return r.isAuthenticating()},get imageUrl(){return!r.isAuthenticating()&&Ko},get text(){return $(()=>!!r.isAuthenticating())()?e().spotify.signingIn:e().spotify.signIn},onClick:()=>{r.logIn()}})),t})()},aa=()=>{const r=Xe(),{dictionary:e}=se(),t=r.profile();if(!t)return null;const n=t.images?.find(a=>a.width===300)??void 0,[s,i]=j((()=>{var a=ra();return ee(a,"src",Xo),a})());Ae(()=>{if(!n||s().src===n.url)return;const a=s().cloneNode(!0);a.className="",a.addEventListener("load",()=>i(a),{once:!0}),a.src=n.url},n);const o=r.isValid();return(()=>{var a=na(),u=a.firstChild,c=u.nextSibling,l=c.firstChild,d=l.nextSibling,f=c.nextSibling,h=f.firstChild,m=h.nextSibling,g=f.nextSibling,p=g.firstChild,b=p.nextSibling,_=b.firstChild,B=g.nextSibling,P=B.firstChild,N=B.nextSibling;return S(u,s),S(l,()=>e().spotify.stats.country),S(d,()=>t.country),S(h,()=>e().spotify.stats.followers),S(m,()=>t.followers.total),S(p,()=>e().spotify.stats.premium),ee(_,"src",o?Go:Ho),S(P,()=>t.display_name),S(B,o?(()=>{var O=Zr();return S(O,()=>e().spotify.details.hasPremium),O})():[(()=>{var O=sa();return S(O,()=>e().spotify.details.noPremium),O})(),(()=>{var O=Zr();return S(O,()=>e().spotify.explainer[1]),O})()],null),S(N,C(Oe,{get text(){return e().spotify.signOut},imageUrl:Zn,onClick:O=>{O.currentTarget.disabled==!0,r.logOut()}})),a})()},nr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20enable-background='new%200%200%2024%2024'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3crect%20fill='none'%20height='24'%20width='24'/%3e%3cpath%20d='M3,4V1h2v3h3v2H5v3H3V6H0V4H3z%20M6,10V7h3V4h7l1.83,2H21c1.1,0,2,0.9,2,2v12c0,1.1-0.9,2-2,2H5c-1.1,0-2-0.9-2-2V10H6z%20M13,19c2.76,0,5-2.24,5-5s-2.24-5-5-5s-5,2.24-5,5S10.24,19,13,19z%20M9.8,14c0,1.77,1.43,3.2,3.2,3.2s3.2-1.43,3.2-3.2%20s-1.43-3.2-3.2-3.2S9.8,12.23,9.8,14z'/%3e%3c/svg%3e",ca="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M19%206.41L17.59%205%2012%2010.59%206.41%205%205%206.41%2010.59%2012%205%2017.59%206.41%2019%2012%2013.41%2017.59%2019%2019%2017.59%2013.41%2012z'/%3e%3c/svg%3e";var la=F("<dialog class=app-dialog><div><div class=details></div><div class=controls>");const en=(r,e)=>t=>{if(r.hidden)return;const n=r.getBoundingClientRect();n.top<=t.clientY&&t.clientY<=n.top+n.height&&n.left<=t.clientX&&t.clientX<=n.left+n.width||e()},Rr=()=>{const{dictionary:r}=se(),[e,t]=j(),[n,s]=j(!1),[i,o]=j(),a=()=>{if(!n())return!1;if(!i())return s(!1),e()?.close();i()()!==!1&&(s(!1),e()?.close())};return{Modal:c=>{const l=()=>n()?we(()=>c.children)():we(()=>{})();return t((()=>{var d=la(),f=d.firstChild,h=f.firstChild,m=h.nextSibling;return S(h,l),S(m,C(Oe,{get text(){return r().common.close},imageUrl:ca,onClick:a})),ge(g=>{var p=!n(),b=`modal ${c.class??""}`;return p!==g.e&&(d.inert=g.e=p),b!==g.t&&Ut(f,g.t=b),g},{e:void 0,t:void 0}),d})()),o(()=>c.beforeClose),Ce(()=>{e()?.addEventListener("click",en(e(),a))}),Se(()=>{a(),e()?.removeEventListener("click",en(e(),a))}),C(Ks,{get children(){return e()}})},showModal:()=>{if(n())return!1;e&&(s(!0),e()?.showModal())},closeModal:a}};var ua=F("<a href=#instructions>"),da=F("<a target=_blank>"),fa=F("<h2>"),tn=F("<p>"),ha=F("<p><a href=#todo target=_blank>"),ga=F("<details><summary></summary><pre>");const ma=ot(),pa=()=>{const{locale:r,dictionary:e}=se(),{Modal:t,showModal:n}=Rr(),s=$(()=>va(ma,r()),r),i=async a=>(a.preventDefault(),a.stopPropagation(),n(),!1),o=$(()=>s()?(()=>{var a=da();return S(a,()=>e().camera.permissions.permissionLink),ge(()=>ee(a,"href",s())),a})():(()=>{var a=ua();return a.$$click=i,S(a,()=>e().camera.permissions.permissionLink),a})(),s);return[$(o),C(t,{class:"reset-permission-modal",get children(){return[(()=>{var a=fa();return S(a,()=>e().camera.permissions.title),a})(),(()=>{var a=tn();return S(a,()=>e().camera.permissions.explainer),a})(),(()=>{var a=ha(),u=a.firstChild;return S(a,()=>e().camera.permissions.cta[0],u),S(u,()=>e().camera.permissions.cta[1]),S(a,()=>e().camera.permissions.cta[2],null),a})(),(()=>{var a=ga(),u=a.firstChild,c=u.nextSibling;return S(u,()=>e().camera.permissions.deviceDetails),S(c,()=>JSON.stringify(ot(),null,4)),a})(),tn()]}})]};function va(r,e){if(r.browser.name==="Chrome"){if(r.platform.type==="desktop")return`https://support.google.com/chrome/answer/114662?hl=${e}&co=GENIE.Platform%3DDesktop`;if(r.os.name==="Android")return`https://support.google.com/chrome/answer/114662?hl=${e}&co=GENIE.Platform%3DAndroid`;if(r.os.name==="IOS")return`https://support.google.com/chrome/answer/114662?hl=${e}&co=GENIE.Platform%3DiOS`}}Wt(["click"]);const wa="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='rgb(32,%2032,%2032)'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M9.4%2010.5l4.77-8.26C13.47%202.09%2012.75%202%2012%202c-2.4%200-4.6.85-6.32%202.25l3.66%206.35.06-.1zM21.54%209c-.92-2.92-3.15-5.26-6-6.34L11.88%209h9.66zm.26%201h-7.49l.29.5%204.76%208.25C21%2016.97%2022%2014.61%2022%2012c0-.69-.07-1.35-.2-2zM8.54%2012l-3.9-6.75C3.01%207.03%202%209.39%202%2012c0%20.69.07%201.35.2%202h7.49l-1.15-2zm-6.08%203c.92%202.92%203.15%205.26%206%206.34L12.12%2015H2.46zm11.27%200l-3.9%206.76c.7.15%201.42.24%202.17.24%202.4%200%204.6-.85%206.32-2.25l-3.66-6.35-.93%201.6z'/%3e%3c/svg%3e",ya="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='rgb(32,%2032,%2032)'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3ccircle%20cx='12'%20cy='12'%20r='3.2'/%3e%3cpath%20d='M9%202L7.17%204H4c-1.1%200-2%20.9-2%202v12c0%201.1.9%202%202%202h16c1.1%200%202-.9%202-2V6c0-1.1-.9-2-2-2h-3.17L15%202H9zm3%2015c-2.76%200-5-2.24-5-5s2.24-5%205-5%205%202.24%205%205-2.24%205-5%205z'/%3e%3c/svg%3e",ba="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='rgb(32,%2032,%2032)'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M12%2012c2.21%200%204-1.79%204-4s-1.79-4-4-4-4%201.79-4%204%201.79%204%204%204zm0%202c-2.67%200-8%201.34-8%204v2h16v-2c0-2.66-5.33-4-8-4z'/%3e%3c/svg%3e",Sa="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='rgb(32,%2032,%2032)'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M21%2019V5c0-1.1-.9-2-2-2H5c-1.1%200-2%20.9-2%202v14c0%201.1.9%202%202%202h14c1.1%200%202-.9%202-2zM8.5%2013.5l2.5%203.01L14.5%2012l4.5%206H5l3.5-4.5z'/%3e%3c/svg%3e";var Mt=F("<img>");const Ma=r=>$(()=>{const e=r()?.facing;return e==="loading"?null:e==="desktop"?(()=>{var t=Mt();return ee(t,"src",ya),t})():e==="user"?(()=>{var t=Mt();return ee(t,"src",ba),t})():e==="environment"?(()=>{var t=Mt();return ee(t,"src",Sa),t})():(()=>{var t=Mt();return ee(t,"src",wa),t})()},r),xa="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20enable-background='new%200%200%2024%2024'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3cg%3e%3cpath%20d='M0,0h24v24H0V0z'%20fill='none'/%3e%3c/g%3e%3cg%3e%3cg%3e%3cpath%20d='M16,7h-1l-1-1h-4L9,7H8C6.9,7,6,7.9,6,9v6c0,1.1,0.9,2,2,2h8c1.1,0,2-0.9,2-2V9C18,7.9,17.1,7,16,7z%20M12,14%20c-1.1,0-2-0.9-2-2c0-1.1,0.9-2,2-2s2,0.9,2,2C14,13.1,13.1,14,12,14z'/%3e%3cpath%20d='M8.57,0.51l4.48,4.48V2.04c4.72,0.47,8.48,4.23,8.95,8.95c0,0,2,0,2,0C23.34,3.02,15.49-1.59,8.57,0.51z'/%3e%3cpath%20d='M10.95,21.96C6.23,21.49,2.47,17.73,2,13.01c0,0-2,0-2,0c0.66,7.97,8.51,12.58,15.43,10.48l-4.48-4.48V21.96z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",ka="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M12%205.83L15.17%209l1.41-1.41L12%203%207.41%207.59%208.83%209%2012%205.83zm0%2012.34L8.83%2015l-1.41%201.41L12%2021l4.59-4.59L15.17%2015%2012%2018.17z'/%3e%3c/svg%3e";var _a=F("<option>"),Aa=F("<select>"),Ca=F("<img>"),Pa=F("<div class=app-dropdown><div><span>");const es=({disabled:r,value:e,onChange:t,options:n,selectImageUrl:s,disabledLabel:i})=>{const o=$(()=>n().find(({id:f})=>f===e())?.text,[n,e]),a=$(()=>n().map(({id:f,text:h})=>(()=>{var m=_a();return m.value=f,S(m,h),ge(()=>m.selected=f===e()),m})()),[e,n]),u=$(()=>r?r():!1,r),c=$(()=>n().length>1,n),l=$(()=>s!==!1&&c(),[c,s]),d=$(()=>{if(l())return s||ka},[l,s]);return(()=>{var f=Pa(),h=f.firstChild,m=h.firstChild;return S(f,C(Ne,{get when(){return c()},fallback:void 0,get children(){var g=Aa();return g.addEventListener("change",async p=>{if(p.target.value===e())return;const b=p.target.value,_=e();t(p,b,_)}),S(g,a),ge(()=>g.disabled=u()),g}}),h),S(m,(()=>{var g=$(()=>!!(u()&&i));return()=>g()?i:o()})()),S(h,C(Ne,{get when(){return l()},fallback:void 0,get children(){var g=Ca();return ge(()=>ee(g,"src",d())),g}}),null),ge(()=>Ut(h,u()?"fake-button disabled":"fake-button")),f})()};var Ra=F("<div class=camera-select-button>");const ts=({nameRef:r})=>{const{camera:e,devices:t,requestCamera:n,stopCameraStream:s}=Pe(),{dictionary:i}=se(),o=$(()=>t().map(a=>({id:a.deviceId,text:a.label})),[t,e]);return(()=>{var a=Ra();return S(a,C(es,{value:()=>e()?.id,options:o,disabled:()=>!e(),get disabledLabel(){return i().camera.openingCam},selectImageUrl:xa,onChange:async(u,c)=>{r?.(c),await s(),await n(c)}})),a})()};var Ea=F("<video loop>"),$a=F("<video>");const rs=r=>{const{cameraStream:e,camera:t}=Pe(),s=Ea();r.ref?.(s),Se(()=>{r.ref?.(void 0);const o=s;o.pause();const a=o.srcObject,u=a?.getTracks()??[];for(const c of u)a?.removeTrack(c);o.src="",o.srcObject=null}),Ae(()=>{const o=s,a=e();if(rn(a)){if(Fa(a,o.srcObject))return;o.removeAttribute("src"),o.srcObject=a,o.onloadedmetadata=()=>{o.play()},o.srcObject.addEventListener("removetrack",()=>{o.pause()},{once:!0}),o.srcObject.getTracks()[0].addEventListener("ended",()=>{o.pause()},{once:!0})}else{o.pause();const u=o.srcObject,c=u?.getTracks()??[];for(const l of c)u?.removeTrack(l);o.src="",o.srcObject=null}},[e,t]);const i=$(()=>rn(e())?s:$a());return $(i)},rn=r=>!r||!r.active||r.getTracks().length===0?!1:r.getTracks()[0].enabled,Fa=(r,e)=>r?.getTracks()[0]?.getSettings().deviceId==e?.getTracks()[0]?.getSettings().deviceId;var Oa=F("<div class=camera-card><h2>"),Ta=F('<div class="camera-request-card card no-controls"><div class=details><p></p><p> </p><p> '),Ba=F('<div class="camera-request-card card no-controls"><div class=details><p></p><p></p><p> <!>.'),La=F("<p class=error>"),Na=F('<div class="camera-request-card card"><div class=details><p></p><p></p></div><div class=controls>'),qa=F('<div class="camera-request-card card"><div class=video-overlay></div><div class=details><p></p><p><i></i></p></div><div class=controls>'),Ia=F("<div class=stats><span>");const Da=()=>{const r=Pe(),{dictionary:e}=se(),t=$(()=>r.hasMediaSupport()?r.canPrompt()||r.permission()==="pending"?C(Ua,{}):r.hasPermission()?C(ja,{}):C(Wa,{}):C(za,{}),[r.hasMediaSupport,r.canPrompt,r.hasPermission]);return(()=>{var n=Oa(),s=n.firstChild;return S(s,()=>e().camera.title),S(n,t,null),n})()},za=()=>{const{dictionary:r}=se();return(()=>{var e=Ta(),t=e.firstChild,n=t.firstChild,s=n.nextSibling,i=s.firstChild,o=s.nextSibling,a=o.firstChild;return S(n,()=>r().camera.explainer[0]),S(s,()=>r().camera.noSupport[0],i),S(o,()=>r().camera.noSupport[1],a),e})()},Wa=()=>{const{dictionary:r}=se();return(()=>{var e=Ba(),t=e.firstChild,n=t.firstChild,s=n.nextSibling,i=s.nextSibling,o=i.firstChild,a=o.nextSibling;return a.nextSibling,S(n,()=>r().camera.explainer[0]),S(s,()=>r().camera.noPermission[0]),S(i,()=>r().camera.noPermission[1],o),S(i,C(pa,{}),a),e})()},Ua=()=>{const r=Pe(),{dictionary:e}=se(),t=$(()=>r.permission()==="pending"?C(Oe,{disabled:!0,get text(){return e().camera.requestingPermission},imageUrl:nr}):r.permission()==="error:inuse"?C(Oe,{get text(){return e().common.refresh},imageUrl:nr,onClick:n=>{n.target.disabled=!0,window.location.reload()}}):C(Oe,{get disabled(){return!r.canPrompt()},get text(){return e().camera.requestPermission},imageUrl:nr,onClick:()=>{r.requestPermission()}}),[r.canPrompt,r.permission]);return(()=>{var n=Na(),s=n.firstChild,i=s.firstChild,o=i.nextSibling,a=s.nextSibling;return S(i,()=>e().camera.explainer[0]),S(o,()=>e().camera.explainer[1]),S(s,C(Ne,{get when(){return r.permission()==="error:inuse"},get children(){var u=La();return S(u,()=>e().camera.inUse),u}}),null),S(a,t),n})()},ja=()=>{const{camera:r}=Pe(),{dictionary:e,template:t}=se(),n=Ma(r);return(()=>{var s=qa(),i=s.firstChild,o=i.nextSibling,a=o.firstChild,u=a.nextSibling,c=u.firstChild,l=o.nextSibling;return S(s,C(rs,{}),i),S(i,(()=>{var d=$(()=>!!r());return()=>d()&&(()=>{var f=Ia(),h=f.firstChild;return S(f,n,h),S(h,()=>e().camera.type[r()?.facing??"unknown"]),f})()})()),S(a,()=>t(e().camera.selectedCamera,{label:r()?.label??"..."})),S(c,()=>e().camera.switchBanner),S(l,C(ts,{})),s})()},dt="/guessify/assets/guessify-logo-DT33HoF3.svg",[Lt,nn]=j(window.navigator.onLine?"online":"offline"),Va=()=>Lt()!=="offline",hr=He({status:Lt,online:Va}),Ya=()=>Ke(hr),Xa=r=>{const e=()=>nn("online"),t=()=>nn("offline");return Ce(()=>{window.addEventListener("online",e),window.addEventListener("offline",t)}),Se(()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}),C(hr.Provider,{get value(){return{...hr.defaultValue,online:$(()=>Lt()!=="offline",Lt)}},get children(){return we(()=>r.children)()}})};var Ga=F("<div class=dependency-gate><h1 class=logo><img> Guessify</h1><p>"),Ha=F("<div class=dependency-gate><h1 class=logo><img> Guessify");const Ka=r=>{const e=Xe(),t=Pe(),{online:n}=Ya(),{dictionary:s}=se(),i=we(()=>r.children);if(!n())return(()=>{var u=Ga(),c=u.firstChild,l=c.firstChild,d=c.nextSibling;return ee(l,"src",dt),S(d,()=>s().common.offline),u})();const o=$(()=>e.isValid()&&t.hasPermission(),[e.isValid,t.hasPermission,t.permission]),a=(()=>{var u=Ha(),c=u.firstChild,l=c.firstChild;return ee(l,"src",dt),S(u,C(ia,{}),null),S(u,C(Da,{}),null),u})();return C(Ne,{get when(){return o()},get children(){return i()},fallback:a})},D={canvasContextOptions:{willReadFrequently:!0,desynchronized:!0},clearBeforeDraw:!0,getCanvasContext(r,e=!0){return r.getContext("2d",{...this.canvasContextOptions,alpha:e})},showScaleCanvas:!1,showGrayscaleImage:!1,showOrientationLines:!1,showEllipsoid:!0,showAngles:!1,showBoundary:!0,sampleRate:20,blurAmount:1,debugEnabled(){return this.showScaleCanvas||this.showGrayscaleImage||this.showOrientationLines||this.showEllipsoid}};D.debugEnabled();const Er=r=>new Promise(e=>{requestAnimationFrame(()=>{e(r())})});function Qa(r,e){const t=r.getBoundingClientRect(),n=e.getSettings();let{width:s,height:i,aspectRatio:o}=n;s||(s=i*o),i||(i=s*o);const a=ot().platform.type==="desktop"?s:Math.min(i,s),u=ot().platform.type==="desktop"?i:Math.max(i,s),c=Math.max(t.width/a,t.height/u),l=a*c,d=u*c;var f=(t.width-a*c)/2,h=(t.height-u*c)/2;return{boxWidth:l,boxHeight:d,frameWidth:a,frameHeight:u,offsetX:f,offsetY:h}}function Ja(r,e){const t=Qa(r,e),{boxWidth:n,boxHeight:s,frameWidth:i,frameHeight:o,offsetX:a,offsetY:u}=t;if(!(n===0||Number.isNaN(n)))return Er(()=>{const c=new OffscreenCanvas(n,s);return D.getCanvasContext(c).drawImage(r,0,0,i,o,a,u,n,s),c})}function sn(r,e,t){return Er(()=>{const n=new OffscreenCanvas(r.width*2,r.height*2);return D.getCanvasContext(n).filter=`grayscale() ${t?"invert(100%)":""} contrast(4.5)`,D.getCanvasContext(n).drawImage(e,r.x,r.y,r.width,r.height,0,0,n.width,n.height),n})}function on(r){return Er(()=>{const e=new OffscreenCanvas(r.width,r.height);return D.getCanvasContext(e).filter=`blur(${D.blurAmount}px)`,D.getCanvasContext(e).drawImage(r,0,0,r.width,r.height,0,0,e.width,e.height),e})}const K={notEdge:0,primaryEdge:1,secondaryEdge:2,compoundEdge:3};function Za(r,e,t,n,s,i){const o=an(r,e,t)?1:0,a=an(n,s,i)?2:0;return o+a}function an(r,e,t){return!(r>180||r<20||e>180||e<20||t>180||t<20)}function ec(r,e,t){const n=Math.floor(e),s=Math.floor(t),i=4,o=r.width*4,a=n*i,u=s*o,c=a+u,[l,d,f,h]=r.data.slice(c,c+4);return{r:l,g:d,b:f,a:h,x:n,y:s,abs:c,...{}}}function sr(r,e,t,n,s){const i=Math.floor(n),o=Math.floor(s),a=4,u=r.width*4,c=i*a,l=o*u,d=c+l,[f,h,m,g]=r.data.slice(d,d+4),[p,b,_]=e.data.slice(d,d+4),[B,P,N]=t.data.slice(d,d+4),O=Za(p,b,_,B,P,N);return{r:f,g:h,b:m,a:g,x:i,y:o,abs:d,edgeScore:O,...{}}}function*tc(r){for(let e=0;e<r.width;e++){const t=r.column(e);for(let n=0;n<r.height;n++)yield t.pixel(n)}}function*rc(r){for(let e=0;e<r.height;e++)yield r.row(e)}function*nc(r,e){for(let t=0;t<e.width;t++)yield e.pixel(t,r)}function sc(r,e,t){return ic(D.getCanvasContext(r).getImageData(0,0,r.width,r.height),D.getCanvasContext(e).getImageData(0,0,e.width,e.height),D.getCanvasContext(t).getImageData(0,0,t.width,t.height))}function ic(r,e,t){if(Number.isNaN(r.width)||r.width===0)return;const n={};return{width:r.width,height:r.height,size:r.data.length,pixel(s,i){return sr(r,e,t,s,i)},row(s){const i=Math.min(s,r.height),o=nc(s,this);return{y:s,pixel:a=>sr(r,e,t,a,i),[Symbol.iterator](){return o}}},rows(){return rc(this)},column(s){const i=Math.min(s,r.width);return{pixel:o=>sr(r,e,t,i,o)}},[Symbol.iterator](){return tc(this)},toArray(){return Array.from(this)},...n}}const he={NS:1,EW:2,NE:3,SE:4,NW:5,SW:6};function oc(r){const e=D.blurAmount*4,t=Math.ceil(r.width/9),n=new Array;let s=0,i=0,o=0,a=0;for(let u=t+e;u<r.width/2;u++)for(let c=e;c<r.height-e;c++){if(r.pixel(u,c).edgeScore!==K.compoundEdge)continue;const d=b=>r.pixel(u-b,c),f=b=>r.pixel(u+b,c),h=b=>r.pixel(u-b,c-b),m=b=>r.pixel(u+b,c-b),g=b=>r.pixel(u-b,c+b),p=b=>r.pixel(u+b,c+b);if(p(3).edgeScore!==K.notEdge&&p(6).edgeScore!==K.notEdge&&g(3).edgeScore===K.notEdge&&g(3).r===255&&m(3).edgeScore===K.notEdge&&m(3).r===0&&m(6).r===0&&f(6).edgeScore===K.notEdge&&f(6).r===0){o++,n.push({x:u,y:c,edgeDirection:he.NE});continue}if(h(3).edgeScore!==K.notEdge&&h(6).edgeScore!==K.notEdge&&m(3).r===255&&m(3).edgeScore===K.notEdge&&g(3).edgeScore===K.notEdge&&g(3).r===0&&g(6).r===0&&d(6).edgeScore===K.notEdge&&d(6).r===0){i++,n.push({x:u,y:c,edgeDirection:he.SW});continue}if(g(3).edgeScore!==K.notEdge&&g(6).edgeScore!==K.notEdge&&h(3).r===255&&h(3).edgeScore===K.notEdge&&p(3).edgeScore===K.notEdge&&p(3).r===0&&f(6).edgeScore===K.notEdge&&f(6).r===0){a++,n.push({x:u,y:c,edgeDirection:he.SE});continue}if(m(3).edgeScore!==K.notEdge&&m(6).edgeScore!==K.notEdge&&p(3).r===255&&p(3).edgeScore===K.notEdge&&h(3).edgeScore===K.notEdge&&h(3).r===0&&h(6).r===0&&d(6).edgeScore===K.notEdge&&d(6).r===0){s++,n.push({x:u,y:c,edgeDirection:he.NW});continue}}if(!(a<1)&&!(i<1)&&!(o<1)&&!(s<1)&&!(n.length>=r.width/2))return n}function ac(r,e){if(!r)return;let t=0,n=0,s=0,i=0,o=0,a=0,u=0,c=0,l=0,d=0,f=0,h=0,m=0,g=0,p=0,b=1/0,_=1/0,B=0,P=0,N=1/0,O=1/0,T=0,E=1/0,k=0,R=1/0,L=0,W=1/0,v=0,w=1/0,M=0,x=0,A=0;for(let ye=0;ye<r.length;ye++){const I=r[ye];I&&(I.edgeDirection===he.SE&&(p=Math.max(p,I.x),b=Math.min(b,I.x),_=Math.min(_,I.y),B=Math.max(B,I.y),l+=I.x,d+=I.y,f++),I.edgeDirection===he.SW&&(E=Math.max(E,I.x),k=Math.min(k,I.x),R=Math.min(R,I.y),L=Math.max(L,I.y),s+=I.x,i+=I.y,o++),I.edgeDirection===he.NW&&(W=Math.min(W,I.x),v=Math.max(v,I.x),w=Math.min(w,I.y),M=Math.max(M,I.y),a+=I.x,u+=I.y,c++),I.edgeDirection===he.NE&&(P=Math.min(P,I.x),N=Math.max(N,I.x),O=Math.min(O,I.y),T=Math.max(T,I.y),h+=I.x,m+=I.y,g++),t+=I.x,n+=I.y)}const q=1/r.length*t,U=1/r.length*n,Q=1/f*l,V=1/o*s,te=1/c*a,ce=1/g*h,re=1/f*d,X=1/o*i,fe=1/c*u,xe=1/g*m,Re=(Q+V+ce+te)/4,pt=(re+X+xe+fe)/4;if(Number.isNaN(q)||Number.isNaN(U)||q===1/0||U===1/0||q===0||U===0)return;for(let ye=0;ye<r.length;ye++){const I=r[ye];I&&(x=Math.max(x,Math.abs(I.x-Re)),A=Math.max(A,Math.abs(I.y-pt)))}if(A=Math.max(ce-te,Q-V)/Math.SQRT2,x=Math.max(re-xe,X-fe)/Math.SQRT2,Number.isNaN(x)||Number.isNaN(A)||x===1/0||A===1/0||x<=1||A<=1||A>e/4||U+A>e-3||U-A<3||q-x<3)return;const Qe=Math.max(x,A),Je=Math.min(x,A),vt=(Qe+Je)/2;return{ellipsoidX:q,ellipsoidY:U,radiusA:x,radiusB:A,bigRadius:Qe,smallRadius:Je,averageRadius:vt,averageX:Re,averageY:pt,xSouthEast:Q,xSouthWest:V,xNorthWest:te,xNorthEast:ce,ySouthEast:re,ySouthWest:X,yNorthWest:fe,yNorthEast:xe}}function cc(r,e){const t=D.getCanvasContext(r);if(t.clearRect(0,0,r.width,r.height),!e)return r;for(const n of e)if(n){if(t.strokeStyle="rgb(30, 0, 255)",t.lineWidth=3,n.edgeDirection===he.NS){t.strokeStyle="red",t.beginPath(),t.moveTo(n.x-2,n.y),t.lineTo(n.x+2,n.y),t.stroke();continue}if(n.edgeDirection===he.EW){t.strokeStyle="purple",t.beginPath(),t.moveTo(n.x,n.y-2),t.lineTo(n.x,n.y+2),t.stroke();continue}if(n.edgeDirection===he.NE){t.lineWidth=1,t.beginPath(),t.moveTo(n.x-2,n.y+2),t.lineTo(n.x+2,n.y-2),t.stroke(),t.lineWidth=2,t.beginPath(),t.moveTo(n.x-1,n.y-3),t.lineTo(n.x+3,n.y+1),t.stroke();continue}if(n.edgeDirection===he.SW){t.lineWidth=1,t.beginPath(),t.moveTo(n.x-2,n.y+2),t.lineTo(n.x+2,n.y-2),t.stroke(),t.lineWidth=2,t.beginPath(),t.moveTo(n.x+1,n.y+3),t.lineTo(n.x-3,n.y-1),t.stroke();continue}if(n.edgeDirection===he.SE){t.lineWidth=1,t.beginPath(),t.moveTo(n.x+2,n.y+2),t.lineTo(n.x-2,n.y-2),t.stroke(),t.lineWidth=2,t.beginPath(),t.moveTo(n.x-1,n.y+3),t.lineTo(n.x+3,n.y-1),t.stroke();continue}if(n.edgeDirection===he.NW){t.lineWidth=1,t.beginPath(),t.moveTo(n.x+2,n.y+2),t.lineTo(n.x-2,n.y-2),t.stroke(),t.lineWidth=2,t.beginPath(),t.moveTo(n.x+1,n.y-3),t.lineTo(n.x-3,n.y+1),t.stroke();continue}}return r}function lc(r){const e=new Uint8ClampedArray(r.size);for(let t of r)t={...t,...uc(t)},e[t.abs+0]=t.r,e[t.abs+1]=t.g,e[t.abs+2]=t.b,e[t.abs+3]=t.a;return e}const uc=({edgeScore:r})=>r===K.primaryEdge?{r:0,g:128,b:100,a:50}:r===K.secondaryEdge?{r:128,g:255,b:0,a:50}:r===K.compoundEdge?{r:0,g:255,b:0,a:255}:{r:0,g:0,b:0,a:0};function dc(r,e){const t=D.getCanvasContext(r);return t.clearRect(0,0,r.width,r.height),e&&(hc(t,e),fc(t,e)),r}function fc(r,e){r.fillStyle="yellow",r.strokeStyle="yellow",r.fillRect(e.averageX-2,e.averageY-2,4,4),r.lineWidth=3,r.beginPath(),r.ellipse(e.averageX,e.averageY,e.radiusA-1,e.radiusB-1,-45,0,180),r.stroke()}function hc(r,e){r.fillStyle="rgb(255, 149, 0)",r.lineWidth=1,r.strokeStyle="rgba(255, 149, 0, 0.8)",r.fillRect(e.xNorthEast,e.yNorthEast,2,2),r.fillRect(e.xSouthWest-2,e.ySouthWest-2,2,2),r.beginPath(),r.moveTo(e.xNorthEast,e.yNorthEast),r.lineTo(e.xSouthWest,e.ySouthWest),r.stroke(),r.fillRect(e.xNorthWest,e.yNorthWest,2,2),r.fillRect(e.xSouthEast-2,e.ySouthEast-2,2,2),r.beginPath(),r.moveTo(e.xNorthWest,e.yNorthWest),r.lineTo(e.xSouthEast,e.ySouthEast),r.stroke()}var cn={},gc=function(r,e,t,n,s){var i=new Worker(cn[e]||(cn[e]=URL.createObjectURL(new Blob([r+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return i.onmessage=function(o){var a=o.data,u=a.$e$;if(u){var c=new Error(u[0]);c.code=u[1],c.stack=u[2],s(c,null)}else s(null,a)},i.postMessage(t,n),i},ae=Uint8Array,me=Uint16Array,Xt=Int32Array,Gt=new ae([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ht=new ae([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),gr=new ae([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ns=function(r,e){for(var t=new me(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var s=new Xt(t[30]),n=1;n<30;++n)for(var i=t[n];i<t[n+1];++i)s[i]=i-t[n]<<5|n;return{b:t,r:s}},ss=ns(Gt,2),mc=ss.b,Nt=ss.r;mc[28]=258,Nt[258]=28;var pc=ns(Ht,0),mr=pc.r,qt=new me(32768);for(var H=0;H<32768;++H){var Ee=(H&43690)>>1|(H&21845)<<1;Ee=(Ee&52428)>>2|(Ee&13107)<<2,Ee=(Ee&61680)>>4|(Ee&3855)<<4,qt[H]=((Ee&65280)>>8|(Ee&255)<<8)>>1}var Ye=function(r,e,t){for(var n=r.length,s=0,i=new me(e);s<n;++s)r[s]&&++i[r[s]-1];var o=new me(e);for(s=1;s<e;++s)o[s]=o[s-1]+i[s-1]<<1;var a;if(t){a=new me(1<<e);var u=15-e;for(s=0;s<n;++s)if(r[s])for(var c=s<<4|r[s],l=e-r[s],d=o[r[s]-1]++<<l,f=d|(1<<l)-1;d<=f;++d)a[qt[d]>>u]=c}else for(a=new me(n),s=0;s<n;++s)r[s]&&(a[s]=qt[o[r[s]-1]++]>>15-r[s]);return a},Te=new ae(288);for(var H=0;H<144;++H)Te[H]=8;for(var H=144;H<256;++H)Te[H]=9;for(var H=256;H<280;++H)Te[H]=7;for(var H=280;H<288;++H)Te[H]=8;var ft=new ae(32);for(var H=0;H<32;++H)ft[H]=5;var is=Ye(Te,9,0),os=Ye(ft,5,0),$r=function(r){return(r+7)/8|0},Fr=function(r,e,t){return(e==null||e<0)&&(e=0),(t==null||t>r.length)&&(t=r.length),new ae(r.subarray(e,t))},vc=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ge=function(r,e,t){var n=new Error(e||vc[r]);if(n.code=r,Error.captureStackTrace&&Error.captureStackTrace(n,Ge),!t)throw n;return n},Me=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8},Ie=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8,r[n+2]|=t>>16},Pt=function(r,e){for(var t=[],n=0;n<r.length;++n)r[n]&&t.push({s:n,f:r[n]});var s=t.length,i=t.slice();if(!s)return{t:Tr,l:0};if(s==1){var o=new ae(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(N,O){return N.f-O.f}),t.push({s:-1,f:25001});var a=t[0],u=t[1],c=0,l=1,d=2;for(t[0]={s:-1,f:a.f+u.f,l:a,r:u};l!=s-1;)a=t[t[c].f<t[d].f?c++:d++],u=t[c!=l&&t[c].f<t[d].f?c++:d++],t[l++]={s:-1,f:a.f+u.f,l:a,r:u};for(var f=i[0].s,n=1;n<s;++n)i[n].s>f&&(f=i[n].s);var h=new me(f+1),m=It(t[l-1],h,0);if(m>e){var n=0,g=0,p=m-e,b=1<<p;for(i.sort(function(O,T){return h[T.s]-h[O.s]||O.f-T.f});n<s;++n){var _=i[n].s;if(h[_]>e)g+=b-(1<<m-h[_]),h[_]=e;else break}for(g>>=p;g>0;){var B=i[n].s;h[B]<e?g-=1<<e-h[B]++-1:++n}for(;n>=0&&g;--n){var P=i[n].s;h[P]==e&&(--h[P],++g)}m=e}return{t:new ae(h),l:m}},It=function(r,e,t){return r.s==-1?Math.max(It(r.l,e,t+1),It(r.r,e,t+1)):e[r.s]=t},pr=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new me(++e),n=0,s=r[0],i=1,o=function(u){t[n++]=u},a=1;a<=e;++a)if(r[a]==s&&a!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=r[a]}return{c:t.subarray(0,n),n:e}},De=function(r,e){for(var t=0,n=0;n<e.length;++n)t+=r[n]*e[n];return t},Or=function(r,e,t){var n=t.length,s=$r(e+2);r[s]=n&255,r[s+1]=n>>8,r[s+2]=r[s]^255,r[s+3]=r[s+1]^255;for(var i=0;i<n;++i)r[s+i+4]=t[i];return(s+4+n)*8},vr=function(r,e,t,n,s,i,o,a,u,c,l){Me(e,l++,t),++s[256];for(var d=Pt(s,15),f=d.t,h=d.l,m=Pt(i,15),g=m.t,p=m.l,b=pr(f),_=b.c,B=b.n,P=pr(g),N=P.c,O=P.n,T=new me(19),E=0;E<_.length;++E)++T[_[E]&31];for(var E=0;E<N.length;++E)++T[N[E]&31];for(var k=Pt(T,7),R=k.t,L=k.l,W=19;W>4&&!R[gr[W-1]];--W);var v=c+5<<3,w=De(s,Te)+De(i,ft)+o,M=De(s,f)+De(i,g)+o+14+3*W+De(T,R)+2*T[16]+3*T[17]+7*T[18];if(u>=0&&v<=w&&v<=M)return Or(e,l,r.subarray(u,u+c));var x,A,q,U;if(Me(e,l,1+(M<w)),l+=2,M<w){x=Ye(f,h,0),A=f,q=Ye(g,p,0),U=g;var Q=Ye(R,L,0);Me(e,l,B-257),Me(e,l+5,O-1),Me(e,l+10,W-4),l+=14;for(var E=0;E<W;++E)Me(e,l+3*E,R[gr[E]]);l+=3*W;for(var V=[_,N],te=0;te<2;++te)for(var ce=V[te],E=0;E<ce.length;++E){var re=ce[E]&31;Me(e,l,Q[re]),l+=R[re],re>15&&(Me(e,l,ce[E]>>5&127),l+=ce[E]>>12)}}else x=is,A=Te,q=os,U=ft;for(var E=0;E<a;++E){var X=n[E];if(X>255){var re=X>>18&31;Ie(e,l,x[re+257]),l+=A[re+257],re>7&&(Me(e,l,X>>23&31),l+=Gt[re]);var fe=X&31;Ie(e,l,q[fe]),l+=U[fe],fe>3&&(Ie(e,l,X>>5&8191),l+=Ht[fe])}else Ie(e,l,x[X]),l+=A[X]}return Ie(e,l,x[256]),l+A[256]},as=new Xt([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Tr=new ae(0),cs=function(r,e,t,n,s,i){var o=i.z||r.length,a=new ae(n+o+5*(1+Math.ceil(o/7e3))+s),u=a.subarray(n,a.length-s),c=i.l,l=(i.r||0)&7;if(e){l&&(u[0]=i.r>>3);for(var d=as[e-1],f=d>>13,h=d&8191,m=(1<<t)-1,g=i.p||new me(32768),p=i.h||new me(m+1),b=Math.ceil(t/3),_=2*b,B=function(I){return(r[I]^r[I+1]<<b^r[I+2]<<_)&m},P=new Xt(25e3),N=new me(288),O=new me(32),T=0,E=0,k=i.i||0,R=0,L=i.w||0,W=0;k+2<o;++k){var v=B(k),w=k&32767,M=p[v];if(g[w]=M,p[v]=w,L<=k){var x=o-k;if((T>7e3||R>24576)&&(x>423||!c)){l=vr(r,u,0,P,N,O,E,R,W,k-W,l),R=T=E=0,W=k;for(var A=0;A<286;++A)N[A]=0;for(var A=0;A<30;++A)O[A]=0}var q=2,U=0,Q=h,V=w-M&32767;if(x>2&&v==B(k-V))for(var te=Math.min(f,x)-1,ce=Math.min(32767,k),re=Math.min(258,x);V<=ce&&--Q&&w!=M;){if(r[k+q]==r[k+q-V]){for(var X=0;X<re&&r[k+X]==r[k+X-V];++X);if(X>q){if(q=X,U=V,X>te)break;for(var fe=Math.min(V,X-2),xe=0,A=0;A<fe;++A){var Re=k-V+A&32767,pt=g[Re],Qe=Re-pt&32767;Qe>xe&&(xe=Qe,M=Re)}}}w=M,M=g[w],V+=w-M&32767}if(U){P[R++]=268435456|Nt[q]<<18|mr[U];var Je=Nt[q]&31,vt=mr[U]&31;E+=Gt[Je]+Ht[vt],++N[257+Je],++O[vt],L=k+q,++T}else P[R++]=r[k],++N[r[k]]}}for(k=Math.max(k,L);k<o;++k)P[R++]=r[k],++N[r[k]];l=vr(r,u,c,P,N,O,E,R,W,k-W,l),c||(i.r=l&7|u[l/8|0]<<3,l-=7,i.h=p,i.p=g,i.i=k,i.w=L)}else{for(var k=i.w||0;k<o+c;k+=65535){var ye=k+65535;ye>=o&&(u[l/8|0]=c,ye=o),l=Or(u,l+1,r.subarray(k,ye))}i.i=o}return Fr(a,0,n+$r(l)+s)},wc=function(){for(var r=new Int32Array(256),e=0;e<256;++e){for(var t=e,n=9;--n;)t=(t&1&&-306674912)^t>>>1;r[e]=t}return r}(),yc=function(){var r=-1;return{p:function(e){for(var t=r,n=0;n<e.length;++n)t=wc[t&255^e[n]]^t>>>8;r=t},d:function(){return~r}}},ls=function(r,e,t,n,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),o=new ae(i.length+r.length);o.set(i),o.set(r,i.length),r=o,s.w=i.length}return cs(r,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,n,s)},Br=function(r,e){var t={};for(var n in r)t[n]=r[n];for(var n in e)t[n]=e[n];return t},ln=function(r,e,t){for(var n=r(),s=r.toString(),i=s.slice(s.indexOf("[")+1,s.lastIndexOf("]")).replace(/\s+/g,"").split(","),o=0;o<n.length;++o){var a=n[o],u=i[o];if(typeof a=="function"){e+=";"+u+"=";var c=a.toString();if(a.prototype)if(c.indexOf("[native code]")!=-1){var l=c.indexOf(" ",8)+1;e+=c.slice(l,c.indexOf("(",l))}else{e+=c;for(var d in a.prototype)e+=";"+u+".prototype."+d+"="+a.prototype[d].toString()}else e+=c}else t[u]=a}return e},xt=[],bc=function(r){var e=[];for(var t in r)r[t].buffer&&e.push((r[t]=new r[t].constructor(r[t])).buffer);return e},Sc=function(r,e,t,n){if(!xt[t]){for(var s="",i={},o=r.length-1,a=0;a<o;++a)s=ln(r[a],s,i);xt[t]={c:ln(r[o],s,i),e:i}}var u=Br({},xt[t].e);return gc(xt[t].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",t,u,bc(u),n)},Mc=function(){return[ae,me,Xt,Gt,Ht,gr,Nt,mr,is,Te,os,ft,qt,as,Tr,Ye,Me,Ie,Pt,It,pr,De,Or,vr,$r,Fr,cs,ls,Lr,us]},us=function(r){return postMessage(r,[r.buffer])},xc=function(r,e,t,n,s,i){var o=Sc(t,n,s,function(a,u){o.terminate(),i(a,u)});return o.postMessage([r,e],e.consume?[r.buffer]:[]),function(){o.terminate()}},ie=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8};function kc(r,e,t){return t||(t=e,e={}),typeof t!="function"&&Ge(7),xc(r,e,[Mc],function(n){return us(Lr(n.data[0],n.data[1]))},0,t)}function Lr(r,e){return ls(r,e||{},0,0)}var ds=function(r,e,t,n){for(var s in r){var i=r[s],o=e+s,a=n;Array.isArray(i)&&(a=Br(n,i[1]),i=i[0]),i instanceof ae?t[o]=[i,a]:(t[o+="/"]=[new ae(0),a],ds(i,o,t,n))}},un=typeof TextEncoder<"u"&&new TextEncoder,_c=typeof TextDecoder<"u"&&new TextDecoder,Ac=0;try{_c.decode(Tr,{stream:!0}),Ac=1}catch{}function dn(r,e){var t;if(un)return un.encode(r);for(var n=r.length,s=new ae(r.length+(r.length>>1)),i=0,o=function(c){s[i++]=c},t=0;t<n;++t){if(i+5>s.length){var a=new ae(i+8+(n-t<<1));a.set(s),s=a}var u=r.charCodeAt(t);u<128||e?o(u):u<2048?(o(192|u>>6),o(128|u&63)):u>55295&&u<57344?(u=65536+(u&1047552)|r.charCodeAt(++t)&1023,o(240|u>>18),o(128|u>>12&63),o(128|u>>6&63),o(128|u&63)):(o(224|u>>12),o(128|u>>6&63),o(128|u&63))}return Fr(s,0,i)}var wr=function(r){var e=0;if(r)for(var t in r){var n=r[t].length;n>65535&&Ge(9),e+=n+4}return e},fn=function(r,e,t,n,s,i,o,a){var u=n.length,c=t.extra,l=a&&a.length,d=wr(c);ie(r,e,o!=null?33639248:67324752),e+=4,o!=null&&(r[e++]=20,r[e++]=t.os),r[e]=20,e+=2,r[e++]=t.flag<<1|(i<0&&8),r[e++]=s&&8,r[e++]=t.compression&255,r[e++]=t.compression>>8;var f=new Date(t.mtime==null?Date.now():t.mtime),h=f.getFullYear()-1980;if((h<0||h>119)&&Ge(10),ie(r,e,h<<25|f.getMonth()+1<<21|f.getDate()<<16|f.getHours()<<11|f.getMinutes()<<5|f.getSeconds()>>1),e+=4,i!=-1&&(ie(r,e,t.crc),ie(r,e+4,i<0?-i-2:i),ie(r,e+8,t.size)),ie(r,e+12,u),ie(r,e+14,d),e+=16,o!=null&&(ie(r,e,l),ie(r,e+6,t.attrs),ie(r,e+10,o),e+=14),r.set(n,e),e+=u,d)for(var m in c){var g=c[m],p=g.length;ie(r,e,+m),ie(r,e+2,p),r.set(g,e+4),e+=4+p}return l&&(r.set(a,e),e+=l),e},Cc=function(r,e,t,n,s){ie(r,e,101010256),ie(r,e+8,t),ie(r,e+10,t),ie(r,e+12,n),ie(r,e+16,s)};function Pc(r,e,t){t||(t=e,e={}),typeof t!="function"&&Ge(7);var n={};ds(r,"",n,e);var s=Object.keys(n),i=s.length,o=0,a=0,u=i,c=new Array(i),l=[],d=function(){for(var p=0;p<l.length;++p)l[p]()},f=function(p,b){hn(function(){t(p,b)})};hn(function(){f=t});var h=function(){var p=new ae(a+22),b=o,_=a-o;a=0;for(var B=0;B<u;++B){var P=c[B];try{var N=P.c.length;fn(p,a,P,P.f,P.u,N);var O=30+P.f.length+wr(P.extra),T=a+O;p.set(P.c,T),fn(p,o,P,P.f,P.u,N,a,P.m),o+=16+O+(P.m?P.m.length:0),a=T+N}catch(E){return f(E,null)}}Cc(p,o,c.length,_,b),f(null,p)};i||h();for(var m=function(p){var b=s[p],_=n[b],B=_[0],P=_[1],N=yc(),O=B.length;N.p(B);var T=dn(b),E=T.length,k=P.comment,R=k&&dn(k),L=R&&R.length,W=wr(P.extra),v=P.level==0?0:8,w=function(M,x){if(M)d(),f(M,null);else{var A=x.length;c[p]=Br(P,{size:O,crc:N.d(),c:x,f:T,m:R,u:E!=b.length||R&&k.length!=L,compression:v}),o+=30+E+W+A,a+=76+2*(E+W)+(L||0)+A,--i||h()}};if(E>65535&&w(Ge(11,0,1),null),!v)w(null,B);else if(O<16e4)try{w(null,Lr(B,P))}catch(M){w(M,null)}else l.push(kc(B,P,w))},g=0;g<u;++g)m(g);return d}var hn=typeof queueMicrotask=="function"?queueMicrotask:typeof setTimeout=="function"?setTimeout:function(r){r()};function Rc(r,e,t){const n=D.getCanvasContext(r);return n.clearRect(0,0,r.width,r.height),e===void 0||t===void 0||(Fc(n,e),$c(n,e,t),Ec(n,e,t)),r}function Ec(r,e,t){r.lineWidth=1,Math.abs(t.zeroY-e.averageY)>5&&(r.beginPath(),r.strokeStyle="rgb(64, 0, 255)",r.setLineDash([2,4]),r.moveTo(Math.round(e.averageX+3),Math.round(e.averageY)),r.lineTo(Math.round(t.zeroX),Math.round(e.averageY)),r.lineTo(Math.round(t.zeroX),Math.round(t.zeroY)),r.stroke()),r.beginPath(),r.strokeStyle="rgb(0, 225, 255)",r.setLineDash([3]),r.moveTo(e.averageX+3,e.averageY),r.lineTo(Math.round(t.zeroX),Math.round(t.zeroY)),r.stroke(),r.fillStyle="rgb(0, 225, 255)",r.fillRect(Math.round(t.zeroX-1),Math.round(t.zeroY),3,1),r.fillRect(Math.round(t.zeroX),Math.round(t.zeroY-2),1,5)}function $c(r,e,t){r.font="10px Arial",r.fillStyle="rgb(0, 95, 0)",r.strokeStyle="white";const n=e.averageX-e.averageRadius,s=e.averageY-e.averageRadius,i=(o,a,u)=>{r.strokeText(o,n+a,s+u),r.fillText(o,n+a,s+u)};i(`AB = ${Math.round(t.lengthAB*1e5)/1e5}`,-65,-30),i(`BC = ${Math.round(t.lengthBC*1e5)/1e5}`,-65,-20),i(`AC = ${Math.round(t.lengthAC*1e5)/1e5}`,-65,-10),i(`α = ${Math.round(t.alphaDegree*100)/100}°`,5,-30),i(`β = ${Math.round(t.betaDegree*100)/100}°`,5,-20),i(`γ = ${Math.round(t.gammaDegree*100)/100}°`,5,-10)}function Fc(r,e){r.fillStyle="rgba(255, 0, 242, .7)";for(let t=0;t<10*Math.PI;t++){const n=e.averageRadius/2+e.averageRadius*Math.cos((t-5*Math.PI)/10),s=e.averageRadius*Math.sin((t-5*Math.PI)/10);r.fillRect(e.averageX+n,e.averageY+s,1,1)}for(let t=0;t<10*Math.PI;t++){const n=e.averageRadius+e.averageRadius*Math.cos((t-5*Math.PI)/10),s=e.averageRadius*Math.sin((t-5*Math.PI)/10);r.fillRect(e.averageX+n,e.averageY+s,1,1)}r.fillStyle="rgba(255, 0, 242, .2)";for(let t=e.averageRadius/2;t<e.averageRadius;t+=2)for(let n=0;n<10*Math.PI;n++){const s=t+e.averageRadius*Math.cos((n-5*Math.PI)/10),i=e.averageRadius*Math.sin((n-5*Math.PI)/10);r.fillRect(e.averageX+s,e.averageY+i,1,1)}}function Oc(r,e,t,n){const s=D.getCanvasContext(r);return s.clearRect(0,0,r.width,r.height),t===void 0||n===void 0||e===void 0||(Nc(s,t,n,e),Lc(s,n,e),Tc(s,e),Bc(s,e)),r}function Tc(r,e){r.strokeStyle="yellow",r.lineWidth=2,r.setLineDash([0]);const t=e.zeroRightX+2-10*Math.sin(e.recalculatedAlphaDegree),n=e.zeroRightX+2+10*Math.sin(e.recalculatedAlphaDegree),s=e.zeroRightY+10*Math.cos(e.recalculatedAlphaDegree),i=e.zeroRightY-10*Math.cos(e.recalculatedAlphaDegree),o=e.zeroLeftX-2-10*Math.sin(e.recalculatedAlphaDegree),a=e.zeroLeftX-2+10*Math.sin(e.recalculatedAlphaDegree),u=e.zeroLeftY+10*Math.cos(e.recalculatedAlphaDegree),c=e.zeroLeftY-10*Math.cos(e.recalculatedAlphaDegree);r.beginPath(),r.moveTo(t,s),r.lineTo(n,i),r.stroke(),r.beginPath(),r.moveTo(o,u),r.lineTo(a,c),r.stroke(),r.lineWidth=1}function Bc(r,e){r.fillStyle="rgb(0, 0, 255)";const t=11;let n=e.hills.at(t)?.[0],s=e.valleys.at(t)?.[0],i=e.hills.at(t)?.[1],o=e.valleys.at(t)?.[1];const a=(n+s)/2,u=(i+o)/2;r.fillRect(Math.round(a-1),Math.round(u),3,1),r.fillRect(Math.round(a),Math.round(u-2),1,5),r.strokeStyle="yellow",r.lineWidth=2,r.setLineDash([0]);const c=e.sevenTopX-5*Math.cos(e.recalculatedAlphaDegree),l=e.sevenTopX+5*Math.cos(e.recalculatedAlphaDegree),d=e.sevenTopY-2-5*Math.sin(e.recalculatedAlphaDegree),f=e.sevenTopY-2+5*Math.sin(e.recalculatedAlphaDegree),h=e.sevenBottomX-5*Math.cos(e.recalculatedAlphaDegree),m=e.sevenBottomX+5*Math.cos(e.recalculatedAlphaDegree),g=e.sevenBottomY+2-5*Math.sin(e.recalculatedAlphaDegree),p=e.sevenBottomY+2+5*Math.sin(e.recalculatedAlphaDegree);r.beginPath(),r.moveTo(c,d),r.lineTo(l,f),r.stroke(),r.beginPath(),r.moveTo(h,g),r.lineTo(m,p),r.stroke(),r.lineWidth=1}function Lc(r,e,t){for(let n=0;n<=r.canvas.width-e.zeroX;n++){const s=e.zeroX+n*Math.cos(e.alphaDegree),i=e.zeroY+n*Math.sin(e.alphaDegree);n%2===0&&(r.fillStyle="rgba(255, 0, 217, 0.5)",r.fillRect(s,i,1,1),r.fillStyle="rgba(255, 0, 217, 0.3)",r.fillRect(s,i-2,1,1),r.fillRect(s,i+2,1,1))}r.fillStyle="red";for(const[n,s]of t.hills)r.fillRect(n,s,1,1);r.fillStyle="darkRed";for(const[n,s]of t.valleys)r.fillRect(n,s,1,1)}function Nc(r,e,t,n){r.setLineDash([1]),r.strokeStyle="rgba(255, 0, 242, .3)",r.strokeRect(t.rotatedUpwards?e.averageX-t.lengthBC:e.averageX,e.averageY-e.bigRadius,t.lengthBC,e.bigRadius),r.strokeRect(t.rotatedUpwards?e.averageX:e.averageX-t.lengthBC,e.averageY,t.lengthBC,e.bigRadius),r.strokeStyle="rgba(255, 162, 0, 0.5)",r.setLineDash([3]),r.lineWidth=1,r.beginPath(),r.moveTo(n.zeroRightX,n.zeroRightY),r.lineTo(n.sevenTopX,n.sevenTopY),r.lineTo(n.zeroLeftX,n.zeroLeftY),r.lineTo(n.sevenBottomX,n.sevenBottomY),r.lineTo(n.zeroRightX,n.zeroRightY),r.stroke()}const qc=({id:r,canvas:e,show:t})=>{if(!t)return;const n=Object.assign(document.createElement("canvas"),{id:r,width:e.width,height:e.height}),s=n.getContext("2d",{willReadFrequently:!0,alpha:!0});return Ae(()=>{const i=D.getCanvasContext(e).getImageData(0,0,e.width,e.height);s.putImageData(i,0,0)}),n},Ic=({id:r,image:e,show:t})=>{if(!t)return;const n=Object.assign(document.createElement("canvas"),{id:r,width:e.width,height:e.height}),s=n.getContext("2d",{willReadFrequently:!0,alpha:!0});return Ae(()=>{s.putImageData(e,0,0)}),n},[yr,Dc]=j({}),mt=(r,e,t)=>Dc?.(n=>({...n,[r]:{canvas:t,show:e}})),zc=()=>{const r=$(()=>Object.entries(yr()).map(([e,{canvas:t,show:n}])=>C(qc,{id:e,canvas:t,show:n})),()=>Object.keys(yr()));return $(r)},[br,Wc]=j({}),fs=(r,e,t)=>Wc?.(n=>({...n,[e]:{image:t,show:r}})),Uc=(r,e,t)=>fs(r,e,new ImageData(lc(t),t.width,t.height)),[jc,Vc]=j(),Yc=(r,e,t)=>mt("edge",r,cc(new OffscreenCanvas(e.width,e.height),t)),Xc=(r,e,t)=>mt("ellipsoid",r,dc(new OffscreenCanvas(e.width,e.height),t)),Gc=(r,e,t,n)=>mt("angles",r,Rc(new OffscreenCanvas(e.width,e.height),t,n)),Hc=(r,e,t,n,s)=>mt("boundary",r,Oc(new OffscreenCanvas(e.width,e.height),t,n,s)),Kc=()=>{let r,e=!1;const t=Object.assign(document.createElement("div"),{id:"download-all",ondblclick:gn,ontouchend:()=>{e===!0&&gn(),clearTimeout(r),e=!0,r=setTimeout(()=>e=!1,500)}}),n=$(()=>Object.entries(br()).map(([s,{image:i,show:o}])=>C(Ic,{id:s,image:i,show:o})),()=>Object.keys(br()));return[$(n),t]},gn=async()=>{const r=Date.now(),e={},t=jc(),n=new Blob([JSON.stringify(t??"")],{type:"application/json"}),s=new Uint8Array(await n.arrayBuffer());e[`camera-feed-${r}-viewfinder.json`]=[s,{level:9}];for(const[u,{canvas:c}]of Object.entries(yr())){const l=await c.convertToBlob({type:"image/png"}),d=new Uint8Array(await l.arrayBuffer());e[`camera-feed-${r}-${u}.png`]=[d,{level:0}]}for(const[u,{image:c}]of Object.entries(br())){const l=new OffscreenCanvas(c.width,c.height);D.getCanvasContext(l).putImageData(c,0,0);const d=await l.convertToBlob({type:"image/png"}),f=new Uint8Array(await d.arrayBuffer());e[`camera-feed-${r}-${u}.png`]=[f,{level:0}]}const i=await new Promise((u,c)=>Pc(e,(l,d)=>l?c(l):u(d))),o=document.createElement("a");o.download=`camera-feed-${r}.zip`;const a=new FileReader;o.href=await new Promise(u=>{a.onload=c=>{u(c.target.result)},a.readAsDataURL(new Blob([i],{type:"application/octet-stream"}))}),o.click()},ue=D.debugEnabled()?{DebugCanvasDisplay:zc,debugCanvas:mt,DebugGridDisplay:Kc,debugImageData:fs,debugGridPixels:Uc,debugEdgeMap:Yc,debugEllipsoid:Xc,setViewfinderRectForDownload:Vc,debugAngles:Gc,debugBoundary:Hc}:void 0;function Qc(r,e){if(!r||!e)return;let t=1/0,n=0,s=1/0;for(let b=r.averageRadius/2;b<r.averageRadius;b+=2)for(let _=0;_<10*Math.PI;_++){const B=b+r.averageRadius*Math.cos((_-5*Math.PI)/10),P=r.averageRadius*Math.sin((_-5*Math.PI)/10),N=Math.round(r.averageX+B),O=Math.round(r.averageY+P),T=e.pixel(N,O);T.r===255&&T.g===255&&(t=Math.min(t,T.x),s=Math.min(s,T.y),n=Math.max(n,T.y+1))}const i=t,o=Math.floor((n+s)/2),a=i-r.averageX,u=o-r.averageY,c=Math.tan(u/a),l=c*(Math.PI/180),d=90,f=(d-Math.abs(c))*(c>0?1:-1),h=i-r.averageX,m=Math.abs(o-r.averageY),g=h/Math.cos(l),p=c<0;return{zeroX:i,zeroY:o,alphaDegree:c,betaDegree:d,gammaDegree:f,lengthAB:h,lengthAC:g,lengthBC:m,rotatedUpwards:p}}function Jc(r,e,t){if(!r||!e||!t)return;let n=!1;const s=[],i=[];for(let T=0;T<=t.width-r.zeroX&&i.length!==23;T++){const E=r.zeroX-10+T*Math.cos(r.alphaDegree),k=r.zeroY+T*Math.sin(r.alphaDegree);if(n){let L=t.pixel(E,k);if(L.r===0&&L.g===0){n=!1,i.push([L.x,L.y]);continue}if(L=t.pixel(E,k-1),L.r===0&&L.g===0){n=!1,i.push([L.x,L.y]);continue}if(L=t.pixel(E,k+1),L.r===0&&L.g===0){n=!1,i.push([L.x,L.y]);continue}continue}let R=t.pixel(E,k);if(R.r===255&&R.g===255){n=!0,s.push([R.x,R.y]);continue}if(R=t.pixel(E,k-1),R.r===255&&R.g===255){n=!0,s.push([R.x,R.y]);continue}if(R=t.pixel(E,k+1),R.r===255&&R.g===255){n=!0,s.push([R.x,R.y]);continue}}if(console.log("barCount",s.length),s.length!==23)return;const o=i.at(22)?.[0],a=i.at(22)?.[1],u=11;let c=s.at(u)?.[0],l=i.at(u)?.[0],d=s.at(u)?.[1],f=i.at(u)?.[1];const h=Math.round((f+d)/2),m=Math.round((l+c)/2),g=o-r.zeroX,p=a-r.zeroY,b=Math.tan(p/g),_=m-e.averageRadius*Math.tan(b*-1),B=m+e.averageRadius*Math.tan(b*-1);let P=1/0,N=0;const O=e.bigRadius+2;for(let T=-1*O;T<=O;T++){const E=T,k=h-E*Math.cos(Math.abs(b));let R=t.pixel(_,k);R.r===255&&R.g===255&&(P=Math.min(P,R.y));const L=h+E*Math.cos(Math.abs(b));R=t.pixel(B,L),R.r===255&&R.g===255&&(N=Math.max(N,R.y))}return{hills:s,valleys:i,zeroLeftX:r.zeroX,zeroLeftY:r.zeroY,zeroRightX:o,zeroRightY:a,sevenTopX:_,sevenTopY:P,sevenBottomX:B,sevenBottomY:N,recalculatedAlphaDegree:b}}function Zc(r,e,t,n){if(e===void 0||t===void 0||n===void 0)return;const s=new OffscreenCanvas(r.width*2,r.width*2),i=D.getCanvasContext(s,!1),o=new OffscreenCanvas(r.width*2,r.width*2),a=D.getCanvasContext(o,!1);a.fillStyle="yellow",i.translate(o.width/2-n.zeroLeftX,0),i.translate(0,o.height/2-n.zeroLeftY),i.drawImage(r,0,0,r.width,r.height),i.resetTransform();const u=Math.floor(e.averageRadius/8)*8,c=(n.zeroRightX-n.zeroLeftX)/Math.cos(n.recalculatedAlphaDegree);a.translate(0,u+2),a.rotate(-n.recalculatedAlphaDegree),a.drawImage(s,-s.width/2,-s.height/2),a.save(),a.resetTransform(),a.globalCompositeOperation="saturation",a.fillStyle="rgba(0, 0, 0, 1)",a.fillRect(0,0,o.width,o.height),a.save();const l=new OffscreenCanvas(45,8*8+8),d=D.getCanvasContext(l,!1),f=(l.height-8)/(u*2),h=l.width/c;return d.scale(h,f),d.drawImage(o,0,0),d.resetTransform(),d.fillStyle="rgb(251, 151, 0)",d.fillRect(1,4*8,1,1),d.fillRect(1,4*7,1,1),d.fillRect(1,4*6,1,1),d.fillRect(1,4*5,1,1),d.fillRect(1,4*4,1,1),d.fillRect(1,4*3,1,1),d.fillRect(1,4*2,1,1),d.fillRect(1,4*1,1,1),d.fillStyle="rgb(0, 213, 251)",d.fillRect(1,4*8+4*9,1,1),d.fillRect(1,4*7+4*9,1,1),d.fillRect(1,4*6+4*9,1,1),d.fillRect(1,4*5+4*9,1,1),d.fillRect(1,4*4+4*9,1,1),d.fillRect(1,4*3+4*9,1,1),d.fillRect(1,4*2+4*9,1,1),d.fillRect(1,4*1+4*9,1,1),l}const el=130;function hs(r,e){let t=0;for(let n=0;n<r.height;n++)ec(r,e,n).r>=el&&t++;return t}function tl(r,e,t){const n=hs(r,e),s=Math.round(n/t*8)-1;return s>0?s:0}function rl(r){if(r===void 0)return;const e=D.getCanvasContext(r).getImageData(0,0,r.width,r.height),t=hs(e,22);let n=[];for(let s=0;s<=44;s+=2){const i=tl(e,s,t);if(s===0&&i!=0||s===22&&i!=7||s===44&&i!=0)return;n.push(i)}return n.slice(0,23)}var nl=F("<div>"),sl=F("<div class=feedback><br>");const[il,mn]=j(""),[ol,pn]=j(""),[al,kt]=j(!1),[vn,cl]=j(),wn=({videoElement:r})=>{const e=Pe();let t;async function n(){if(e.hasErrored()){t=setTimeout(()=>requestAnimationFrame(n),D.sampleRate);return}if(!e.hasPermission())return requestAnimationFrame(n);const s=await e.cameraStream();if(!s||!vn())return requestAnimationFrame(n);const i=vn().getBoundingClientRect();if(i.width===0||!r||r.getBoundingClientRect().width===0)return requestAnimationFrame(n);const o=s.getVideoTracks()[0];if(!o)return requestAnimationFrame(n);const a=await Ja(r,o);if(!a)return requestAnimationFrame(n);ue?.debugCanvas("scale",D.showScaleCanvas,a),D.debugEnabled()&&ue?.setViewfinderRectForDownload(i);const u=await Promise.all([sn(i,a,!1),sn(i,a,!0)]);ue?.debugCanvas("grayscale",D.showGrayscaleImage,u[0]),ue?.debugCanvas("grayscale-inverted",D.showGrayscaleImage,u[1]);const c=await Promise.all([on(u[0]),on(u[1])]);ue?.debugCanvas("blur",!1,c[0]),ue?.debugCanvas("blur-inverted",!1,c[1]);const l=sc(u[0],c[0],c[1]);if(!l)return requestAnimationFrame(n);ue?.debugGridPixels(D.showOrientationLines,"lines",l);const d=oc(l);ue?.debugEdgeMap(D.showOrientationLines,l,d);const f=ac(d,l.height);f||(mn(""),kt(!1),pn(""),t=setTimeout(()=>requestAnimationFrame(n),D.sampleRate)),ue?.debugEllipsoid(D.showEllipsoid,l,f);const h=Qc(f,l);ue?.debugAngles(D.showAngles,l,f,h);const m=Jc(h,f,l);if(ue?.debugBoundary(D.showBoundary,l,m,f,h),!m){t=setTimeout(()=>requestAnimationFrame(n),D.sampleRate);return}const g=Zc(u[0],f,h,m);if(!g){kt(!1),t=setTimeout(()=>requestAnimationFrame(n),D.sampleRate);return}const p=rl(g);if(!p){kt(!1),t=setTimeout(()=>requestAnimationFrame(n),D.sampleRate);return}kt(!0),mn(`code: ${p.join("")}`),Kn(p)&&pn(`media-ref: ${p.join("")}`),t=setTimeout(()=>requestAnimationFrame(n),D.sampleRate)}return Ce(async()=>{!e.hasPermission()||!e.camera()&&!await e.requestCamera()||(t=setTimeout(()=>requestAnimationFrame(n),D.sampleRate))}),Se(()=>{clearTimeout(t)}),[(()=>{var s=nl();return Pn(cl,s),S(s,ue&&C(ue.DebugCanvasDisplay,{}),null),S(s,ue&&C(ue.DebugGridDisplay,{}),null),ge(()=>Ut(s,al()?"viewfinder scanning":"viewfinder")),s})(),(()=>{var s=sl(),i=s.firstChild;return S(s,il,i),S(s,ol,null),s})()]};var ll=F("<div class=camera-canvas>"),yn=F("<div class=video-overlay>"),ul=F('<div class="video-overlay debug">');const dl=()=>{const[r,e]=j();return(()=>{var t=ll();return S(t,C(rs,{ref:e}),null),S(t,(()=>{var n=$(()=>!!D.debugEnabled());return()=>n()?[yn(),(()=>{var s=ul();return S(s,C(wn,{get videoElement(){return r()}})),s})()]:(()=>{var s=yn();return S(s,C(wn,{get videoElement(){return r()}})),s})()})(),null),t})()};var fl=F("<h1>"),ir=F("<p>"),hl=F("<p><i>"),gl=F(`<details><summary></summary><pre class=version> 
</pre><pre>`);const ml=r=>{const{dictionary:e}=se(),[t,n]=j(),s="Application Version: 1.0.0-alpha.51",i=Array.from(s).fill("-").join(""),{Modal:o,showModal:a}=Rr(),u=()=>(t()?.restore?.(),window.location.reload(),!1),c=f=>{n(f instanceof Error?f:new Error(f)),console.error("Uncaught application error",f);debugger;a()},l=f=>{const h=f.reason instanceof Error?f.reason:Object.assign(new Error(f.reason),{stack:f.promise.__creationPoint});c(h)},d=f=>c(f.error);return Ce(()=>{addEventListener("unhandledrejection",l),addEventListener("error",d)}),Se(()=>{removeEventListener("unhandledrejection",l),removeEventListener("error",d)}),[C(Es,{fallback:(f,h)=>[],get children(){return we(()=>r.children)()}}),C(o,{class:"uncaught-error-modal",beforeClose:u,get children(){return[(()=>{var f=fl();return S(f,()=>e().common.unhandledError.title),f})(),(()=>{var f=ir();return S(f,()=>e().common.unhandledError.explainer[0]),f})(),(()=>{var f=ir();return S(f,()=>e().common.unhandledError.explainer[1]),f})(),$(()=>$(()=>!!t())()&&[(()=>{var f=gl(),h=f.firstChild,m=h.nextSibling,g=m.firstChild,p=m.nextSibling;return S(h,()=>e().common.unhandledError.details),S(m,s,g),S(m,i,null),S(p,()=>t().stack?.toString()??t().toString()),f})(),ir()]),(()=>{var f=hl(),h=f.firstChild;return S(h,()=>e().common.unhandledError.explainer[2]),f})()]}})]},pl="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M3%2018h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z'/%3e%3c/svg%3e",vl={en:"English (en)",nl:"Nederlands (nl)"};var wl=F("<header><h1 class=logo><img><span>Guessify</span></h1><nav><button><img><span>Menu"),yl=F("<div class=menu><div class=details><h2 class=logo><img> <span>Guessify</span> <sub></sub></h2><hr>"),bl=F("<div class=camera-settings><p>"),Sl=F("<div class=account-settings><p>Account: ");const Ml=()=>{const{Modal:r,showModal:e,closeModal:t}=Rr();return Ce(async()=>{}),(()=>{var n=wl(),s=n.firstChild,i=s.firstChild,o=s.nextSibling,a=o.firstChild,u=a.firstChild;return ee(i,"src",dt),Cn(a,"click",e,!0),ee(u,"src",pl),S(n,C(r,{get children(){return C(xl,{closeModal:t})}}),null),n})()},xl=({closeModal:r})=>(()=>{var e=yl(),t=e.firstChild,n=t.firstChild,s=n.firstChild,i=s.nextSibling,o=i.nextSibling,a=o.nextSibling,u=a.nextSibling,c=n.nextSibling;return ee(s,"src",dt),S(u,()=>"1.0.0-alpha.51"),S(t,C(kl,{}),c),S(t,C(_l,{}),c),S(t,C(Al,{closeModal:r}),null),S(t,C(Cl,{closeModal:r}),null),e})(),kl=()=>{const{locale:r,locales:e}=se(),t=e.map(s=>({id:s,text:vl[s]})),n=Nn();return C(es,{value:r,options:()=>t,onChange:(s,i)=>{n("/"+i+"/")}})},_l=()=>{const{dictionary:r}=se();return C(Oe,{disabled:!0,get text(){return r().common.share}})},Al=({closeModal:r})=>{const{camera:e,hasPermission:t,hasErrored:n}=Pe(),{dictionary:s,template:i}=se();return Ae(()=>{(!t()||n())&&r()},[t,n]),(()=>{var o=bl(),a=o.firstChild;return S(a,()=>i(s().camera.selectedCamera,{label:e()?.label??"?"})),S(o,C(ts,{}),null),o})()},Cl=({closeModal:r})=>{const{logOut:e,profile:t}=Xe(),{dictionary:n}=se();return(()=>{var s=Sl(),i=s.firstChild;return i.firstChild,S(i,()=>t()?.display_name,null),S(s,C(Oe,{get text(){return n().spotify.signOut},imageUrl:Zn,onClick:o=>{o.currentTarget.disabled=!0,r(),e()}}),null),s})()};Wt(["click"]);var Pl=F("<p>TODO, language selector <a href=/guessify/en/>English</a> / <a href=/guessify/nl/>Nederlands");const Rl=r=>C(ml,{get children(){return C(Xa,{get children(){return C(Oo,{get children(){return we(()=>r.children)()}})}})}}),El=()=>C(Yo,{get children(){return C(Di,{get children(){return C(Ka,{get children(){return[C(Ml,{}),C(dl,{})]}})}})}}),bn=()=>Pl(),$l="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e8eaed'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M16.24%207.76C15.07%206.59%2013.54%206%2012%206v6l-4.24%204.24c2.34%202.34%206.14%202.34%208.49%200%202.34-2.34%202.34-6.14-.01-8.48zM12%202C6.48%202%202%206.48%202%2012s4.48%2010%2010%2010%2010-4.48%2010-10S17.52%202%2012%202zm0%2018c-4.42%200-8-3.58-8-8s3.58-8%208-8%208%203.58%208%208-3.58%208-8%208z'/%3e%3c/svg%3e";var Fl=F("<div class=auth><h1 class=logo><img> Guessify</h1><div class=details><p><img>");const Ol=()=>{const r=Nn(),{handleAuthReturn:e}=Yt(),t=Vt(),n=t?Xi(t).spotify.signingIn:"...";return Ae(()=>{e().then(s=>{r(s,{replace:!0})})}),(()=>{var s=Fl(),i=s.firstChild,o=i.firstChild,a=i.nextSibling,u=a.firstChild,c=u.firstChild;return ee(o,"src",dt),ee(c,"src",$l),S(u,n,null),s})()},Tl=document.getElementById("root"),Bl=r=>r.replace("/guessify/?","/guessify");globalThis.Promise=class extends Promise{constructor(){super(...arguments),this.__creationPoint=new Error().stack}};Is(()=>C(ki,{get base(){return"/guessify"},explicitLinks:!0,transformUrl:Bl,root:Rl,get children(){return[C(yt,{path:"/spotify-auth",component:Ol}),C(yt,{path:"/:locale/",component:El}),C(yt,{path:"/",component:bn}),C(yt,{path:"*404",component:bn})]}}),Tl);
